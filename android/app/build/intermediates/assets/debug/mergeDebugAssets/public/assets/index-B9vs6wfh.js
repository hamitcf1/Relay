import{c as Xh,t as ob,j as n,S as db,m as me,H as Yc,M as Wc,L as Vc,E as Pc,a as er,b as at,A as ub,U as Ws,B as fb,K as Md,d as mb,P as cs,e as Qh,C as Ps,f as Zh,g as hb,h as Jh,I as Fh,i as $h,k as Ih,l as kt,R as Wh,n as Fd,o as Ph,p as ex,q as xb,T as gb,r as pb,s as tx,u as ax,v as Dn,G as nx,X as St,w as oi,x as dt,y as Kc,z as Xc,D as $d,F as bb,J as Id,W as Od,N as ah,O as yb,Q as tr,V as si,Y as vb,Z as sx,_ as Nb,$ as jb,a0 as lx,a1 as ix,a2 as zb,a3 as cx,a4 as wb,a5 as rx,a6 as ox,a7 as Sb,a8 as dx,a9 as _b,aa as ux,ab as fx,ac as mx,ad as Cb,ae as hx,af as Eb,ag as xx,ah as gx,ai as Tb,aj as kb,ak as px,al as Ab,am as Db,an as bx,ao as yx,ap as vx,aq as Rb,ar as Nx,as as Ud,at as Hd,au as Mb,av as Bd,aw as Ob,ax as Ub,ay as Hb,az as en,aA as jx,aB as Jt,aC as Gd,aD as as,aE as Qc,aF as Ld,aG as Bb,aH as Gb,aI as ar,aJ as zx,aK as Lb,aL as nh,aM as qb,aN as Wd,aO as sh,aP as Pd,aQ as eu,aR as Yb,aS as Vb,aT as wx,aU as Kb,aV as Xb,aW as Qb,aX as Ac,aY as Zb,aZ as Jb,a_ as Sx,a$ as Fb,b0 as $b,b1 as Ib,b2 as _x,b3 as Cx,b4 as Ex,b5 as lh,b6 as Wb,b7 as Tx,b8 as kx,b9 as Pb,ba as qd,bb as Ax,bc as ey,bd as ty,be as ay,bf as ny,bg as Yd,bh as sy,bi as ly,bj as iy,bk as cy,bl as ry}from"./vendor-ui--TRn9sBw.js";import{d as oy,e as dy,f as Ct,r as j,u as el,L as Dx,g as uy,h as Rx,N as ih,B as fy,i as my,j as Fs}from"./vendor-react-DMkOrHch.js";import{i as hy,g as xy,c as gy,d as he,u as De,o as py,s as by,e as yy,f as ns,h as Pa,j as $t,k as vy,l as Ta,w as Ny,m as Le,n as Ft,p as Je,q as yt,r as ss,t as ka,T as Dt,v as Na,x as tl}from"./vendor-firebase-DntPIKkY.js";import{b as _d,a as Fl,c as $l,d as jy,e as zy,f as bt,g as nr,p as Mx,h as li,s as Vd,i as Zc,j as ch,k as rh,l as oh,m as wy,n as Sy,o as _y,q as Cy,r as Cd,t as Ey}from"./vendor-utils-DDLDHF-R.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const m of u)if(m.type==="childList")for(const h of m.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function r(u){const m={};return u.integrity&&(m.integrity=u.integrity),u.referrerPolicy&&(m.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?m.credentials="include":u.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(u){if(u.ep)return;u.ep=!0;const m=r(u);fetch(u.href,m)}})();var Ed={exports:{}},Il={},Td={exports:{}},kd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh;function Ty(){return dh||(dh=1,(function(c){function d(y,H){var ne=y.length;y.push(H);e:for(;0<ne;){var se=ne-1>>>1,pe=y[se];if(0<u(pe,H))y[se]=H,y[ne]=pe,ne=se;else break e}}function r(y){return y.length===0?null:y[0]}function o(y){if(y.length===0)return null;var H=y[0],ne=y.pop();if(ne!==H){y[0]=ne;e:for(var se=0,pe=y.length,qe=pe>>>1;se<qe;){var Ne=2*(se+1)-1,X=y[Ne],ue=Ne+1,we=y[ue];if(0>u(X,ne))ue<pe&&0>u(we,X)?(y[se]=we,y[ue]=ne,se=ue):(y[se]=X,y[Ne]=ne,se=Ne);else if(ue<pe&&0>u(we,ne))y[se]=we,y[ue]=ne,se=ue;else break e}}return H}function u(y,H){var ne=y.sortIndex-H.sortIndex;return ne!==0?ne:y.id-H.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;c.unstable_now=function(){return m.now()}}else{var h=Date,b=h.now();c.unstable_now=function(){return h.now()-b}}var p=[],g=[],v=1,N=null,w=3,E=!1,_=!1,M=!1,T=!1,R=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,q=typeof setImmediate<"u"?setImmediate:null;function F(y){for(var H=r(g);H!==null;){if(H.callback===null)o(g);else if(H.startTime<=y)o(g),H.sortIndex=H.expirationTime,d(p,H);else break;H=r(g)}}function le(y){if(M=!1,F(y),!_)if(r(p)!==null)_=!0,Y||(Y=!0,ie());else{var H=r(g);H!==null&&de(le,H.startTime-y)}}var Y=!1,I=-1,D=5,K=-1;function Q(){return T?!0:!(c.unstable_now()-K<D)}function P(){if(T=!1,Y){var y=c.unstable_now();K=y;var H=!0;try{e:{_=!1,M&&(M=!1,L(I),I=-1),E=!0;var ne=w;try{t:{for(F(y),N=r(p);N!==null&&!(N.expirationTime>y&&Q());){var se=N.callback;if(typeof se=="function"){N.callback=null,w=N.priorityLevel;var pe=se(N.expirationTime<=y);if(y=c.unstable_now(),typeof pe=="function"){N.callback=pe,F(y),H=!0;break t}N===r(p)&&o(p),F(y)}else o(p);N=r(p)}if(N!==null)H=!0;else{var qe=r(g);qe!==null&&de(le,qe.startTime-y),H=!1}}break e}finally{N=null,w=ne,E=!1}H=void 0}}finally{H?ie():Y=!1}}}var ie;if(typeof q=="function")ie=function(){q(P)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ae=$.port2;$.port1.onmessage=P,ie=function(){ae.postMessage(null)}}else ie=function(){R(P,0)};function de(y,H){I=R(function(){y(c.unstable_now())},H)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(y){y.callback=null},c.unstable_forceFrameRate=function(y){0>y||125<y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<y?Math.floor(1e3/y):5},c.unstable_getCurrentPriorityLevel=function(){return w},c.unstable_next=function(y){switch(w){case 1:case 2:case 3:var H=3;break;default:H=w}var ne=w;w=H;try{return y()}finally{w=ne}},c.unstable_requestPaint=function(){T=!0},c.unstable_runWithPriority=function(y,H){switch(y){case 1:case 2:case 3:case 4:case 5:break;default:y=3}var ne=w;w=y;try{return H()}finally{w=ne}},c.unstable_scheduleCallback=function(y,H,ne){var se=c.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?se+ne:se):ne=se,y){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ne+pe,y={id:v++,callback:H,priorityLevel:y,startTime:ne,expirationTime:pe,sortIndex:-1},ne>se?(y.sortIndex=ne,d(g,y),r(p)===null&&y===r(g)&&(M?(L(I),I=-1):M=!0,de(le,ne-se))):(y.sortIndex=pe,d(p,y),_||E||(_=!0,Y||(Y=!0,ie()))),y},c.unstable_shouldYield=Q,c.unstable_wrapCallback=function(y){var H=w;return function(){var ne=w;w=H;try{return y.apply(this,arguments)}finally{w=ne}}}})(kd)),kd}var uh;function ky(){return uh||(uh=1,Td.exports=Ty()),Td.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fh;function Ay(){if(fh)return Il;fh=1;var c=ky(),d=oy(),r=dy();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(m(e)!==e)throw Error(o(188))}function g(e){var t=e.alternate;if(!t){if(t=m(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,s=t;;){var l=a.return;if(l===null)break;var i=l.alternate;if(i===null){if(s=l.return,s!==null){a=s;continue}break}if(l.child===i.child){for(i=l.child;i;){if(i===a)return p(l),e;if(i===s)return p(l),t;i=i.sibling}throw Error(o(188))}if(a.return!==s.return)a=l,s=i;else{for(var f=!1,x=l.child;x;){if(x===a){f=!0,a=l,s=i;break}if(x===s){f=!0,s=l,a=i;break}x=x.sibling}if(!f){for(x=i.child;x;){if(x===a){f=!0,a=i,s=l;break}if(x===s){f=!0,s=i,a=l;break}x=x.sibling}if(!f)throw Error(o(189))}}if(a.alternate!==s)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var N=Object.assign,w=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),q=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var $=Symbol.for("react.client.reference");function ae(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===$?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case R:return"Profiler";case T:return"StrictMode";case le:return"Suspense";case Y:return"SuspenseList";case K:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case q:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case F:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return t=e.displayName||null,t!==null?t:ae(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return ae(e(t))}catch{}}return null}var de=Array.isArray,y=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne={pending:!1,data:null,method:null,action:null},se=[],pe=-1;function qe(e){return{current:e}}function Ne(e){0>pe||(e.current=se[pe],se[pe]=null,pe--)}function X(e,t){pe++,se[pe]=e.current,e.current=t}var ue=qe(null),we=qe(null),W=qe(null),ye=qe(null);function $e(e,t){switch(X(W,t),X(we,e),X(ue,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?S0(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=S0(t),e=_0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Ne(ue),X(ue,e)}function Rt(){Ne(ue),Ne(we),Ne(W)}function It(e){e.memoizedState!==null&&X(ye,e);var t=ue.current,a=_0(t,e.type);t!==a&&(X(we,e),X(ue,a))}function Aa(e){we.current===e&&(Ne(ue),Ne(we)),ye.current===e&&(Ne(ye),Xl._currentValue=ne)}var os,Mn;function Da(e){if(os===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);os=t&&t[1]||"",Mn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+os+e+Mn}var an=!1;function nl(e,t){if(!e||an)return"";an=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(B){var O=B}Reflect.construct(e,[],J)}else{try{J.call()}catch(B){O=B}e.call(J.prototype)}}else{try{throw Error()}catch(B){O=B}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(B){if(B&&O&&typeof B.stack=="string")return[B.stack,O.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=s.DetermineComponentFrameRoot(),f=i[0],x=i[1];if(f&&x){var z=f.split(`
`),A=x.split(`
`);for(l=s=0;s<z.length&&!z[s].includes("DetermineComponentFrameRoot");)s++;for(;l<A.length&&!A[l].includes("DetermineComponentFrameRoot");)l++;if(s===z.length||l===A.length)for(s=z.length-1,l=A.length-1;1<=s&&0<=l&&z[s]!==A[l];)l--;for(;1<=s&&0<=l;s--,l--)if(z[s]!==A[l]){if(s!==1||l!==1)do if(s--,l--,0>l||z[s]!==A[l]){var V=`
`+z[s].replace(" at new "," at ");return e.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",e.displayName)),V}while(1<=s&&0<=l);break}}}finally{an=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Da(a):""}function mi(e,t){switch(e.tag){case 26:case 27:case 5:return Da(e.type);case 16:return Da("Lazy");case 13:return e.child!==t&&t!==null?Da("Suspense Fallback"):Da("Suspense");case 19:return Da("SuspenseList");case 0:case 15:return nl(e.type,!1);case 11:return nl(e.type.render,!1);case 1:return nl(e.type,!0);case 31:return Da("Activity");default:return""}}function Ra(e){try{var t="",a=null;do t+=mi(e,a),a=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var On=Object.prototype.hasOwnProperty,Un=c.unstable_scheduleCallback,nn=c.unstable_cancelCallback,sl=c.unstable_shouldYield,rr=c.unstable_requestPaint,ft=c.unstable_now,or=c.unstable_getCurrentPriorityLevel,sn=c.unstable_ImmediatePriority,hi=c.unstable_UserBlockingPriority,ds=c.unstable_NormalPriority,dr=c.unstable_LowPriority,xi=c.unstable_IdlePriority,ur=c.log,fr=c.unstable_setDisableYieldValue,Hn=null,ht=null;function ha(e){if(typeof ur=="function"&&fr(e),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(Hn,e)}catch{}}var Et=Math.clz32?Math.clz32:U,gi=Math.log,pi=Math.LN2;function U(e){return e>>>=0,e===0?32:31-(gi(e)/pi|0)|0}var ce=256,Oe=262144,Ue=4194304;function Re(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fe(e,t,a){var s=e.pendingLanes;if(s===0)return 0;var l=0,i=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var x=s&134217727;return x!==0?(s=x&~i,s!==0?l=Re(s):(f&=x,f!==0?l=Re(f):a||(a=x&~e,a!==0&&(l=Re(a))))):(x=s&~i,x!==0?l=Re(x):f!==0?l=Re(f):a||(a=s&~e,a!==0&&(l=Re(a)))),l===0?0:t!==0&&t!==l&&(t&i)===0&&(i=l&-l,a=t&-t,i>=a||i===32&&(a&4194048)!==0)?t:l}function Ce(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Qe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bi(){var e=Ue;return Ue<<=1,(Ue&62914560)===0&&(Ue=4194304),e}function mr(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function ll(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ix(e,t,a,s,l,i){var f=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var x=e.entanglements,z=e.expirationTimes,A=e.hiddenUpdates;for(a=f&~a;0<a;){var V=31-Et(a),J=1<<V;x[V]=0,z[V]=-1;var O=A[V];if(O!==null)for(A[V]=null,V=0;V<O.length;V++){var B=O[V];B!==null&&(B.lane&=-536870913)}a&=~J}s!==0&&iu(e,s,0),i!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=i&~(f&~t))}function iu(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Et(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|a&261930}function cu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-Et(a),l=1<<s;l&t|e[s]&t&&(e[s]|=t),a&=~l}}function ru(e,t){var a=t&-t;return a=(a&42)!==0?1:hr(a),(a&(e.suspendedLanes|t))!==0?0:a}function hr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ou(){var e=H.p;return e!==0?e:(e=window.event,e===void 0?32:F0(e.type))}function du(e,t){var a=H.p;try{return H.p=e,t()}finally{H.p=a}}var ln=Math.random().toString(36).slice(2),vt="__reactFiber$"+ln,Mt="__reactProps$"+ln,us="__reactContainer$"+ln,gr="__reactEvents$"+ln,Wx="__reactListeners$"+ln,Px="__reactHandles$"+ln,uu="__reactResources$"+ln,il="__reactMarker$"+ln;function pr(e){delete e[vt],delete e[Mt],delete e[gr],delete e[Wx],delete e[Px]}function fs(e){var t=e[vt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[us]||a[vt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=R0(e);e!==null;){if(a=e[vt])return a;e=R0(e)}return t}e=a,a=e.parentNode}return null}function ms(e){if(e=e[vt]||e[us]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function cl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function hs(e){var t=e[uu];return t||(t=e[uu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function xt(e){e[il]=!0}var fu=new Set,mu={};function Bn(e,t){xs(e,t),xs(e+"Capture",t)}function xs(e,t){for(mu[e]=t,e=0;e<t.length;e++)fu.add(t[e])}var eg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),hu={},xu={};function tg(e){return On.call(xu,e)?!0:On.call(hu,e)?!1:eg.test(e)?xu[e]=!0:(hu[e]=!0,!1)}function yi(e,t,a){if(tg(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function vi(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Ma(e,t,a,s){if(s===null)e.removeAttribute(a);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+s)}}function Wt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ag(e,t,a){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var l=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(f){a=""+f,i.call(this,f)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function br(e){if(!e._valueTracker){var t=gu(e)?"checked":"value";e._valueTracker=ag(e,t,""+e[t])}}function pu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=gu(e)?e.checked?"true":"false":e.value),e=s,e!==a?(t.setValue(e),!0):!1}function Ni(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ng=/[\n"\\]/g;function Pt(e){return e.replace(ng,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function yr(e,t,a,s,l,i,f,x){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Wt(t)):e.value!==""+Wt(t)&&(e.value=""+Wt(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?vr(e,f,Wt(t)):a!=null?vr(e,f,Wt(a)):s!=null&&e.removeAttribute("value"),l==null&&i!=null&&(e.defaultChecked=!!i),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+Wt(x):e.removeAttribute("name")}function bu(e,t,a,s,l,i,f,x){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||a!=null){if(!(i!=="submit"&&i!=="reset"||t!=null)){br(e);return}a=a!=null?""+Wt(a):"",t=t!=null?""+Wt(t):a,x||t===e.value||(e.value=t),e.defaultValue=t}s=s??l,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=x?e.checked:!!s,e.defaultChecked=!!s,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),br(e)}function vr(e,t,a){t==="number"&&Ni(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function gs(e,t,a,s){if(e=e.options,t){t={};for(var l=0;l<a.length;l++)t["$"+a[l]]=!0;for(a=0;a<e.length;a++)l=t.hasOwnProperty("$"+e[a].value),e[a].selected!==l&&(e[a].selected=l),l&&s&&(e[a].defaultSelected=!0)}else{for(a=""+Wt(a),t=null,l=0;l<e.length;l++){if(e[l].value===a){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function yu(e,t,a){if(t!=null&&(t=""+Wt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Wt(a):""}function vu(e,t,a,s){if(t==null){if(s!=null){if(a!=null)throw Error(o(92));if(de(s)){if(1<s.length)throw Error(o(93));s=s[0]}a=s}a==null&&(a=""),t=a}a=Wt(t),e.defaultValue=a,s=e.textContent,s===a&&s!==""&&s!==null&&(e.value=s),br(e)}function ps(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var sg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nu(e,t,a){var s=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,a):typeof a!="number"||a===0||sg.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function ju(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var s in a)!a.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var l in t)s=t[l],t.hasOwnProperty(l)&&a[l]!==s&&Nu(e,l,s)}else for(var i in t)t.hasOwnProperty(i)&&Nu(e,i,t[i])}function Nr(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ig=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ji(e){return ig.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Oa(){}var jr=null;function zr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bs=null,ys=null;function zu(e){var t=ms(e);if(t&&(e=t.stateNode)){var a=e[Mt]||null;e:switch(e=t.stateNode,t.type){case"input":if(yr(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Pt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var l=s[Mt]||null;if(!l)throw Error(o(90));yr(s,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<a.length;t++)s=a[t],s.form===e.form&&pu(s)}break e;case"textarea":yu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&gs(e,!!a.multiple,t,!1)}}}var wr=!1;function wu(e,t,a){if(wr)return e(t,a);wr=!0;try{var s=e(t);return s}finally{if(wr=!1,(bs!==null||ys!==null)&&(oc(),bs&&(t=bs,e=ys,ys=bs=null,zu(t),e)))for(t=0;t<e.length;t++)zu(e[t])}}function rl(e,t){var a=e.stateNode;if(a===null)return null;var s=a[Mt]||null;if(s===null)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var Ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sr=!1;if(Ua)try{var ol={};Object.defineProperty(ol,"passive",{get:function(){Sr=!0}}),window.addEventListener("test",ol,ol),window.removeEventListener("test",ol,ol)}catch{Sr=!1}var cn=null,_r=null,zi=null;function Su(){if(zi)return zi;var e,t=_r,a=t.length,s,l="value"in cn?cn.value:cn.textContent,i=l.length;for(e=0;e<a&&t[e]===l[e];e++);var f=a-e;for(s=1;s<=f&&t[a-s]===l[i-s];s++);return zi=l.slice(e,1<s?1-s:void 0)}function wi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Si(){return!0}function _u(){return!1}function Ot(e){function t(a,s,l,i,f){this._reactName=a,this._targetInst=l,this.type=s,this.nativeEvent=i,this.target=f,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(a=e[x],this[x]=a?a(i):i[x]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Si:_u,this.isPropagationStopped=_u,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Si)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Si)},persist:function(){},isPersistent:Si}),t}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_i=Ot(Gn),dl=N({},Gn,{view:0,detail:0}),cg=Ot(dl),Cr,Er,ul,Ci=N({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ul&&(ul&&e.type==="mousemove"?(Cr=e.screenX-ul.screenX,Er=e.screenY-ul.screenY):Er=Cr=0,ul=e),Cr)},movementY:function(e){return"movementY"in e?e.movementY:Er}}),Cu=Ot(Ci),rg=N({},Ci,{dataTransfer:0}),og=Ot(rg),dg=N({},dl,{relatedTarget:0}),Tr=Ot(dg),ug=N({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),fg=Ot(ug),mg=N({},Gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hg=Ot(mg),xg=N({},Gn,{data:0}),Eu=Ot(xg),gg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bg[e])?!!t[e]:!1}function kr(){return yg}var vg=N({},dl,{key:function(e){if(e.key){var t=gg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kr,charCode:function(e){return e.type==="keypress"?wi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ng=Ot(vg),jg=N({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tu=Ot(jg),zg=N({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kr}),wg=Ot(zg),Sg=N({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),_g=Ot(Sg),Cg=N({},Ci,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Eg=Ot(Cg),Tg=N({},Gn,{newState:0,oldState:0}),kg=Ot(Tg),Ag=[9,13,27,32],Ar=Ua&&"CompositionEvent"in window,fl=null;Ua&&"documentMode"in document&&(fl=document.documentMode);var Dg=Ua&&"TextEvent"in window&&!fl,ku=Ua&&(!Ar||fl&&8<fl&&11>=fl),Au=" ",Du=!1;function Ru(e,t){switch(e){case"keyup":return Ag.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vs=!1;function Rg(e,t){switch(e){case"compositionend":return Mu(t);case"keypress":return t.which!==32?null:(Du=!0,Au);case"textInput":return e=t.data,e===Au&&Du?null:e;default:return null}}function Mg(e,t){if(vs)return e==="compositionend"||!Ar&&Ru(e,t)?(e=Su(),zi=_r=cn=null,vs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ku&&t.locale!=="ko"?null:t.data;default:return null}}var Og={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ou(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Og[e.type]:t==="textarea"}function Uu(e,t,a,s){bs?ys?ys.push(s):ys=[s]:bs=s,t=gc(t,"onChange"),0<t.length&&(a=new _i("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var ml=null,hl=null;function Ug(e){y0(e,0)}function Ei(e){var t=cl(e);if(pu(t))return e}function Hu(e,t){if(e==="change")return t}var Bu=!1;if(Ua){var Dr;if(Ua){var Rr="oninput"in document;if(!Rr){var Gu=document.createElement("div");Gu.setAttribute("oninput","return;"),Rr=typeof Gu.oninput=="function"}Dr=Rr}else Dr=!1;Bu=Dr&&(!document.documentMode||9<document.documentMode)}function Lu(){ml&&(ml.detachEvent("onpropertychange",qu),hl=ml=null)}function qu(e){if(e.propertyName==="value"&&Ei(hl)){var t=[];Uu(t,hl,e,zr(e)),wu(Ug,t)}}function Hg(e,t,a){e==="focusin"?(Lu(),ml=t,hl=a,ml.attachEvent("onpropertychange",qu)):e==="focusout"&&Lu()}function Bg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ei(hl)}function Gg(e,t){if(e==="click")return Ei(t)}function Lg(e,t){if(e==="input"||e==="change")return Ei(t)}function qg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qt=typeof Object.is=="function"?Object.is:qg;function xl(e,t){if(qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var l=a[s];if(!On.call(t,l)||!qt(e[l],t[l]))return!1}return!0}function Yu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vu(e,t){var a=Yu(e);e=0;for(var s;a;){if(a.nodeType===3){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Yu(a)}}function Ku(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ku(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ni(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=Ni(e.document)}return t}function Mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Yg=Ua&&"documentMode"in document&&11>=document.documentMode,Ns=null,Or=null,gl=null,Ur=!1;function Qu(e,t,a){var s=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ur||Ns==null||Ns!==Ni(s)||(s=Ns,"selectionStart"in s&&Mr(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),gl&&xl(gl,s)||(gl=s,s=gc(Or,"onSelect"),0<s.length&&(t=new _i("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=Ns)))}function Ln(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var js={animationend:Ln("Animation","AnimationEnd"),animationiteration:Ln("Animation","AnimationIteration"),animationstart:Ln("Animation","AnimationStart"),transitionrun:Ln("Transition","TransitionRun"),transitionstart:Ln("Transition","TransitionStart"),transitioncancel:Ln("Transition","TransitionCancel"),transitionend:Ln("Transition","TransitionEnd")},Hr={},Zu={};Ua&&(Zu=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function qn(e){if(Hr[e])return Hr[e];if(!js[e])return e;var t=js[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Zu)return Hr[e]=t[a];return e}var Ju=qn("animationend"),Fu=qn("animationiteration"),$u=qn("animationstart"),Vg=qn("transitionrun"),Kg=qn("transitionstart"),Xg=qn("transitioncancel"),Iu=qn("transitionend"),Wu=new Map,Br="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Br.push("scrollEnd");function xa(e,t){Wu.set(e,t),Bn(t,[e])}var Ti=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ea=[],zs=0,Gr=0;function ki(){for(var e=zs,t=Gr=zs=0;t<e;){var a=ea[t];ea[t++]=null;var s=ea[t];ea[t++]=null;var l=ea[t];ea[t++]=null;var i=ea[t];if(ea[t++]=null,s!==null&&l!==null){var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}i!==0&&Pu(a,l,i)}}function Ai(e,t,a,s){ea[zs++]=e,ea[zs++]=t,ea[zs++]=a,ea[zs++]=s,Gr|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Lr(e,t,a,s){return Ai(e,t,a,s),Di(e)}function Yn(e,t){return Ai(e,null,null,t),Di(e)}function Pu(e,t,a){e.lanes|=a;var s=e.alternate;s!==null&&(s.lanes|=a);for(var l=!1,i=e.return;i!==null;)i.childLanes|=a,s=i.alternate,s!==null&&(s.childLanes|=a),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(l=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,l&&t!==null&&(l=31-Et(a),e=i.hiddenUpdates,s=e[l],s===null?e[l]=[t]:s.push(t),t.lane=a|536870912),i):null}function Di(e){if(50<Bl)throw Bl=0,$o=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ws={};function Qg(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(e,t,a,s){return new Qg(e,t,a,s)}function qr(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ha(e,t){var a=e.alternate;return a===null?(a=Yt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ef(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ri(e,t,a,s,l,i){var f=0;if(s=e,typeof e=="function")qr(e)&&(f=1);else if(typeof e=="string")f=Ip(e,a,ue.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case K:return e=Yt(31,a,t,l),e.elementType=K,e.lanes=i,e;case M:return Vn(a.children,l,i,t);case T:f=8,l|=24;break;case R:return e=Yt(12,a,t,l|2),e.elementType=R,e.lanes=i,e;case le:return e=Yt(13,a,t,l),e.elementType=le,e.lanes=i,e;case Y:return e=Yt(19,a,t,l),e.elementType=Y,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case q:f=10;break e;case L:f=9;break e;case F:f=11;break e;case I:f=14;break e;case D:f=16,s=null;break e}f=29,a=Error(o(130,e===null?"null":typeof e,"")),s=null}return t=Yt(f,a,t,l),t.elementType=e,t.type=s,t.lanes=i,t}function Vn(e,t,a,s){return e=Yt(7,e,s,t),e.lanes=a,e}function Yr(e,t,a){return e=Yt(6,e,null,t),e.lanes=a,e}function tf(e){var t=Yt(18,null,null,0);return t.stateNode=e,t}function Vr(e,t,a){return t=Yt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var af=new WeakMap;function ta(e,t){if(typeof e=="object"&&e!==null){var a=af.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Ra(t)},af.set(e,t),t)}return{value:e,source:t,stack:Ra(t)}}var Ss=[],_s=0,Mi=null,pl=0,aa=[],na=0,rn=null,ja=1,za="";function Ba(e,t){Ss[_s++]=pl,Ss[_s++]=Mi,Mi=e,pl=t}function nf(e,t,a){aa[na++]=ja,aa[na++]=za,aa[na++]=rn,rn=e;var s=ja;e=za;var l=32-Et(s)-1;s&=~(1<<l),a+=1;var i=32-Et(t)+l;if(30<i){var f=l-l%5;i=(s&(1<<f)-1).toString(32),s>>=f,l-=f,ja=1<<32-Et(t)+l|a<<l|s,za=i+e}else ja=1<<i|a<<l|s,za=e}function Kr(e){e.return!==null&&(Ba(e,1),nf(e,1,0))}function Xr(e){for(;e===Mi;)Mi=Ss[--_s],Ss[_s]=null,pl=Ss[--_s],Ss[_s]=null;for(;e===rn;)rn=aa[--na],aa[na]=null,za=aa[--na],aa[na]=null,ja=aa[--na],aa[na]=null}function sf(e,t){aa[na++]=ja,aa[na++]=za,aa[na++]=rn,ja=t.id,za=t.overflow,rn=e}var Nt=null,Ie=null,Ee=!1,on=null,sa=!1,Qr=Error(o(519));function dn(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw bl(ta(t,e)),Qr}function lf(e){var t=e.stateNode,a=e.type,s=e.memoizedProps;switch(t[vt]=e,t[Mt]=s,a){case"dialog":ze("cancel",t),ze("close",t);break;case"iframe":case"object":case"embed":ze("load",t);break;case"video":case"audio":for(a=0;a<Ll.length;a++)ze(Ll[a],t);break;case"source":ze("error",t);break;case"img":case"image":case"link":ze("error",t),ze("load",t);break;case"details":ze("toggle",t);break;case"input":ze("invalid",t),bu(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":ze("invalid",t);break;case"textarea":ze("invalid",t),vu(t,s.value,s.defaultValue,s.children)}a=s.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||s.suppressHydrationWarning===!0||z0(t.textContent,a)?(s.popover!=null&&(ze("beforetoggle",t),ze("toggle",t)),s.onScroll!=null&&ze("scroll",t),s.onScrollEnd!=null&&ze("scrollend",t),s.onClick!=null&&(t.onclick=Oa),t=!0):t=!1,t||dn(e,!0)}function cf(e){for(Nt=e.return;Nt;)switch(Nt.tag){case 5:case 31:case 13:sa=!1;return;case 27:case 3:sa=!0;return;default:Nt=Nt.return}}function Cs(e){if(e!==Nt)return!1;if(!Ee)return cf(e),Ee=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||ud(e.type,e.memoizedProps)),a=!a),a&&Ie&&dn(e),cf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ie=D0(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Ie=D0(e)}else t===27?(t=Ie,wn(e.type)?(e=gd,gd=null,Ie=e):Ie=t):Ie=Nt?ia(e.stateNode.nextSibling):null;return!0}function Kn(){Ie=Nt=null,Ee=!1}function Zr(){var e=on;return e!==null&&(Gt===null?Gt=e:Gt.push.apply(Gt,e),on=null),e}function bl(e){on===null?on=[e]:on.push(e)}var Jr=qe(null),Xn=null,Ga=null;function un(e,t,a){X(Jr,t._currentValue),t._currentValue=a}function La(e){e._currentValue=Jr.current,Ne(Jr)}function Fr(e,t,a){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function $r(e,t,a,s){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var i=l.dependencies;if(i!==null){var f=l.child;i=i.firstContext;e:for(;i!==null;){var x=i;i=l;for(var z=0;z<t.length;z++)if(x.context===t[z]){i.lanes|=a,x=i.alternate,x!==null&&(x.lanes|=a),Fr(i.return,a,e),s||(f=null);break e}i=x.next}}else if(l.tag===18){if(f=l.return,f===null)throw Error(o(341));f.lanes|=a,i=f.alternate,i!==null&&(i.lanes|=a),Fr(f,a,e),f=null}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===e){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}}function Es(e,t,a,s){e=null;for(var l=t,i=!1;l!==null;){if(!i){if((l.flags&524288)!==0)i=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var f=l.alternate;if(f===null)throw Error(o(387));if(f=f.memoizedProps,f!==null){var x=l.type;qt(l.pendingProps.value,f.value)||(e!==null?e.push(x):e=[x])}}else if(l===ye.current){if(f=l.alternate,f===null)throw Error(o(387));f.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(Xl):e=[Xl])}l=l.return}e!==null&&$r(t,e,a,s),t.flags|=262144}function Oi(e){for(e=e.firstContext;e!==null;){if(!qt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qn(e){Xn=e,Ga=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function jt(e){return rf(Xn,e)}function Ui(e,t){return Xn===null&&Qn(e),rf(e,t)}function rf(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},Ga===null){if(e===null)throw Error(o(308));Ga=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ga=Ga.next=t;return a}var Zg=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Jg=c.unstable_scheduleCallback,Fg=c.unstable_NormalPriority,it={$$typeof:q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ir(){return{controller:new Zg,data:new Map,refCount:0}}function yl(e){e.refCount--,e.refCount===0&&Jg(Fg,function(){e.controller.abort()})}var vl=null,Wr=0,Ts=0,ks=null;function $g(e,t){if(vl===null){var a=vl=[];Wr=0,Ts=ad(),ks={status:"pending",value:void 0,then:function(s){a.push(s)}}}return Wr++,t.then(of,of),t}function of(){if(--Wr===0&&vl!==null){ks!==null&&(ks.status="fulfilled");var e=vl;vl=null,Ts=0,ks=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Ig(e,t){var a=[],s={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var l=0;l<a.length;l++)(0,a[l])(t)},function(l){for(s.status="rejected",s.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),s}var df=y.S;y.S=function(e,t){Zm=ft(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&$g(e,t),df!==null&&df(e,t)};var Zn=qe(null);function Pr(){var e=Zn.current;return e!==null?e:Ze.pooledCache}function Hi(e,t){t===null?X(Zn,Zn.current):X(Zn,t.pool)}function uf(){var e=Pr();return e===null?null:{parent:it._currentValue,pool:e}}var As=Error(o(460)),eo=Error(o(474)),Bi=Error(o(542)),Gi={then:function(){}};function ff(e){return e=e.status,e==="fulfilled"||e==="rejected"}function mf(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Oa,Oa),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,xf(e),e;default:if(typeof t.status=="string")t.then(Oa,Oa);else{if(e=Ze,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=s}},function(s){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,xf(e),e}throw Fn=t,As}}function Jn(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Fn=a,As):a}}var Fn=null;function hf(){if(Fn===null)throw Error(o(459));var e=Fn;return Fn=null,e}function xf(e){if(e===As||e===Bi)throw Error(o(483))}var Ds=null,Nl=0;function Li(e){var t=Nl;return Nl+=1,Ds===null&&(Ds=[]),mf(Ds,e,t)}function jl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function qi(e,t){throw t.$$typeof===w?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function gf(e){function t(C,S){if(e){var k=C.deletions;k===null?(C.deletions=[S],C.flags|=16):k.push(S)}}function a(C,S){if(!e)return null;for(;S!==null;)t(C,S),S=S.sibling;return null}function s(C){for(var S=new Map;C!==null;)C.key!==null?S.set(C.key,C):S.set(C.index,C),C=C.sibling;return S}function l(C,S){return C=Ha(C,S),C.index=0,C.sibling=null,C}function i(C,S,k){return C.index=k,e?(k=C.alternate,k!==null?(k=k.index,k<S?(C.flags|=67108866,S):k):(C.flags|=67108866,S)):(C.flags|=1048576,S)}function f(C){return e&&C.alternate===null&&(C.flags|=67108866),C}function x(C,S,k,Z){return S===null||S.tag!==6?(S=Yr(k,C.mode,Z),S.return=C,S):(S=l(S,k),S.return=C,S)}function z(C,S,k,Z){var xe=k.type;return xe===M?V(C,S,k.props.children,Z,k.key):S!==null&&(S.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===D&&Jn(xe)===S.type)?(S=l(S,k.props),jl(S,k),S.return=C,S):(S=Ri(k.type,k.key,k.props,null,C.mode,Z),jl(S,k),S.return=C,S)}function A(C,S,k,Z){return S===null||S.tag!==4||S.stateNode.containerInfo!==k.containerInfo||S.stateNode.implementation!==k.implementation?(S=Vr(k,C.mode,Z),S.return=C,S):(S=l(S,k.children||[]),S.return=C,S)}function V(C,S,k,Z,xe){return S===null||S.tag!==7?(S=Vn(k,C.mode,Z,xe),S.return=C,S):(S=l(S,k),S.return=C,S)}function J(C,S,k){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return S=Yr(""+S,C.mode,k),S.return=C,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case E:return k=Ri(S.type,S.key,S.props,null,C.mode,k),jl(k,S),k.return=C,k;case _:return S=Vr(S,C.mode,k),S.return=C,S;case D:return S=Jn(S),J(C,S,k)}if(de(S)||ie(S))return S=Vn(S,C.mode,k,null),S.return=C,S;if(typeof S.then=="function")return J(C,Li(S),k);if(S.$$typeof===q)return J(C,Ui(C,S),k);qi(C,S)}return null}function O(C,S,k,Z){var xe=S!==null?S.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return xe!==null?null:x(C,S,""+k,Z);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case E:return k.key===xe?z(C,S,k,Z):null;case _:return k.key===xe?A(C,S,k,Z):null;case D:return k=Jn(k),O(C,S,k,Z)}if(de(k)||ie(k))return xe!==null?null:V(C,S,k,Z,null);if(typeof k.then=="function")return O(C,S,Li(k),Z);if(k.$$typeof===q)return O(C,S,Ui(C,k),Z);qi(C,k)}return null}function B(C,S,k,Z,xe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return C=C.get(k)||null,x(S,C,""+Z,xe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case E:return C=C.get(Z.key===null?k:Z.key)||null,z(S,C,Z,xe);case _:return C=C.get(Z.key===null?k:Z.key)||null,A(S,C,Z,xe);case D:return Z=Jn(Z),B(C,S,k,Z,xe)}if(de(Z)||ie(Z))return C=C.get(k)||null,V(S,C,Z,xe,null);if(typeof Z.then=="function")return B(C,S,k,Li(Z),xe);if(Z.$$typeof===q)return B(C,S,k,Ui(S,Z),xe);qi(S,Z)}return null}function oe(C,S,k,Z){for(var xe=null,ke=null,fe=S,ve=S=0,_e=null;fe!==null&&ve<k.length;ve++){fe.index>ve?(_e=fe,fe=null):_e=fe.sibling;var Ae=O(C,fe,k[ve],Z);if(Ae===null){fe===null&&(fe=_e);break}e&&fe&&Ae.alternate===null&&t(C,fe),S=i(Ae,S,ve),ke===null?xe=Ae:ke.sibling=Ae,ke=Ae,fe=_e}if(ve===k.length)return a(C,fe),Ee&&Ba(C,ve),xe;if(fe===null){for(;ve<k.length;ve++)fe=J(C,k[ve],Z),fe!==null&&(S=i(fe,S,ve),ke===null?xe=fe:ke.sibling=fe,ke=fe);return Ee&&Ba(C,ve),xe}for(fe=s(fe);ve<k.length;ve++)_e=B(fe,C,ve,k[ve],Z),_e!==null&&(e&&_e.alternate!==null&&fe.delete(_e.key===null?ve:_e.key),S=i(_e,S,ve),ke===null?xe=_e:ke.sibling=_e,ke=_e);return e&&fe.forEach(function(Tn){return t(C,Tn)}),Ee&&Ba(C,ve),xe}function ge(C,S,k,Z){if(k==null)throw Error(o(151));for(var xe=null,ke=null,fe=S,ve=S=0,_e=null,Ae=k.next();fe!==null&&!Ae.done;ve++,Ae=k.next()){fe.index>ve?(_e=fe,fe=null):_e=fe.sibling;var Tn=O(C,fe,Ae.value,Z);if(Tn===null){fe===null&&(fe=_e);break}e&&fe&&Tn.alternate===null&&t(C,fe),S=i(Tn,S,ve),ke===null?xe=Tn:ke.sibling=Tn,ke=Tn,fe=_e}if(Ae.done)return a(C,fe),Ee&&Ba(C,ve),xe;if(fe===null){for(;!Ae.done;ve++,Ae=k.next())Ae=J(C,Ae.value,Z),Ae!==null&&(S=i(Ae,S,ve),ke===null?xe=Ae:ke.sibling=Ae,ke=Ae);return Ee&&Ba(C,ve),xe}for(fe=s(fe);!Ae.done;ve++,Ae=k.next())Ae=B(fe,C,ve,Ae.value,Z),Ae!==null&&(e&&Ae.alternate!==null&&fe.delete(Ae.key===null?ve:Ae.key),S=i(Ae,S,ve),ke===null?xe=Ae:ke.sibling=Ae,ke=Ae);return e&&fe.forEach(function(rb){return t(C,rb)}),Ee&&Ba(C,ve),xe}function Ke(C,S,k,Z){if(typeof k=="object"&&k!==null&&k.type===M&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case E:e:{for(var xe=k.key;S!==null;){if(S.key===xe){if(xe=k.type,xe===M){if(S.tag===7){a(C,S.sibling),Z=l(S,k.props.children),Z.return=C,C=Z;break e}}else if(S.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===D&&Jn(xe)===S.type){a(C,S.sibling),Z=l(S,k.props),jl(Z,k),Z.return=C,C=Z;break e}a(C,S);break}else t(C,S);S=S.sibling}k.type===M?(Z=Vn(k.props.children,C.mode,Z,k.key),Z.return=C,C=Z):(Z=Ri(k.type,k.key,k.props,null,C.mode,Z),jl(Z,k),Z.return=C,C=Z)}return f(C);case _:e:{for(xe=k.key;S!==null;){if(S.key===xe)if(S.tag===4&&S.stateNode.containerInfo===k.containerInfo&&S.stateNode.implementation===k.implementation){a(C,S.sibling),Z=l(S,k.children||[]),Z.return=C,C=Z;break e}else{a(C,S);break}else t(C,S);S=S.sibling}Z=Vr(k,C.mode,Z),Z.return=C,C=Z}return f(C);case D:return k=Jn(k),Ke(C,S,k,Z)}if(de(k))return oe(C,S,k,Z);if(ie(k)){if(xe=ie(k),typeof xe!="function")throw Error(o(150));return k=xe.call(k),ge(C,S,k,Z)}if(typeof k.then=="function")return Ke(C,S,Li(k),Z);if(k.$$typeof===q)return Ke(C,S,Ui(C,k),Z);qi(C,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,S!==null&&S.tag===6?(a(C,S.sibling),Z=l(S,k),Z.return=C,C=Z):(a(C,S),Z=Yr(k,C.mode,Z),Z.return=C,C=Z),f(C)):a(C,S)}return function(C,S,k,Z){try{Nl=0;var xe=Ke(C,S,k,Z);return Ds=null,xe}catch(fe){if(fe===As||fe===Bi)throw fe;var ke=Yt(29,fe,null,C.mode);return ke.lanes=Z,ke.return=C,ke}finally{}}}var $n=gf(!0),pf=gf(!1),fn=!1;function to(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function mn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function hn(e,t,a){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Me&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,t=Di(e),Pu(e,null,a),t}return Ai(e,s,t,a),Di(e)}function zl(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,cu(e,a)}}function no(e,t){var a=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,a===s)){var l=null,i=null;if(a=a.firstBaseUpdate,a!==null){do{var f={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};i===null?l=i=f:i=i.next=f,a=a.next}while(a!==null);i===null?l=i=t:i=i.next=t}else l=i=t;a={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:i,shared:s.shared,callbacks:s.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var so=!1;function wl(){if(so){var e=ks;if(e!==null)throw e}}function Sl(e,t,a,s){so=!1;var l=e.updateQueue;fn=!1;var i=l.firstBaseUpdate,f=l.lastBaseUpdate,x=l.shared.pending;if(x!==null){l.shared.pending=null;var z=x,A=z.next;z.next=null,f===null?i=A:f.next=A,f=z;var V=e.alternate;V!==null&&(V=V.updateQueue,x=V.lastBaseUpdate,x!==f&&(x===null?V.firstBaseUpdate=A:x.next=A,V.lastBaseUpdate=z))}if(i!==null){var J=l.baseState;f=0,V=A=z=null,x=i;do{var O=x.lane&-536870913,B=O!==x.lane;if(B?(Se&O)===O:(s&O)===O){O!==0&&O===Ts&&(so=!0),V!==null&&(V=V.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var oe=e,ge=x;O=t;var Ke=a;switch(ge.tag){case 1:if(oe=ge.payload,typeof oe=="function"){J=oe.call(Ke,J,O);break e}J=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=ge.payload,O=typeof oe=="function"?oe.call(Ke,J,O):oe,O==null)break e;J=N({},J,O);break e;case 2:fn=!0}}O=x.callback,O!==null&&(e.flags|=64,B&&(e.flags|=8192),B=l.callbacks,B===null?l.callbacks=[O]:B.push(O))}else B={lane:O,tag:x.tag,payload:x.payload,callback:x.callback,next:null},V===null?(A=V=B,z=J):V=V.next=B,f|=O;if(x=x.next,x===null){if(x=l.shared.pending,x===null)break;B=x,x=B.next,B.next=null,l.lastBaseUpdate=B,l.shared.pending=null}}while(!0);V===null&&(z=J),l.baseState=z,l.firstBaseUpdate=A,l.lastBaseUpdate=V,i===null&&(l.shared.lanes=0),yn|=f,e.lanes=f,e.memoizedState=J}}function bf(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function yf(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)bf(a[e],t)}var Rs=qe(null),Yi=qe(0);function vf(e,t){e=Fa,X(Yi,e),X(Rs,t),Fa=e|t.baseLanes}function lo(){X(Yi,Fa),X(Rs,Rs.current)}function io(){Fa=Yi.current,Ne(Rs),Ne(Yi)}var Vt=qe(null),la=null;function xn(e){var t=e.alternate;X(nt,nt.current&1),X(Vt,e),la===null&&(t===null||Rs.current!==null||t.memoizedState!==null)&&(la=e)}function co(e){X(nt,nt.current),X(Vt,e),la===null&&(la=e)}function Nf(e){e.tag===22?(X(nt,nt.current),X(Vt,e),la===null&&(la=e)):gn()}function gn(){X(nt,nt.current),X(Vt,Vt.current)}function Kt(e){Ne(Vt),la===e&&(la=null),Ne(nt)}var nt=qe(0);function Vi(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||hd(a)||xd(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qa=0,be=null,Ye=null,ct=null,Ki=!1,Ms=!1,In=!1,Xi=0,_l=0,Os=null,Wg=0;function et(){throw Error(o(321))}function ro(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!qt(e[a],t[a]))return!1;return!0}function oo(e,t,a,s,l,i){return qa=i,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,y.H=e===null||e.memoizedState===null?sm:So,In=!1,i=a(s,l),In=!1,Ms&&(i=zf(t,a,s,l)),jf(e),i}function jf(e){y.H=Tl;var t=Ye!==null&&Ye.next!==null;if(qa=0,ct=Ye=be=null,Ki=!1,_l=0,Os=null,t)throw Error(o(300));e===null||rt||(e=e.dependencies,e!==null&&Oi(e)&&(rt=!0))}function zf(e,t,a,s){be=e;var l=0;do{if(Ms&&(Os=null),_l=0,Ms=!1,25<=l)throw Error(o(301));if(l+=1,ct=Ye=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}y.H=lm,i=t(a,s)}while(Ms);return i}function Pg(){var e=y.H,t=e.useState()[0];return t=typeof t.then=="function"?Cl(t):t,e=e.useState()[0],(Ye!==null?Ye.memoizedState:null)!==e&&(be.flags|=1024),t}function uo(){var e=Xi!==0;return Xi=0,e}function fo(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function mo(e){if(Ki){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Ki=!1}qa=0,ct=Ye=be=null,Ms=!1,_l=Xi=0,Os=null}function At(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?be.memoizedState=ct=e:ct=ct.next=e,ct}function st(){if(Ye===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=ct===null?be.memoizedState:ct.next;if(t!==null)ct=t,Ye=e;else{if(e===null)throw be.alternate===null?Error(o(467)):Error(o(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},ct===null?be.memoizedState=ct=e:ct=ct.next=e}return ct}function Qi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cl(e){var t=_l;return _l+=1,Os===null&&(Os=[]),e=mf(Os,e,t),t=be,(ct===null?t.memoizedState:ct.next)===null&&(t=t.alternate,y.H=t===null||t.memoizedState===null?sm:So),e}function Zi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Cl(e);if(e.$$typeof===q)return jt(e)}throw Error(o(438,String(e)))}function ho(e){var t=null,a=be.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var s=be.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Qi(),be.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),s=0;s<e;s++)a[s]=Q;return t.index++,a}function Ya(e,t){return typeof t=="function"?t(e):t}function Ji(e){var t=st();return xo(t,Ye,e)}function xo(e,t,a){var s=e.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=a;var l=e.baseQueue,i=s.pending;if(i!==null){if(l!==null){var f=l.next;l.next=i.next,i.next=f}t.baseQueue=l=i,s.pending=null}if(i=e.baseState,l===null)e.memoizedState=i;else{t=l.next;var x=f=null,z=null,A=t,V=!1;do{var J=A.lane&-536870913;if(J!==A.lane?(Se&J)===J:(qa&J)===J){var O=A.revertLane;if(O===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),J===Ts&&(V=!0);else if((qa&O)===O){A=A.next,O===Ts&&(V=!0);continue}else J={lane:0,revertLane:A.revertLane,gesture:null,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null},z===null?(x=z=J,f=i):z=z.next=J,be.lanes|=O,yn|=O;J=A.action,In&&a(i,J),i=A.hasEagerState?A.eagerState:a(i,J)}else O={lane:J,revertLane:A.revertLane,gesture:A.gesture,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null},z===null?(x=z=O,f=i):z=z.next=O,be.lanes|=J,yn|=J;A=A.next}while(A!==null&&A!==t);if(z===null?f=i:z.next=x,!qt(i,e.memoizedState)&&(rt=!0,V&&(a=ks,a!==null)))throw a;e.memoizedState=i,e.baseState=f,e.baseQueue=z,s.lastRenderedState=i}return l===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function go(e){var t=st(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var s=a.dispatch,l=a.pending,i=t.memoizedState;if(l!==null){a.pending=null;var f=l=l.next;do i=e(i,f.action),f=f.next;while(f!==l);qt(i,t.memoizedState)||(rt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),a.lastRenderedState=i}return[i,s]}function wf(e,t,a){var s=be,l=st(),i=Ee;if(i){if(a===void 0)throw Error(o(407));a=a()}else a=t();var f=!qt((Ye||l).memoizedState,a);if(f&&(l.memoizedState=a,rt=!0),l=l.queue,yo(Cf.bind(null,s,l,e),[e]),l.getSnapshot!==t||f||ct!==null&&ct.memoizedState.tag&1){if(s.flags|=2048,Us(9,{destroy:void 0},_f.bind(null,s,l,a,t),null),Ze===null)throw Error(o(349));i||(qa&127)!==0||Sf(s,t,a)}return a}function Sf(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=be.updateQueue,t===null?(t=Qi(),be.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function _f(e,t,a,s){t.value=a,t.getSnapshot=s,Ef(t)&&Tf(e)}function Cf(e,t,a){return a(function(){Ef(t)&&Tf(e)})}function Ef(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!qt(e,a)}catch{return!0}}function Tf(e){var t=Yn(e,2);t!==null&&Lt(t,e,2)}function po(e){var t=At();if(typeof e=="function"){var a=e;if(e=a(),In){ha(!0);try{a()}finally{ha(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:e},t}function kf(e,t,a,s){return e.baseState=a,xo(e,Ye,typeof s=="function"?s:Ya)}function ep(e,t,a,s,l){if(Ii(e))throw Error(o(485));if(e=t.action,e!==null){var i={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){i.listeners.push(f)}};y.T!==null?a(!0):i.isTransition=!1,s(i),a=t.pending,a===null?(i.next=t.pending=i,Af(t,i)):(i.next=a.next,t.pending=a.next=i)}}function Af(e,t){var a=t.action,s=t.payload,l=e.state;if(t.isTransition){var i=y.T,f={};y.T=f;try{var x=a(l,s),z=y.S;z!==null&&z(f,x),Df(e,t,x)}catch(A){bo(e,t,A)}finally{i!==null&&f.types!==null&&(i.types=f.types),y.T=i}}else try{i=a(l,s),Df(e,t,i)}catch(A){bo(e,t,A)}}function Df(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(s){Rf(e,t,s)},function(s){return bo(e,t,s)}):Rf(e,t,a)}function Rf(e,t,a){t.status="fulfilled",t.value=a,Mf(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Af(e,a)))}function bo(e,t,a){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=a,Mf(t),t=t.next;while(t!==s)}e.action=null}function Mf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Of(e,t){return t}function Uf(e,t){if(Ee){var a=Ze.formState;if(a!==null){e:{var s=be;if(Ee){if(Ie){t:{for(var l=Ie,i=sa;l.nodeType!==8;){if(!i){l=null;break t}if(l=ia(l.nextSibling),l===null){l=null;break t}}i=l.data,l=i==="F!"||i==="F"?l:null}if(l){Ie=ia(l.nextSibling),s=l.data==="F!";break e}}dn(s)}s=!1}s&&(t=a[0])}}return a=At(),a.memoizedState=a.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Of,lastRenderedState:t},a.queue=s,a=tm.bind(null,be,s),s.dispatch=a,s=po(!1),i=wo.bind(null,be,!1,s.queue),s=At(),l={state:t,dispatch:null,action:e,pending:null},s.queue=l,a=ep.bind(null,be,l,i,a),l.dispatch=a,s.memoizedState=e,[t,a,!1]}function Hf(e){var t=st();return Bf(t,Ye,e)}function Bf(e,t,a){if(t=xo(e,t,Of)[0],e=Ji(Ya)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Cl(t)}catch(f){throw f===As?Bi:f}else s=t;t=st();var l=t.queue,i=l.dispatch;return a!==t.memoizedState&&(be.flags|=2048,Us(9,{destroy:void 0},tp.bind(null,l,a),null)),[s,i,e]}function tp(e,t){e.action=t}function Gf(e){var t=st(),a=Ye;if(a!==null)return Bf(t,a,e);st(),t=t.memoizedState,a=st();var s=a.queue.dispatch;return a.memoizedState=e,[t,s,!1]}function Us(e,t,a,s){return e={tag:e,create:a,deps:s,inst:t,next:null},t=be.updateQueue,t===null&&(t=Qi(),be.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Lf(){return st().memoizedState}function Fi(e,t,a,s){var l=At();be.flags|=e,l.memoizedState=Us(1|t,{destroy:void 0},a,s===void 0?null:s)}function $i(e,t,a,s){var l=st();s=s===void 0?null:s;var i=l.memoizedState.inst;Ye!==null&&s!==null&&ro(s,Ye.memoizedState.deps)?l.memoizedState=Us(t,i,a,s):(be.flags|=e,l.memoizedState=Us(1|t,i,a,s))}function qf(e,t){Fi(8390656,8,e,t)}function yo(e,t){$i(2048,8,e,t)}function ap(e){be.flags|=4;var t=be.updateQueue;if(t===null)t=Qi(),be.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Yf(e){var t=st().memoizedState;return ap({ref:t,nextImpl:e}),function(){if((Me&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Vf(e,t){return $i(4,2,e,t)}function Kf(e,t){return $i(4,4,e,t)}function Xf(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qf(e,t,a){a=a!=null?a.concat([e]):null,$i(4,4,Xf.bind(null,t,e),a)}function vo(){}function Zf(e,t){var a=st();t=t===void 0?null:t;var s=a.memoizedState;return t!==null&&ro(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Jf(e,t){var a=st();t=t===void 0?null:t;var s=a.memoizedState;if(t!==null&&ro(t,s[1]))return s[0];if(s=e(),In){ha(!0);try{e()}finally{ha(!1)}}return a.memoizedState=[s,t],s}function No(e,t,a){return a===void 0||(qa&1073741824)!==0&&(Se&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Fm(),be.lanes|=e,yn|=e,a)}function Ff(e,t,a,s){return qt(a,t)?a:Rs.current!==null?(e=No(e,a,s),qt(e,t)||(rt=!0),e):(qa&42)===0||(qa&1073741824)!==0&&(Se&261930)===0?(rt=!0,e.memoizedState=a):(e=Fm(),be.lanes|=e,yn|=e,t)}function $f(e,t,a,s,l){var i=H.p;H.p=i!==0&&8>i?i:8;var f=y.T,x={};y.T=x,wo(e,!1,t,a);try{var z=l(),A=y.S;if(A!==null&&A(x,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var V=Ig(z,s);El(e,t,V,Zt(e))}else El(e,t,s,Zt(e))}catch(J){El(e,t,{then:function(){},status:"rejected",reason:J},Zt())}finally{H.p=i,f!==null&&x.types!==null&&(f.types=x.types),y.T=f}}function np(){}function jo(e,t,a,s){if(e.tag!==5)throw Error(o(476));var l=If(e).queue;$f(e,l,t,ne,a===null?np:function(){return Wf(e),a(s)})}function If(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ne,baseState:ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:ne},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ya,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Wf(e){var t=If(e);t.next===null&&(t=e.alternate.memoizedState),El(e,t.next.queue,{},Zt())}function zo(){return jt(Xl)}function Pf(){return st().memoizedState}function em(){return st().memoizedState}function sp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Zt();e=mn(a);var s=hn(t,e,a);s!==null&&(Lt(s,t,a),zl(s,t,a)),t={cache:Ir()},e.payload=t;return}t=t.return}}function lp(e,t,a){var s=Zt();a={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ii(e)?am(t,a):(a=Lr(e,t,a,s),a!==null&&(Lt(a,e,s),nm(a,t,s)))}function tm(e,t,a){var s=Zt();El(e,t,a,s)}function El(e,t,a,s){var l={lane:s,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ii(e))am(t,l);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var f=t.lastRenderedState,x=i(f,a);if(l.hasEagerState=!0,l.eagerState=x,qt(x,f))return Ai(e,t,l,0),Ze===null&&ki(),!1}catch{}finally{}if(a=Lr(e,t,l,s),a!==null)return Lt(a,e,s),nm(a,t,s),!0}return!1}function wo(e,t,a,s){if(s={lane:2,revertLane:ad(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ii(e)){if(t)throw Error(o(479))}else t=Lr(e,a,s,2),t!==null&&Lt(t,e,2)}function Ii(e){var t=e.alternate;return e===be||t!==null&&t===be}function am(e,t){Ms=Ki=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function nm(e,t,a){if((a&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,a|=s,t.lanes=a,cu(e,a)}}var Tl={readContext:jt,use:Zi,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useLayoutEffect:et,useInsertionEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useSyncExternalStore:et,useId:et,useHostTransitionStatus:et,useFormState:et,useActionState:et,useOptimistic:et,useMemoCache:et,useCacheRefresh:et};Tl.useEffectEvent=et;var sm={readContext:jt,use:Zi,useCallback:function(e,t){return At().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:qf,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Fi(4194308,4,Xf.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Fi(4194308,4,e,t)},useInsertionEffect:function(e,t){Fi(4,2,e,t)},useMemo:function(e,t){var a=At();t=t===void 0?null:t;var s=e();if(In){ha(!0);try{e()}finally{ha(!1)}}return a.memoizedState=[s,t],s},useReducer:function(e,t,a){var s=At();if(a!==void 0){var l=a(t);if(In){ha(!0);try{a(t)}finally{ha(!1)}}}else l=t;return s.memoizedState=s.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},s.queue=e,e=e.dispatch=lp.bind(null,be,e),[s.memoizedState,e]},useRef:function(e){var t=At();return e={current:e},t.memoizedState=e},useState:function(e){e=po(e);var t=e.queue,a=tm.bind(null,be,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:vo,useDeferredValue:function(e,t){var a=At();return No(a,e,t)},useTransition:function(){var e=po(!1);return e=$f.bind(null,be,e.queue,!0,!1),At().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var s=be,l=At();if(Ee){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),Ze===null)throw Error(o(349));(Se&127)!==0||Sf(s,t,a)}l.memoizedState=a;var i={value:a,getSnapshot:t};return l.queue=i,qf(Cf.bind(null,s,i,e),[e]),s.flags|=2048,Us(9,{destroy:void 0},_f.bind(null,s,i,a,t),null),a},useId:function(){var e=At(),t=Ze.identifierPrefix;if(Ee){var a=za,s=ja;a=(s&~(1<<32-Et(s)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Xi++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Wg++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:zo,useFormState:Uf,useActionState:Uf,useOptimistic:function(e){var t=At();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=wo.bind(null,be,!0,a),a.dispatch=t,[e,t]},useMemoCache:ho,useCacheRefresh:function(){return At().memoizedState=sp.bind(null,be)},useEffectEvent:function(e){var t=At(),a={impl:e};return t.memoizedState=a,function(){if((Me&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},So={readContext:jt,use:Zi,useCallback:Zf,useContext:jt,useEffect:yo,useImperativeHandle:Qf,useInsertionEffect:Vf,useLayoutEffect:Kf,useMemo:Jf,useReducer:Ji,useRef:Lf,useState:function(){return Ji(Ya)},useDebugValue:vo,useDeferredValue:function(e,t){var a=st();return Ff(a,Ye.memoizedState,e,t)},useTransition:function(){var e=Ji(Ya)[0],t=st().memoizedState;return[typeof e=="boolean"?e:Cl(e),t]},useSyncExternalStore:wf,useId:Pf,useHostTransitionStatus:zo,useFormState:Hf,useActionState:Hf,useOptimistic:function(e,t){var a=st();return kf(a,Ye,e,t)},useMemoCache:ho,useCacheRefresh:em};So.useEffectEvent=Yf;var lm={readContext:jt,use:Zi,useCallback:Zf,useContext:jt,useEffect:yo,useImperativeHandle:Qf,useInsertionEffect:Vf,useLayoutEffect:Kf,useMemo:Jf,useReducer:go,useRef:Lf,useState:function(){return go(Ya)},useDebugValue:vo,useDeferredValue:function(e,t){var a=st();return Ye===null?No(a,e,t):Ff(a,Ye.memoizedState,e,t)},useTransition:function(){var e=go(Ya)[0],t=st().memoizedState;return[typeof e=="boolean"?e:Cl(e),t]},useSyncExternalStore:wf,useId:Pf,useHostTransitionStatus:zo,useFormState:Gf,useActionState:Gf,useOptimistic:function(e,t){var a=st();return Ye!==null?kf(a,Ye,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ho,useCacheRefresh:em};lm.useEffectEvent=Yf;function _o(e,t,a,s){t=e.memoizedState,a=a(s,t),a=a==null?t:N({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Co={enqueueSetState:function(e,t,a){e=e._reactInternals;var s=Zt(),l=mn(s);l.payload=t,a!=null&&(l.callback=a),t=hn(e,l,s),t!==null&&(Lt(t,e,s),zl(t,e,s))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=Zt(),l=mn(s);l.tag=1,l.payload=t,a!=null&&(l.callback=a),t=hn(e,l,s),t!==null&&(Lt(t,e,s),zl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Zt(),s=mn(a);s.tag=2,t!=null&&(s.callback=t),t=hn(e,s,a),t!==null&&(Lt(t,e,a),zl(t,e,a))}};function im(e,t,a,s,l,i,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,f):t.prototype&&t.prototype.isPureReactComponent?!xl(a,s)||!xl(l,i):!0}function cm(e,t,a,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&Co.enqueueReplaceState(t,t.state,null)}function Wn(e,t){var a=t;if("ref"in t){a={};for(var s in t)s!=="ref"&&(a[s]=t[s])}if(e=e.defaultProps){a===t&&(a=N({},a));for(var l in e)a[l]===void 0&&(a[l]=e[l])}return a}function rm(e){Ti(e)}function om(e){console.error(e)}function dm(e){Ti(e)}function Wi(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function um(e,t,a){try{var s=e.onCaughtError;s(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Eo(e,t,a){return a=mn(a),a.tag=3,a.payload={element:null},a.callback=function(){Wi(e,t)},a}function fm(e){return e=mn(e),e.tag=3,e}function mm(e,t,a,s){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var i=s.value;e.payload=function(){return l(i)},e.callback=function(){um(t,a,s)}}var f=a.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){um(t,a,s),typeof l!="function"&&(vn===null?vn=new Set([this]):vn.add(this));var x=s.stack;this.componentDidCatch(s.value,{componentStack:x!==null?x:""})})}function ip(e,t,a,s,l){if(a.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=a.alternate,t!==null&&Es(t,a,l,!0),a=Vt.current,a!==null){switch(a.tag){case 31:case 13:return la===null?dc():a.alternate===null&&tt===0&&(tt=3),a.flags&=-257,a.flags|=65536,a.lanes=l,s===Gi?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([s]):t.add(s),Po(e,s,l)),!1;case 22:return a.flags|=65536,s===Gi?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([s]):a.add(s)),Po(e,s,l)),!1}throw Error(o(435,a.tag))}return Po(e,s,l),dc(),!1}if(Ee)return t=Vt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,s!==Qr&&(e=Error(o(422),{cause:s}),bl(ta(e,a)))):(s!==Qr&&(t=Error(o(423),{cause:s}),bl(ta(t,a))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,s=ta(s,a),l=Eo(e.stateNode,s,l),no(e,l),tt!==4&&(tt=2)),!1;var i=Error(o(520),{cause:s});if(i=ta(i,a),Hl===null?Hl=[i]:Hl.push(i),tt!==4&&(tt=2),t===null)return!0;s=ta(s,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=l&-l,a.lanes|=e,e=Eo(a.stateNode,s,e),no(a,e),!1;case 1:if(t=a.type,i=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(vn===null||!vn.has(i))))return a.flags|=65536,l&=-l,a.lanes|=l,l=fm(l),mm(l,e,a,s),no(a,l),!1}a=a.return}while(a!==null);return!1}var To=Error(o(461)),rt=!1;function zt(e,t,a,s){t.child=e===null?pf(t,null,a,s):$n(t,e.child,a,s)}function hm(e,t,a,s,l){a=a.render;var i=t.ref;if("ref"in s){var f={};for(var x in s)x!=="ref"&&(f[x]=s[x])}else f=s;return Qn(t),s=oo(e,t,a,f,i,l),x=uo(),e!==null&&!rt?(fo(e,t,l),Va(e,t,l)):(Ee&&x&&Kr(t),t.flags|=1,zt(e,t,s,l),t.child)}function xm(e,t,a,s,l){if(e===null){var i=a.type;return typeof i=="function"&&!qr(i)&&i.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=i,gm(e,t,i,s,l)):(e=Ri(a.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!Ho(e,l)){var f=i.memoizedProps;if(a=a.compare,a=a!==null?a:xl,a(f,s)&&e.ref===t.ref)return Va(e,t,l)}return t.flags|=1,e=Ha(i,s),e.ref=t.ref,e.return=t,t.child=e}function gm(e,t,a,s,l){if(e!==null){var i=e.memoizedProps;if(xl(i,s)&&e.ref===t.ref)if(rt=!1,t.pendingProps=s=i,Ho(e,l))(e.flags&131072)!==0&&(rt=!0);else return t.lanes=e.lanes,Va(e,t,l)}return ko(e,t,a,s,l)}function pm(e,t,a,s){var l=s.children,i=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(i=i!==null?i.baseLanes|a:a,e!==null){for(s=t.child=e.child,l=0;s!==null;)l=l|s.lanes|s.childLanes,s=s.sibling;s=l&~i}else s=0,t.child=null;return bm(e,t,i,a,s)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Hi(t,i!==null?i.cachePool:null),i!==null?vf(t,i):lo(),Nf(t);else return s=t.lanes=536870912,bm(e,t,i!==null?i.baseLanes|a:a,a,s)}else i!==null?(Hi(t,i.cachePool),vf(t,i),gn(),t.memoizedState=null):(e!==null&&Hi(t,null),lo(),gn());return zt(e,t,l,a),t.child}function kl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function bm(e,t,a,s,l){var i=Pr();return i=i===null?null:{parent:it._currentValue,pool:i},t.memoizedState={baseLanes:a,cachePool:i},e!==null&&Hi(t,null),lo(),Nf(t),e!==null&&Es(e,t,s,!0),t.childLanes=l,null}function Pi(e,t){return t=tc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function ym(e,t,a){return $n(t,e.child,null,a),e=Pi(t,t.pendingProps),e.flags|=2,Kt(t),t.memoizedState=null,e}function cp(e,t,a){var s=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ee){if(s.mode==="hidden")return e=Pi(t,s),t.lanes=536870912,kl(null,e);if(co(t),(e=Ie)?(e=A0(e,sa),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:rn!==null?{id:ja,overflow:za}:null,retryLane:536870912,hydrationErrors:null},a=tf(e),a.return=t,t.child=a,Nt=t,Ie=null)):e=null,e===null)throw dn(t);return t.lanes=536870912,null}return Pi(t,s)}var i=e.memoizedState;if(i!==null){var f=i.dehydrated;if(co(t),l)if(t.flags&256)t.flags&=-257,t=ym(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(rt||Es(e,t,a,!1),l=(a&e.childLanes)!==0,rt||l){if(s=Ze,s!==null&&(f=ru(s,a),f!==0&&f!==i.retryLane))throw i.retryLane=f,Yn(e,f),Lt(s,e,f),To;dc(),t=ym(e,t,a)}else e=i.treeContext,Ie=ia(f.nextSibling),Nt=t,Ee=!0,on=null,sa=!1,e!==null&&sf(t,e),t=Pi(t,s),t.flags|=4096;return t}return e=Ha(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ec(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function ko(e,t,a,s,l){return Qn(t),a=oo(e,t,a,s,void 0,l),s=uo(),e!==null&&!rt?(fo(e,t,l),Va(e,t,l)):(Ee&&s&&Kr(t),t.flags|=1,zt(e,t,a,l),t.child)}function vm(e,t,a,s,l,i){return Qn(t),t.updateQueue=null,a=zf(t,s,a,l),jf(e),s=uo(),e!==null&&!rt?(fo(e,t,i),Va(e,t,i)):(Ee&&s&&Kr(t),t.flags|=1,zt(e,t,a,i),t.child)}function Nm(e,t,a,s,l){if(Qn(t),t.stateNode===null){var i=ws,f=a.contextType;typeof f=="object"&&f!==null&&(i=jt(f)),i=new a(s,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Co,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=s,i.state=t.memoizedState,i.refs={},to(t),f=a.contextType,i.context=typeof f=="object"&&f!==null?jt(f):ws,i.state=t.memoizedState,f=a.getDerivedStateFromProps,typeof f=="function"&&(_o(t,a,f,s),i.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(f=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),f!==i.state&&Co.enqueueReplaceState(i,i.state,null),Sl(t,s,i,l),wl(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){i=t.stateNode;var x=t.memoizedProps,z=Wn(a,x);i.props=z;var A=i.context,V=a.contextType;f=ws,typeof V=="object"&&V!==null&&(f=jt(V));var J=a.getDerivedStateFromProps;V=typeof J=="function"||typeof i.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,V||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(x||A!==f)&&cm(t,i,s,f),fn=!1;var O=t.memoizedState;i.state=O,Sl(t,s,i,l),wl(),A=t.memoizedState,x||O!==A||fn?(typeof J=="function"&&(_o(t,a,J,s),A=t.memoizedState),(z=fn||im(t,a,z,s,O,A,f))?(V||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=A),i.props=s,i.state=A,i.context=f,s=z):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,ao(e,t),f=t.memoizedProps,V=Wn(a,f),i.props=V,J=t.pendingProps,O=i.context,A=a.contextType,z=ws,typeof A=="object"&&A!==null&&(z=jt(A)),x=a.getDerivedStateFromProps,(A=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(f!==J||O!==z)&&cm(t,i,s,z),fn=!1,O=t.memoizedState,i.state=O,Sl(t,s,i,l),wl();var B=t.memoizedState;f!==J||O!==B||fn||e!==null&&e.dependencies!==null&&Oi(e.dependencies)?(typeof x=="function"&&(_o(t,a,x,s),B=t.memoizedState),(V=fn||im(t,a,V,s,O,B,z)||e!==null&&e.dependencies!==null&&Oi(e.dependencies))?(A||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,B,z),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,B,z)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=B),i.props=s,i.state=B,i.context=z,s=V):(typeof i.componentDidUpdate!="function"||f===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),s=!1)}return i=s,ec(e,t),s=(t.flags&128)!==0,i||s?(i=t.stateNode,a=s&&typeof a.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&s?(t.child=$n(t,e.child,null,l),t.child=$n(t,null,a,l)):zt(e,t,a,l),t.memoizedState=i.state,e=t.child):e=Va(e,t,l),e}function jm(e,t,a,s){return Kn(),t.flags|=256,zt(e,t,a,s),t.child}var Ao={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Do(e){return{baseLanes:e,cachePool:uf()}}function Ro(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=Qt),e}function zm(e,t,a){var s=t.pendingProps,l=!1,i=(t.flags&128)!==0,f;if((f=i)||(f=e!==null&&e.memoizedState===null?!1:(nt.current&2)!==0),f&&(l=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ee){if(l?xn(t):gn(),(e=Ie)?(e=A0(e,sa),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:rn!==null?{id:ja,overflow:za}:null,retryLane:536870912,hydrationErrors:null},a=tf(e),a.return=t,t.child=a,Nt=t,Ie=null)):e=null,e===null)throw dn(t);return xd(e)?t.lanes=32:t.lanes=536870912,null}var x=s.children;return s=s.fallback,l?(gn(),l=t.mode,x=tc({mode:"hidden",children:x},l),s=Vn(s,l,a,null),x.return=t,s.return=t,x.sibling=s,t.child=x,s=t.child,s.memoizedState=Do(a),s.childLanes=Ro(e,f,a),t.memoizedState=Ao,kl(null,s)):(xn(t),Mo(t,x))}var z=e.memoizedState;if(z!==null&&(x=z.dehydrated,x!==null)){if(i)t.flags&256?(xn(t),t.flags&=-257,t=Oo(e,t,a)):t.memoizedState!==null?(gn(),t.child=e.child,t.flags|=128,t=null):(gn(),x=s.fallback,l=t.mode,s=tc({mode:"visible",children:s.children},l),x=Vn(x,l,a,null),x.flags|=2,s.return=t,x.return=t,s.sibling=x,t.child=s,$n(t,e.child,null,a),s=t.child,s.memoizedState=Do(a),s.childLanes=Ro(e,f,a),t.memoizedState=Ao,t=kl(null,s));else if(xn(t),xd(x)){if(f=x.nextSibling&&x.nextSibling.dataset,f)var A=f.dgst;f=A,s=Error(o(419)),s.stack="",s.digest=f,bl({value:s,source:null,stack:null}),t=Oo(e,t,a)}else if(rt||Es(e,t,a,!1),f=(a&e.childLanes)!==0,rt||f){if(f=Ze,f!==null&&(s=ru(f,a),s!==0&&s!==z.retryLane))throw z.retryLane=s,Yn(e,s),Lt(f,e,s),To;hd(x)||dc(),t=Oo(e,t,a)}else hd(x)?(t.flags|=192,t.child=e.child,t=null):(e=z.treeContext,Ie=ia(x.nextSibling),Nt=t,Ee=!0,on=null,sa=!1,e!==null&&sf(t,e),t=Mo(t,s.children),t.flags|=4096);return t}return l?(gn(),x=s.fallback,l=t.mode,z=e.child,A=z.sibling,s=Ha(z,{mode:"hidden",children:s.children}),s.subtreeFlags=z.subtreeFlags&65011712,A!==null?x=Ha(A,x):(x=Vn(x,l,a,null),x.flags|=2),x.return=t,s.return=t,s.sibling=x,t.child=s,kl(null,s),s=t.child,x=e.child.memoizedState,x===null?x=Do(a):(l=x.cachePool,l!==null?(z=it._currentValue,l=l.parent!==z?{parent:z,pool:z}:l):l=uf(),x={baseLanes:x.baseLanes|a,cachePool:l}),s.memoizedState=x,s.childLanes=Ro(e,f,a),t.memoizedState=Ao,kl(e.child,s)):(xn(t),a=e.child,e=a.sibling,a=Ha(a,{mode:"visible",children:s.children}),a.return=t,a.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=a,t.memoizedState=null,a)}function Mo(e,t){return t=tc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function tc(e,t){return e=Yt(22,e,null,t),e.lanes=0,e}function Oo(e,t,a){return $n(t,e.child,null,a),e=Mo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function wm(e,t,a){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Fr(e.return,t,a)}function Uo(e,t,a,s,l,i){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:l,treeForkCount:i}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=s,f.tail=a,f.tailMode=l,f.treeForkCount=i)}function Sm(e,t,a){var s=t.pendingProps,l=s.revealOrder,i=s.tail;s=s.children;var f=nt.current,x=(f&2)!==0;if(x?(f=f&1|2,t.flags|=128):f&=1,X(nt,f),zt(e,t,s,a),s=Ee?pl:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wm(e,a,t);else if(e.tag===19)wm(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(a=t.child,l=null;a!==null;)e=a.alternate,e!==null&&Vi(e)===null&&(l=a),a=a.sibling;a=l,a===null?(l=t.child,t.child=null):(l=a.sibling,a.sibling=null),Uo(t,!1,l,a,i,s);break;case"backwards":case"unstable_legacy-backwards":for(a=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Vi(e)===null){t.child=l;break}e=l.sibling,l.sibling=a,a=l,l=e}Uo(t,!0,a,null,i,s);break;case"together":Uo(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Va(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),yn|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Es(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=Ha(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=Ha(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Ho(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Oi(e)))}function rp(e,t,a){switch(t.tag){case 3:$e(t,t.stateNode.containerInfo),un(t,it,e.memoizedState.cache),Kn();break;case 27:case 5:It(t);break;case 4:$e(t,t.stateNode.containerInfo);break;case 10:un(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,co(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(xn(t),t.flags|=128,null):(a&t.child.childLanes)!==0?zm(e,t,a):(xn(t),e=Va(e,t,a),e!==null?e.sibling:null);xn(t);break;case 19:var l=(e.flags&128)!==0;if(s=(a&t.childLanes)!==0,s||(Es(e,t,a,!1),s=(a&t.childLanes)!==0),l){if(s)return Sm(e,t,a);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),X(nt,nt.current),s)break;return null;case 22:return t.lanes=0,pm(e,t,a,t.pendingProps);case 24:un(t,it,e.memoizedState.cache)}return Va(e,t,a)}function _m(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)rt=!0;else{if(!Ho(e,a)&&(t.flags&128)===0)return rt=!1,rp(e,t,a);rt=(e.flags&131072)!==0}else rt=!1,Ee&&(t.flags&1048576)!==0&&nf(t,pl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=Jn(t.elementType),t.type=e,typeof e=="function")qr(e)?(s=Wn(e,s),t.tag=1,t=Nm(null,t,e,s,a)):(t.tag=0,t=ko(null,t,e,s,a));else{if(e!=null){var l=e.$$typeof;if(l===F){t.tag=11,t=hm(null,t,e,s,a);break e}else if(l===I){t.tag=14,t=xm(null,t,e,s,a);break e}}throw t=ae(e)||e,Error(o(306,t,""))}}return t;case 0:return ko(e,t,t.type,t.pendingProps,a);case 1:return s=t.type,l=Wn(s,t.pendingProps),Nm(e,t,s,l,a);case 3:e:{if($e(t,t.stateNode.containerInfo),e===null)throw Error(o(387));s=t.pendingProps;var i=t.memoizedState;l=i.element,ao(e,t),Sl(t,s,null,a);var f=t.memoizedState;if(s=f.cache,un(t,it,s),s!==i.cache&&$r(t,[it],a,!0),wl(),s=f.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=jm(e,t,s,a);break e}else if(s!==l){l=ta(Error(o(424)),t),bl(l),t=jm(e,t,s,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ie=ia(e.firstChild),Nt=t,Ee=!0,on=null,sa=!0,a=pf(t,null,s,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Kn(),s===l){t=Va(e,t,a);break e}zt(e,t,s,a)}t=t.child}return t;case 26:return ec(e,t),e===null?(a=H0(t.type,null,t.pendingProps,null))?t.memoizedState=a:Ee||(a=t.type,e=t.pendingProps,s=pc(W.current).createElement(a),s[vt]=t,s[Mt]=e,wt(s,a,e),xt(s),t.stateNode=s):t.memoizedState=H0(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return It(t),e===null&&Ee&&(s=t.stateNode=M0(t.type,t.pendingProps,W.current),Nt=t,sa=!0,l=Ie,wn(t.type)?(gd=l,Ie=ia(s.firstChild)):Ie=l),zt(e,t,t.pendingProps.children,a),ec(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ee&&((l=s=Ie)&&(s=Bp(s,t.type,t.pendingProps,sa),s!==null?(t.stateNode=s,Nt=t,Ie=ia(s.firstChild),sa=!1,l=!0):l=!1),l||dn(t)),It(t),l=t.type,i=t.pendingProps,f=e!==null?e.memoizedProps:null,s=i.children,ud(l,i)?s=null:f!==null&&ud(l,f)&&(t.flags|=32),t.memoizedState!==null&&(l=oo(e,t,Pg,null,null,a),Xl._currentValue=l),ec(e,t),zt(e,t,s,a),t.child;case 6:return e===null&&Ee&&((e=a=Ie)&&(a=Gp(a,t.pendingProps,sa),a!==null?(t.stateNode=a,Nt=t,Ie=null,e=!0):e=!1),e||dn(t)),null;case 13:return zm(e,t,a);case 4:return $e(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=$n(t,null,s,a):zt(e,t,s,a),t.child;case 11:return hm(e,t,t.type,t.pendingProps,a);case 7:return zt(e,t,t.pendingProps,a),t.child;case 8:return zt(e,t,t.pendingProps.children,a),t.child;case 12:return zt(e,t,t.pendingProps.children,a),t.child;case 10:return s=t.pendingProps,un(t,t.type,s.value),zt(e,t,s.children,a),t.child;case 9:return l=t.type._context,s=t.pendingProps.children,Qn(t),l=jt(l),s=s(l),t.flags|=1,zt(e,t,s,a),t.child;case 14:return xm(e,t,t.type,t.pendingProps,a);case 15:return gm(e,t,t.type,t.pendingProps,a);case 19:return Sm(e,t,a);case 31:return cp(e,t,a);case 22:return pm(e,t,a,t.pendingProps);case 24:return Qn(t),s=jt(it),e===null?(l=Pr(),l===null&&(l=Ze,i=Ir(),l.pooledCache=i,i.refCount++,i!==null&&(l.pooledCacheLanes|=a),l=i),t.memoizedState={parent:s,cache:l},to(t),un(t,it,l)):((e.lanes&a)!==0&&(ao(e,t),Sl(t,null,null,a),wl()),l=e.memoizedState,i=t.memoizedState,l.parent!==s?(l={parent:s,cache:s},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),un(t,it,s)):(s=i.cache,un(t,it,s),s!==l.cache&&$r(t,[it],a,!0))),zt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ka(e){e.flags|=4}function Bo(e,t,a,s,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(Pm())e.flags|=8192;else throw Fn=Gi,eo}else e.flags&=-16777217}function Cm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Y0(t))if(Pm())e.flags|=8192;else throw Fn=Gi,eo}function ac(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?bi():536870912,e.lanes|=t,Ls|=t)}function Al(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;a!==null;)a.alternate!==null&&(s=a),a=a.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function We(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,s=0;if(t)for(var l=e.child;l!==null;)a|=l.lanes|l.childLanes,s|=l.subtreeFlags&65011712,s|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)a|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function op(e,t,a){var s=t.pendingProps;switch(Xr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return We(t),null;case 1:return We(t),null;case 3:return a=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),La(it),Rt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Cs(t)?Ka(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Zr())),We(t),null;case 26:var l=t.type,i=t.memoizedState;return e===null?(Ka(t),i!==null?(We(t),Cm(t,i)):(We(t),Bo(t,l,null,s,a))):i?i!==e.memoizedState?(Ka(t),We(t),Cm(t,i)):(We(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Ka(t),We(t),Bo(t,l,e,s,a)),null;case 27:if(Aa(t),a=W.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ka(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return We(t),null}e=ue.current,Cs(t)?lf(t):(e=M0(l,s,a),t.stateNode=e,Ka(t))}return We(t),null;case 5:if(Aa(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Ka(t);else{if(!s){if(t.stateNode===null)throw Error(o(166));return We(t),null}if(i=ue.current,Cs(t))lf(t);else{var f=pc(W.current);switch(i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof s.is=="string"?f.createElement("select",{is:s.is}):f.createElement("select"),s.multiple?i.multiple=!0:s.size&&(i.size=s.size);break;default:i=typeof s.is=="string"?f.createElement(l,{is:s.is}):f.createElement(l)}}i[vt]=t,i[Mt]=s;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=i;e:switch(wt(i,l,s),l){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ka(t)}}return We(t),Bo(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Ka(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(e=W.current,Cs(t)){if(e=t.stateNode,a=t.memoizedProps,s=null,l=Nt,l!==null)switch(l.tag){case 27:case 5:s=l.memoizedProps}e[vt]=t,e=!!(e.nodeValue===a||s!==null&&s.suppressHydrationWarning===!0||z0(e.nodeValue,a)),e||dn(t,!0)}else e=pc(e).createTextNode(s),e[vt]=t,t.stateNode=e}return We(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(s=Cs(t),a!==null){if(e===null){if(!s)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[vt]=t}else Kn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;We(t),e=!1}else a=Zr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(Kt(t),t):(Kt(t),null);if((t.flags&128)!==0)throw Error(o(558))}return We(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=Cs(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(o(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));l[vt]=t}else Kn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;We(t),l=!1}else l=Zr(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(Kt(t),t):(Kt(t),null)}return Kt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=s!==null,e=e!==null&&e.memoizedState!==null,a&&(s=t.child,l=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(l=s.alternate.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==l&&(s.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),ac(t,t.updateQueue),We(t),null);case 4:return Rt(),e===null&&id(t.stateNode.containerInfo),We(t),null;case 10:return La(t.type),We(t),null;case 19:if(Ne(nt),s=t.memoizedState,s===null)return We(t),null;if(l=(t.flags&128)!==0,i=s.rendering,i===null)if(l)Al(s,!1);else{if(tt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Vi(e),i!==null){for(t.flags|=128,Al(s,!1),e=i.updateQueue,t.updateQueue=e,ac(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)ef(a,e),a=a.sibling;return X(nt,nt.current&1|2),Ee&&Ba(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&ft()>cc&&(t.flags|=128,l=!0,Al(s,!1),t.lanes=4194304)}else{if(!l)if(e=Vi(i),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,ac(t,e),Al(s,!0),s.tail===null&&s.tailMode==="hidden"&&!i.alternate&&!Ee)return We(t),null}else 2*ft()-s.renderingStartTime>cc&&a!==536870912&&(t.flags|=128,l=!0,Al(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(e=s.last,e!==null?e.sibling=i:t.child=i,s.last=i)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ft(),e.sibling=null,a=nt.current,X(nt,l?a&1|2:a&1),Ee&&Ba(t,s.treeForkCount),e):(We(t),null);case 22:case 23:return Kt(t),io(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(a&536870912)!==0&&(t.flags&128)===0&&(We(t),t.subtreeFlags&6&&(t.flags|=8192)):We(t),a=t.updateQueue,a!==null&&ac(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==a&&(t.flags|=2048),e!==null&&Ne(Zn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),La(it),We(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function dp(e,t){switch(Xr(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return La(it),Rt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Aa(t),null;case 31:if(t.memoizedState!==null){if(Kt(t),t.alternate===null)throw Error(o(340));Kn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Kt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Kn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ne(nt),null;case 4:return Rt(),null;case 10:return La(t.type),null;case 22:case 23:return Kt(t),io(),e!==null&&Ne(Zn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return La(it),null;case 25:return null;default:return null}}function Em(e,t){switch(Xr(t),t.tag){case 3:La(it),Rt();break;case 26:case 27:case 5:Aa(t);break;case 4:Rt();break;case 31:t.memoizedState!==null&&Kt(t);break;case 13:Kt(t);break;case 19:Ne(nt);break;case 10:La(t.type);break;case 22:case 23:Kt(t),io(),e!==null&&Ne(Zn);break;case 24:La(it)}}function Dl(e,t){try{var a=t.updateQueue,s=a!==null?a.lastEffect:null;if(s!==null){var l=s.next;a=l;do{if((a.tag&e)===e){s=void 0;var i=a.create,f=a.inst;s=i(),f.destroy=s}a=a.next}while(a!==l)}}catch(x){Be(t,t.return,x)}}function pn(e,t,a){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var i=l.next;s=i;do{if((s.tag&e)===e){var f=s.inst,x=f.destroy;if(x!==void 0){f.destroy=void 0,l=t;var z=a,A=x;try{A()}catch(V){Be(l,z,V)}}}s=s.next}while(s!==i)}}catch(V){Be(t,t.return,V)}}function Tm(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{yf(t,a)}catch(s){Be(e,e.return,s)}}}function km(e,t,a){a.props=Wn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(s){Be(e,t,s)}}function Rl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof a=="function"?e.refCleanup=a(s):a.current=s}}catch(l){Be(e,t,l)}}function wa(e,t){var a=e.ref,s=e.refCleanup;if(a!==null)if(typeof s=="function")try{s()}catch(l){Be(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){Be(e,t,l)}else a.current=null}function Am(e){var t=e.type,a=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&s.focus();break e;case"img":a.src?s.src=a.src:a.srcSet&&(s.srcset=a.srcSet)}}catch(l){Be(e,e.return,l)}}function Go(e,t,a){try{var s=e.stateNode;Dp(s,e.type,a,t),s[Mt]=t}catch(l){Be(e,e.return,l)}}function Dm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&wn(e.type)||e.tag===4}function Lo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Dm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&wn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qo(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Oa));else if(s!==4&&(s===27&&wn(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(qo(e,t,a),e=e.sibling;e!==null;)qo(e,t,a),e=e.sibling}function nc(e,t,a){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(s!==4&&(s===27&&wn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(nc(e,t,a),e=e.sibling;e!==null;)nc(e,t,a),e=e.sibling}function Rm(e){var t=e.stateNode,a=e.memoizedProps;try{for(var s=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);wt(t,s,a),t[vt]=e,t[Mt]=a}catch(i){Be(e,e.return,i)}}var Xa=!1,ot=!1,Yo=!1,Mm=typeof WeakSet=="function"?WeakSet:Set,gt=null;function up(e,t){if(e=e.containerInfo,od=wc,e=Xu(e),Mr(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var s=a.getSelection&&a.getSelection();if(s&&s.rangeCount!==0){a=s.anchorNode;var l=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{a.nodeType,i.nodeType}catch{a=null;break e}var f=0,x=-1,z=-1,A=0,V=0,J=e,O=null;t:for(;;){for(var B;J!==a||l!==0&&J.nodeType!==3||(x=f+l),J!==i||s!==0&&J.nodeType!==3||(z=f+s),J.nodeType===3&&(f+=J.nodeValue.length),(B=J.firstChild)!==null;)O=J,J=B;for(;;){if(J===e)break t;if(O===a&&++A===l&&(x=f),O===i&&++V===s&&(z=f),(B=J.nextSibling)!==null)break;J=O,O=J.parentNode}J=B}a=x===-1||z===-1?null:{start:x,end:z}}else a=null}a=a||{start:0,end:0}}else a=null;for(dd={focusedElem:e,selectionRange:a},wc=!1,gt=t;gt!==null;)if(t=gt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gt=e;else for(;gt!==null;){switch(t=gt,i=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)l=e[a],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,a=t,l=i.memoizedProps,i=i.memoizedState,s=a.stateNode;try{var oe=Wn(a.type,l);e=s.getSnapshotBeforeUpdate(oe,i),s.__reactInternalSnapshotBeforeUpdate=e}catch(ge){Be(a,a.return,ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)md(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,gt=e;break}gt=t.return}}function Om(e,t,a){var s=a.flags;switch(a.tag){case 0:case 11:case 15:Za(e,a),s&4&&Dl(5,a);break;case 1:if(Za(e,a),s&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(f){Be(a,a.return,f)}else{var l=Wn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){Be(a,a.return,f)}}s&64&&Tm(a),s&512&&Rl(a,a.return);break;case 3:if(Za(e,a),s&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{yf(e,t)}catch(f){Be(a,a.return,f)}}break;case 27:t===null&&s&4&&Rm(a);case 26:case 5:Za(e,a),t===null&&s&4&&Am(a),s&512&&Rl(a,a.return);break;case 12:Za(e,a);break;case 31:Za(e,a),s&4&&Bm(e,a);break;case 13:Za(e,a),s&4&&Gm(e,a),s&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=vp.bind(null,a),Lp(e,a))));break;case 22:if(s=a.memoizedState!==null||Xa,!s){t=t!==null&&t.memoizedState!==null||ot,l=Xa;var i=ot;Xa=s,(ot=t)&&!i?Ja(e,a,(a.subtreeFlags&8772)!==0):Za(e,a),Xa=l,ot=i}break;case 30:break;default:Za(e,a)}}function Um(e){var t=e.alternate;t!==null&&(e.alternate=null,Um(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&pr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pe=null,Ut=!1;function Qa(e,t,a){for(a=a.child;a!==null;)Hm(e,t,a),a=a.sibling}function Hm(e,t,a){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Hn,a)}catch{}switch(a.tag){case 26:ot||wa(a,t),Qa(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ot||wa(a,t);var s=Pe,l=Ut;wn(a.type)&&(Pe=a.stateNode,Ut=!1),Qa(e,t,a),Yl(a.stateNode),Pe=s,Ut=l;break;case 5:ot||wa(a,t);case 6:if(s=Pe,l=Ut,Pe=null,Qa(e,t,a),Pe=s,Ut=l,Pe!==null)if(Ut)try{(Pe.nodeType===9?Pe.body:Pe.nodeName==="HTML"?Pe.ownerDocument.body:Pe).removeChild(a.stateNode)}catch(i){Be(a,t,i)}else try{Pe.removeChild(a.stateNode)}catch(i){Be(a,t,i)}break;case 18:Pe!==null&&(Ut?(e=Pe,T0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Js(e)):T0(Pe,a.stateNode));break;case 4:s=Pe,l=Ut,Pe=a.stateNode.containerInfo,Ut=!0,Qa(e,t,a),Pe=s,Ut=l;break;case 0:case 11:case 14:case 15:pn(2,a,t),ot||pn(4,a,t),Qa(e,t,a);break;case 1:ot||(wa(a,t),s=a.stateNode,typeof s.componentWillUnmount=="function"&&km(a,t,s)),Qa(e,t,a);break;case 21:Qa(e,t,a);break;case 22:ot=(s=ot)||a.memoizedState!==null,Qa(e,t,a),ot=s;break;default:Qa(e,t,a)}}function Bm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Js(e)}catch(a){Be(t,t.return,a)}}}function Gm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Js(e)}catch(a){Be(t,t.return,a)}}function fp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Mm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Mm),t;default:throw Error(o(435,e.tag))}}function sc(e,t){var a=fp(e);t.forEach(function(s){if(!a.has(s)){a.add(s);var l=Np.bind(null,e,s);s.then(l,l)}})}function Ht(e,t){var a=t.deletions;if(a!==null)for(var s=0;s<a.length;s++){var l=a[s],i=e,f=t,x=f;e:for(;x!==null;){switch(x.tag){case 27:if(wn(x.type)){Pe=x.stateNode,Ut=!1;break e}break;case 5:Pe=x.stateNode,Ut=!1;break e;case 3:case 4:Pe=x.stateNode.containerInfo,Ut=!0;break e}x=x.return}if(Pe===null)throw Error(o(160));Hm(i,f,l),Pe=null,Ut=!1,i=l.alternate,i!==null&&(i.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Lm(t,e),t=t.sibling}var ga=null;function Lm(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ht(t,e),Bt(e),s&4&&(pn(3,e,e.return),Dl(3,e),pn(5,e,e.return));break;case 1:Ht(t,e),Bt(e),s&512&&(ot||a===null||wa(a,a.return)),s&64&&Xa&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?s:a.concat(s))));break;case 26:var l=ga;if(Ht(t,e),Bt(e),s&512&&(ot||a===null||wa(a,a.return)),s&4){var i=a!==null?a.memoizedState:null;if(s=e.memoizedState,a===null)if(s===null)if(e.stateNode===null){e:{s=e.type,a=e.memoizedProps,l=l.ownerDocument||l;t:switch(s){case"title":i=l.getElementsByTagName("title")[0],(!i||i[il]||i[vt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=l.createElement(s),l.head.insertBefore(i,l.querySelector("head > title"))),wt(i,s,a),i[vt]=e,xt(i),s=i;break e;case"link":var f=L0("link","href",l).get(s+(a.href||""));if(f){for(var x=0;x<f.length;x++)if(i=f[x],i.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&i.getAttribute("rel")===(a.rel==null?null:a.rel)&&i.getAttribute("title")===(a.title==null?null:a.title)&&i.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){f.splice(x,1);break t}}i=l.createElement(s),wt(i,s,a),l.head.appendChild(i);break;case"meta":if(f=L0("meta","content",l).get(s+(a.content||""))){for(x=0;x<f.length;x++)if(i=f[x],i.getAttribute("content")===(a.content==null?null:""+a.content)&&i.getAttribute("name")===(a.name==null?null:a.name)&&i.getAttribute("property")===(a.property==null?null:a.property)&&i.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&i.getAttribute("charset")===(a.charSet==null?null:a.charSet)){f.splice(x,1);break t}}i=l.createElement(s),wt(i,s,a),l.head.appendChild(i);break;default:throw Error(o(468,s))}i[vt]=e,xt(i),s=i}e.stateNode=s}else q0(l,e.type,e.stateNode);else e.stateNode=G0(l,s,e.memoizedProps);else i!==s?(i===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):i.count--,s===null?q0(l,e.type,e.stateNode):G0(l,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Go(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ht(t,e),Bt(e),s&512&&(ot||a===null||wa(a,a.return)),a!==null&&s&4&&Go(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ht(t,e),Bt(e),s&512&&(ot||a===null||wa(a,a.return)),e.flags&32){l=e.stateNode;try{ps(l,"")}catch(oe){Be(e,e.return,oe)}}s&4&&e.stateNode!=null&&(l=e.memoizedProps,Go(e,l,a!==null?a.memoizedProps:l)),s&1024&&(Yo=!0);break;case 6:if(Ht(t,e),Bt(e),s&4){if(e.stateNode===null)throw Error(o(162));s=e.memoizedProps,a=e.stateNode;try{a.nodeValue=s}catch(oe){Be(e,e.return,oe)}}break;case 3:if(vc=null,l=ga,ga=bc(t.containerInfo),Ht(t,e),ga=l,Bt(e),s&4&&a!==null&&a.memoizedState.isDehydrated)try{Js(t.containerInfo)}catch(oe){Be(e,e.return,oe)}Yo&&(Yo=!1,qm(e));break;case 4:s=ga,ga=bc(e.stateNode.containerInfo),Ht(t,e),Bt(e),ga=s;break;case 12:Ht(t,e),Bt(e);break;case 31:Ht(t,e),Bt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,sc(e,s)));break;case 13:Ht(t,e),Bt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ic=ft()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,sc(e,s)));break;case 22:l=e.memoizedState!==null;var z=a!==null&&a.memoizedState!==null,A=Xa,V=ot;if(Xa=A||l,ot=V||z,Ht(t,e),ot=V,Xa=A,Bt(e),s&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(a===null||z||Xa||ot||Pn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){z=a=t;try{if(i=z.stateNode,l)f=i.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{x=z.stateNode;var J=z.memoizedProps.style,O=J!=null&&J.hasOwnProperty("display")?J.display:null;x.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(oe){Be(z,z.return,oe)}}}else if(t.tag===6){if(a===null){z=t;try{z.stateNode.nodeValue=l?"":z.memoizedProps}catch(oe){Be(z,z.return,oe)}}}else if(t.tag===18){if(a===null){z=t;try{var B=z.stateNode;l?k0(B,!0):k0(z.stateNode,!1)}catch(oe){Be(z,z.return,oe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(a=s.retryQueue,a!==null&&(s.retryQueue=null,sc(e,a))));break;case 19:Ht(t,e),Bt(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,sc(e,s)));break;case 30:break;case 21:break;default:Ht(t,e),Bt(e)}}function Bt(e){var t=e.flags;if(t&2){try{for(var a,s=e.return;s!==null;){if(Dm(s)){a=s;break}s=s.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var l=a.stateNode,i=Lo(e);nc(e,i,l);break;case 5:var f=a.stateNode;a.flags&32&&(ps(f,""),a.flags&=-33);var x=Lo(e);nc(e,x,f);break;case 3:case 4:var z=a.stateNode.containerInfo,A=Lo(e);qo(e,A,z);break;default:throw Error(o(161))}}catch(V){Be(e,e.return,V)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function qm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;qm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Za(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Om(e,t.alternate,t),t=t.sibling}function Pn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:pn(4,t,t.return),Pn(t);break;case 1:wa(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&km(t,t.return,a),Pn(t);break;case 27:Yl(t.stateNode);case 26:case 5:wa(t,t.return),Pn(t);break;case 22:t.memoizedState===null&&Pn(t);break;case 30:Pn(t);break;default:Pn(t)}e=e.sibling}}function Ja(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,l=e,i=t,f=i.flags;switch(i.tag){case 0:case 11:case 15:Ja(l,i,a),Dl(4,i);break;case 1:if(Ja(l,i,a),s=i,l=s.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(A){Be(s,s.return,A)}if(s=i,l=s.updateQueue,l!==null){var x=s.stateNode;try{var z=l.shared.hiddenCallbacks;if(z!==null)for(l.shared.hiddenCallbacks=null,l=0;l<z.length;l++)bf(z[l],x)}catch(A){Be(s,s.return,A)}}a&&f&64&&Tm(i),Rl(i,i.return);break;case 27:Rm(i);case 26:case 5:Ja(l,i,a),a&&s===null&&f&4&&Am(i),Rl(i,i.return);break;case 12:Ja(l,i,a);break;case 31:Ja(l,i,a),a&&f&4&&Bm(l,i);break;case 13:Ja(l,i,a),a&&f&4&&Gm(l,i);break;case 22:i.memoizedState===null&&Ja(l,i,a),Rl(i,i.return);break;case 30:break;default:Ja(l,i,a)}t=t.sibling}}function Vo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&yl(a))}function Ko(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&yl(e))}function pa(e,t,a,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ym(e,t,a,s),t=t.sibling}function Ym(e,t,a,s){var l=t.flags;switch(t.tag){case 0:case 11:case 15:pa(e,t,a,s),l&2048&&Dl(9,t);break;case 1:pa(e,t,a,s);break;case 3:pa(e,t,a,s),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&yl(e)));break;case 12:if(l&2048){pa(e,t,a,s),e=t.stateNode;try{var i=t.memoizedProps,f=i.id,x=i.onPostCommit;typeof x=="function"&&x(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(z){Be(t,t.return,z)}}else pa(e,t,a,s);break;case 31:pa(e,t,a,s);break;case 13:pa(e,t,a,s);break;case 23:break;case 22:i=t.stateNode,f=t.alternate,t.memoizedState!==null?i._visibility&2?pa(e,t,a,s):Ml(e,t):i._visibility&2?pa(e,t,a,s):(i._visibility|=2,Hs(e,t,a,s,(t.subtreeFlags&10256)!==0||!1)),l&2048&&Vo(f,t);break;case 24:pa(e,t,a,s),l&2048&&Ko(t.alternate,t);break;default:pa(e,t,a,s)}}function Hs(e,t,a,s,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var i=e,f=t,x=a,z=s,A=f.flags;switch(f.tag){case 0:case 11:case 15:Hs(i,f,x,z,l),Dl(8,f);break;case 23:break;case 22:var V=f.stateNode;f.memoizedState!==null?V._visibility&2?Hs(i,f,x,z,l):Ml(i,f):(V._visibility|=2,Hs(i,f,x,z,l)),l&&A&2048&&Vo(f.alternate,f);break;case 24:Hs(i,f,x,z,l),l&&A&2048&&Ko(f.alternate,f);break;default:Hs(i,f,x,z,l)}t=t.sibling}}function Ml(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,s=t,l=s.flags;switch(s.tag){case 22:Ml(a,s),l&2048&&Vo(s.alternate,s);break;case 24:Ml(a,s),l&2048&&Ko(s.alternate,s);break;default:Ml(a,s)}t=t.sibling}}var Ol=8192;function Bs(e,t,a){if(e.subtreeFlags&Ol)for(e=e.child;e!==null;)Vm(e,t,a),e=e.sibling}function Vm(e,t,a){switch(e.tag){case 26:Bs(e,t,a),e.flags&Ol&&e.memoizedState!==null&&Wp(a,ga,e.memoizedState,e.memoizedProps);break;case 5:Bs(e,t,a);break;case 3:case 4:var s=ga;ga=bc(e.stateNode.containerInfo),Bs(e,t,a),ga=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Ol,Ol=16777216,Bs(e,t,a),Ol=s):Bs(e,t,a));break;default:Bs(e,t,a)}}function Km(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ul(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];gt=s,Qm(s,e)}Km(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xm(e),e=e.sibling}function Xm(e){switch(e.tag){case 0:case 11:case 15:Ul(e),e.flags&2048&&pn(9,e,e.return);break;case 3:Ul(e);break;case 12:Ul(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,lc(e)):Ul(e);break;default:Ul(e)}}function lc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var s=t[a];gt=s,Qm(s,e)}Km(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:pn(8,t,t.return),lc(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,lc(t));break;default:lc(t)}e=e.sibling}}function Qm(e,t){for(;gt!==null;){var a=gt;switch(a.tag){case 0:case 11:case 15:pn(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var s=a.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:yl(a.memoizedState.cache)}if(s=a.child,s!==null)s.return=a,gt=s;else e:for(a=e;gt!==null;){s=gt;var l=s.sibling,i=s.return;if(Um(s),s===a){gt=null;break e}if(l!==null){l.return=i,gt=l;break e}gt=i}}}var mp={getCacheForType:function(e){var t=jt(it),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return jt(it).controller.signal}},hp=typeof WeakMap=="function"?WeakMap:Map,Me=0,Ze=null,je=null,Se=0,He=0,Xt=null,bn=!1,Gs=!1,Xo=!1,Fa=0,tt=0,yn=0,es=0,Qo=0,Qt=0,Ls=0,Hl=null,Gt=null,Zo=!1,ic=0,Zm=0,cc=1/0,rc=null,vn=null,mt=0,Nn=null,qs=null,$a=0,Jo=0,Fo=null,Jm=null,Bl=0,$o=null;function Zt(){return(Me&2)!==0&&Se!==0?Se&-Se:y.T!==null?ad():ou()}function Fm(){if(Qt===0)if((Se&536870912)===0||Ee){var e=Oe;Oe<<=1,(Oe&3932160)===0&&(Oe=262144),Qt=e}else Qt=536870912;return e=Vt.current,e!==null&&(e.flags|=32),Qt}function Lt(e,t,a){(e===Ze&&(He===2||He===9)||e.cancelPendingCommit!==null)&&(Ys(e,0),jn(e,Se,Qt,!1)),ll(e,a),((Me&2)===0||e!==Ze)&&(e===Ze&&((Me&2)===0&&(es|=a),tt===4&&jn(e,Se,Qt,!1)),Sa(e))}function $m(e,t,a){if((Me&6)!==0)throw Error(o(327));var s=!a&&(t&127)===0&&(t&e.expiredLanes)===0||Ce(e,t),l=s?pp(e,t):Wo(e,t,!0),i=s;do{if(l===0){Gs&&!s&&jn(e,t,0,!1);break}else{if(a=e.current.alternate,i&&!xp(a)){l=Wo(e,t,!1),i=!1;continue}if(l===2){if(i=t,e.errorRecoveryDisabledLanes&i)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var x=e;l=Hl;var z=x.current.memoizedState.isDehydrated;if(z&&(Ys(x,f).flags|=256),f=Wo(x,f,!1),f!==2){if(Xo&&!z){x.errorRecoveryDisabledLanes|=i,es|=i,l=4;break e}i=Gt,Gt=l,i!==null&&(Gt===null?Gt=i:Gt.push.apply(Gt,i))}l=f}if(i=!1,l!==2)continue}}if(l===1){Ys(e,0),jn(e,t,0,!0);break}e:{switch(s=e,i=l,i){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:jn(s,t,Qt,!bn);break e;case 2:Gt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(l=ic+300-ft(),10<l)){if(jn(s,t,Qt,!bn),Fe(s,0,!0)!==0)break e;$a=t,s.timeoutHandle=C0(Im.bind(null,s,a,Gt,rc,Zo,t,Qt,es,Ls,bn,i,"Throttled",-0,0),l);break e}Im(s,a,Gt,rc,Zo,t,Qt,es,Ls,bn,i,null,-0,0)}}break}while(!0);Sa(e)}function Im(e,t,a,s,l,i,f,x,z,A,V,J,O,B){if(e.timeoutHandle=-1,J=t.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Oa},Vm(t,i,J);var oe=(i&62914560)===i?ic-ft():(i&4194048)===i?Zm-ft():0;if(oe=Pp(J,oe),oe!==null){$a=i,e.cancelPendingCommit=oe(l0.bind(null,e,t,i,a,s,l,f,x,z,V,J,null,O,B)),jn(e,i,f,!A);return}}l0(e,t,i,a,s,l,f,x,z)}function xp(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var s=0;s<a.length;s++){var l=a[s],i=l.getSnapshot;l=l.value;try{if(!qt(i(),l))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jn(e,t,a,s){t&=~Qo,t&=~es,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var l=t;0<l;){var i=31-Et(l),f=1<<i;s[i]=-1,l&=~f}a!==0&&iu(e,a,t)}function oc(){return(Me&6)===0?(Gl(0),!1):!0}function Io(){if(je!==null){if(He===0)var e=je.return;else e=je,Ga=Xn=null,mo(e),Ds=null,Nl=0,e=je;for(;e!==null;)Em(e.alternate,e),e=e.return;je=null}}function Ys(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Op(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),$a=0,Io(),Ze=e,je=a=Ha(e.current,null),Se=t,He=0,Xt=null,bn=!1,Gs=Ce(e,t),Xo=!1,Ls=Qt=Qo=es=yn=tt=0,Gt=Hl=null,Zo=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var l=31-Et(s),i=1<<l;t|=e[l],s&=~i}return Fa=t,ki(),a}function Wm(e,t){be=null,y.H=Tl,t===As||t===Bi?(t=hf(),He=3):t===eo?(t=hf(),He=4):He=t===To?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Xt=t,je===null&&(tt=1,Wi(e,ta(t,e.current)))}function Pm(){var e=Vt.current;return e===null?!0:(Se&4194048)===Se?la===null:(Se&62914560)===Se||(Se&536870912)!==0?e===la:!1}function e0(){var e=y.H;return y.H=Tl,e===null?Tl:e}function t0(){var e=y.A;return y.A=mp,e}function dc(){tt=4,bn||(Se&4194048)!==Se&&Vt.current!==null||(Gs=!0),(yn&134217727)===0&&(es&134217727)===0||Ze===null||jn(Ze,Se,Qt,!1)}function Wo(e,t,a){var s=Me;Me|=2;var l=e0(),i=t0();(Ze!==e||Se!==t)&&(rc=null,Ys(e,t)),t=!1;var f=tt;e:do try{if(He!==0&&je!==null){var x=je,z=Xt;switch(He){case 8:Io(),f=6;break e;case 3:case 2:case 9:case 6:Vt.current===null&&(t=!0);var A=He;if(He=0,Xt=null,Vs(e,x,z,A),a&&Gs){f=0;break e}break;default:A=He,He=0,Xt=null,Vs(e,x,z,A)}}gp(),f=tt;break}catch(V){Wm(e,V)}while(!0);return t&&e.shellSuspendCounter++,Ga=Xn=null,Me=s,y.H=l,y.A=i,je===null&&(Ze=null,Se=0,ki()),f}function gp(){for(;je!==null;)a0(je)}function pp(e,t){var a=Me;Me|=2;var s=e0(),l=t0();Ze!==e||Se!==t?(rc=null,cc=ft()+500,Ys(e,t)):Gs=Ce(e,t);e:do try{if(He!==0&&je!==null){t=je;var i=Xt;t:switch(He){case 1:He=0,Xt=null,Vs(e,t,i,1);break;case 2:case 9:if(ff(i)){He=0,Xt=null,n0(t);break}t=function(){He!==2&&He!==9||Ze!==e||(He=7),Sa(e)},i.then(t,t);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:ff(i)?(He=0,Xt=null,n0(t)):(He=0,Xt=null,Vs(e,t,i,7));break;case 5:var f=null;switch(je.tag){case 26:f=je.memoizedState;case 5:case 27:var x=je;if(f?Y0(f):x.stateNode.complete){He=0,Xt=null;var z=x.sibling;if(z!==null)je=z;else{var A=x.return;A!==null?(je=A,uc(A)):je=null}break t}}He=0,Xt=null,Vs(e,t,i,5);break;case 6:He=0,Xt=null,Vs(e,t,i,6);break;case 8:Io(),tt=6;break e;default:throw Error(o(462))}}bp();break}catch(V){Wm(e,V)}while(!0);return Ga=Xn=null,y.H=s,y.A=l,Me=a,je!==null?0:(Ze=null,Se=0,ki(),tt)}function bp(){for(;je!==null&&!sl();)a0(je)}function a0(e){var t=_m(e.alternate,e,Fa);e.memoizedProps=e.pendingProps,t===null?uc(e):je=t}function n0(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=vm(a,t,t.pendingProps,t.type,void 0,Se);break;case 11:t=vm(a,t,t.pendingProps,t.type.render,t.ref,Se);break;case 5:mo(t);default:Em(a,t),t=je=ef(t,Fa),t=_m(a,t,Fa)}e.memoizedProps=e.pendingProps,t===null?uc(e):je=t}function Vs(e,t,a,s){Ga=Xn=null,mo(t),Ds=null,Nl=0;var l=t.return;try{if(ip(e,l,t,a,Se)){tt=1,Wi(e,ta(a,e.current)),je=null;return}}catch(i){if(l!==null)throw je=l,i;tt=1,Wi(e,ta(a,e.current)),je=null;return}t.flags&32768?(Ee||s===1?e=!0:Gs||(Se&536870912)!==0?e=!1:(bn=e=!0,(s===2||s===9||s===3||s===6)&&(s=Vt.current,s!==null&&s.tag===13&&(s.flags|=16384))),s0(t,e)):uc(t)}function uc(e){var t=e;do{if((t.flags&32768)!==0){s0(t,bn);return}e=t.return;var a=op(t.alternate,t,Fa);if(a!==null){je=a;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);tt===0&&(tt=5)}function s0(e,t){do{var a=dp(e.alternate,e);if(a!==null){a.flags&=32767,je=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){je=e;return}je=e=a}while(e!==null);tt=6,je=null}function l0(e,t,a,s,l,i,f,x,z){e.cancelPendingCommit=null;do fc();while(mt!==0);if((Me&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,i|=Gr,Ix(e,a,i,f,x,z),e===Ze&&(je=Ze=null,Se=0),qs=t,Nn=e,$a=a,Jo=i,Fo=l,Jm=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,jp(ds,function(){return d0(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=y.T,y.T=null,l=H.p,H.p=2,f=Me,Me|=4;try{up(e,t,a)}finally{Me=f,H.p=l,y.T=s}}mt=1,i0(),c0(),r0()}}function i0(){if(mt===1){mt=0;var e=Nn,t=qs,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=y.T,y.T=null;var s=H.p;H.p=2;var l=Me;Me|=4;try{Lm(t,e);var i=dd,f=Xu(e.containerInfo),x=i.focusedElem,z=i.selectionRange;if(f!==x&&x&&x.ownerDocument&&Ku(x.ownerDocument.documentElement,x)){if(z!==null&&Mr(x)){var A=z.start,V=z.end;if(V===void 0&&(V=A),"selectionStart"in x)x.selectionStart=A,x.selectionEnd=Math.min(V,x.value.length);else{var J=x.ownerDocument||document,O=J&&J.defaultView||window;if(O.getSelection){var B=O.getSelection(),oe=x.textContent.length,ge=Math.min(z.start,oe),Ke=z.end===void 0?ge:Math.min(z.end,oe);!B.extend&&ge>Ke&&(f=Ke,Ke=ge,ge=f);var C=Vu(x,ge),S=Vu(x,Ke);if(C&&S&&(B.rangeCount!==1||B.anchorNode!==C.node||B.anchorOffset!==C.offset||B.focusNode!==S.node||B.focusOffset!==S.offset)){var k=J.createRange();k.setStart(C.node,C.offset),B.removeAllRanges(),ge>Ke?(B.addRange(k),B.extend(S.node,S.offset)):(k.setEnd(S.node,S.offset),B.addRange(k))}}}}for(J=[],B=x;B=B.parentNode;)B.nodeType===1&&J.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<J.length;x++){var Z=J[x];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}wc=!!od,dd=od=null}finally{Me=l,H.p=s,y.T=a}}e.current=t,mt=2}}function c0(){if(mt===2){mt=0;var e=Nn,t=qs,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=y.T,y.T=null;var s=H.p;H.p=2;var l=Me;Me|=4;try{Om(e,t.alternate,t)}finally{Me=l,H.p=s,y.T=a}}mt=3}}function r0(){if(mt===4||mt===3){mt=0,rr();var e=Nn,t=qs,a=$a,s=Jm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?mt=5:(mt=0,qs=Nn=null,o0(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(vn=null),xr(a),t=t.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Hn,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=y.T,l=H.p,H.p=2,y.T=null;try{for(var i=e.onRecoverableError,f=0;f<s.length;f++){var x=s[f];i(x.value,{componentStack:x.stack})}}finally{y.T=t,H.p=l}}($a&3)!==0&&fc(),Sa(e),l=e.pendingLanes,(a&261930)!==0&&(l&42)!==0?e===$o?Bl++:(Bl=0,$o=e):Bl=0,Gl(0)}}function o0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,yl(t)))}function fc(){return i0(),c0(),r0(),d0()}function d0(){if(mt!==5)return!1;var e=Nn,t=Jo;Jo=0;var a=xr($a),s=y.T,l=H.p;try{H.p=32>a?32:a,y.T=null,a=Fo,Fo=null;var i=Nn,f=$a;if(mt=0,qs=Nn=null,$a=0,(Me&6)!==0)throw Error(o(331));var x=Me;if(Me|=4,Xm(i.current),Ym(i,i.current,f,a),Me=x,Gl(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Hn,i)}catch{}return!0}finally{H.p=l,y.T=s,o0(e,t)}}function u0(e,t,a){t=ta(a,t),t=Eo(e.stateNode,t,2),e=hn(e,t,2),e!==null&&(ll(e,2),Sa(e))}function Be(e,t,a){if(e.tag===3)u0(e,e,a);else for(;t!==null;){if(t.tag===3){u0(t,e,a);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(vn===null||!vn.has(s))){e=ta(a,e),a=fm(2),s=hn(t,a,2),s!==null&&(mm(a,s,t,e),ll(s,2),Sa(s));break}}t=t.return}}function Po(e,t,a){var s=e.pingCache;if(s===null){s=e.pingCache=new hp;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(a)||(Xo=!0,l.add(a),e=yp.bind(null,e,t,a),t.then(e,e))}function yp(e,t,a){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ze===e&&(Se&a)===a&&(tt===4||tt===3&&(Se&62914560)===Se&&300>ft()-ic?(Me&2)===0&&Ys(e,0):Qo|=a,Ls===Se&&(Ls=0)),Sa(e)}function f0(e,t){t===0&&(t=bi()),e=Yn(e,t),e!==null&&(ll(e,t),Sa(e))}function vp(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),f0(e,a)}function Np(e,t){var a=0;switch(e.tag){case 31:case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(a=l.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(o(314))}s!==null&&s.delete(t),f0(e,a)}function jp(e,t){return Un(e,t)}var mc=null,Ks=null,ed=!1,hc=!1,td=!1,zn=0;function Sa(e){e!==Ks&&e.next===null&&(Ks===null?mc=Ks=e:Ks=Ks.next=e),hc=!0,ed||(ed=!0,wp())}function Gl(e,t){if(!td&&hc){td=!0;do for(var a=!1,s=mc;s!==null;){if(e!==0){var l=s.pendingLanes;if(l===0)var i=0;else{var f=s.suspendedLanes,x=s.pingedLanes;i=(1<<31-Et(42|e)+1)-1,i&=l&~(f&~x),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(a=!0,g0(s,i))}else i=Se,i=Fe(s,s===Ze?i:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(i&3)===0||Ce(s,i)||(a=!0,g0(s,i));s=s.next}while(a);td=!1}}function zp(){m0()}function m0(){hc=ed=!1;var e=0;zn!==0&&Mp()&&(e=zn);for(var t=ft(),a=null,s=mc;s!==null;){var l=s.next,i=h0(s,t);i===0?(s.next=null,a===null?mc=l:a.next=l,l===null&&(Ks=a)):(a=s,(e!==0||(i&3)!==0)&&(hc=!0)),s=l}mt!==0&&mt!==5||Gl(e),zn!==0&&(zn=0)}function h0(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var f=31-Et(i),x=1<<f,z=l[f];z===-1?((x&a)===0||(x&s)!==0)&&(l[f]=Qe(x,t)):z<=t&&(e.expiredLanes|=x),i&=~x}if(t=Ze,a=Se,a=Fe(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,a===0||e===t&&(He===2||He===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&nn(s),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Ce(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(s!==null&&nn(s),xr(a)){case 2:case 8:a=hi;break;case 32:a=ds;break;case 268435456:a=xi;break;default:a=ds}return s=x0.bind(null,e),a=Un(a,s),e.callbackPriority=t,e.callbackNode=a,t}return s!==null&&s!==null&&nn(s),e.callbackPriority=2,e.callbackNode=null,2}function x0(e,t){if(mt!==0&&mt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(fc()&&e.callbackNode!==a)return null;var s=Se;return s=Fe(e,e===Ze?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:($m(e,s,t),h0(e,ft()),e.callbackNode!=null&&e.callbackNode===a?x0.bind(null,e):null)}function g0(e,t){if(fc())return null;$m(e,t,!0)}function wp(){Up(function(){(Me&6)!==0?Un(sn,zp):m0()})}function ad(){if(zn===0){var e=Ts;e===0&&(e=ce,ce<<=1,(ce&261888)===0&&(ce=256)),zn=e}return zn}function p0(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ji(""+e)}function b0(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function Sp(e,t,a,s,l){if(t==="submit"&&a&&a.stateNode===l){var i=p0((l[Mt]||null).action),f=s.submitter;f&&(t=(t=f[Mt]||null)?p0(t.formAction):f.getAttribute("formAction"),t!==null&&(i=t,f=null));var x=new _i("action","action",null,s,l);e.push({event:x,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(zn!==0){var z=f?b0(l,f):new FormData(l);jo(a,{pending:!0,data:z,method:l.method,action:i},null,z)}}else typeof i=="function"&&(x.preventDefault(),z=f?b0(l,f):new FormData(l),jo(a,{pending:!0,data:z,method:l.method,action:i},i,z))},currentTarget:l}]})}}for(var nd=0;nd<Br.length;nd++){var sd=Br[nd],_p=sd.toLowerCase(),Cp=sd[0].toUpperCase()+sd.slice(1);xa(_p,"on"+Cp)}xa(Ju,"onAnimationEnd"),xa(Fu,"onAnimationIteration"),xa($u,"onAnimationStart"),xa("dblclick","onDoubleClick"),xa("focusin","onFocus"),xa("focusout","onBlur"),xa(Vg,"onTransitionRun"),xa(Kg,"onTransitionStart"),xa(Xg,"onTransitionCancel"),xa(Iu,"onTransitionEnd"),xs("onMouseEnter",["mouseout","mouseover"]),xs("onMouseLeave",["mouseout","mouseover"]),xs("onPointerEnter",["pointerout","pointerover"]),xs("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ep=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ll));function y0(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var s=e[a],l=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var f=s.length-1;0<=f;f--){var x=s[f],z=x.instance,A=x.currentTarget;if(x=x.listener,z!==i&&l.isPropagationStopped())break e;i=x,l.currentTarget=A;try{i(l)}catch(V){Ti(V)}l.currentTarget=null,i=z}else for(f=0;f<s.length;f++){if(x=s[f],z=x.instance,A=x.currentTarget,x=x.listener,z!==i&&l.isPropagationStopped())break e;i=x,l.currentTarget=A;try{i(l)}catch(V){Ti(V)}l.currentTarget=null,i=z}}}}function ze(e,t){var a=t[gr];a===void 0&&(a=t[gr]=new Set);var s=e+"__bubble";a.has(s)||(v0(t,e,2,!1),a.add(s))}function ld(e,t,a){var s=0;t&&(s|=4),v0(a,e,s,t)}var xc="_reactListening"+Math.random().toString(36).slice(2);function id(e){if(!e[xc]){e[xc]=!0,fu.forEach(function(a){a!=="selectionchange"&&(Ep.has(a)||ld(a,!1,e),ld(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xc]||(t[xc]=!0,ld("selectionchange",!1,t))}}function v0(e,t,a,s){switch(F0(t)){case 2:var l=ab;break;case 8:l=nb;break;default:l=Nd}a=l.bind(null,t,a,e),l=void 0,!Sr||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,a,{capture:!0,passive:l}):e.addEventListener(t,a,!0):l!==void 0?e.addEventListener(t,a,{passive:l}):e.addEventListener(t,a,!1)}function cd(e,t,a,s,l){var i=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var f=s.tag;if(f===3||f===4){var x=s.stateNode.containerInfo;if(x===l)break;if(f===4)for(f=s.return;f!==null;){var z=f.tag;if((z===3||z===4)&&f.stateNode.containerInfo===l)return;f=f.return}for(;x!==null;){if(f=fs(x),f===null)return;if(z=f.tag,z===5||z===6||z===26||z===27){s=i=f;continue e}x=x.parentNode}}s=s.return}wu(function(){var A=i,V=zr(a),J=[];e:{var O=Wu.get(e);if(O!==void 0){var B=_i,oe=e;switch(e){case"keypress":if(wi(a)===0)break e;case"keydown":case"keyup":B=Ng;break;case"focusin":oe="focus",B=Tr;break;case"focusout":oe="blur",B=Tr;break;case"beforeblur":case"afterblur":B=Tr;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Cu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=og;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=wg;break;case Ju:case Fu:case $u:B=fg;break;case Iu:B=_g;break;case"scroll":case"scrollend":B=cg;break;case"wheel":B=Eg;break;case"copy":case"cut":case"paste":B=hg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Tu;break;case"toggle":case"beforetoggle":B=kg}var ge=(t&4)!==0,Ke=!ge&&(e==="scroll"||e==="scrollend"),C=ge?O!==null?O+"Capture":null:O;ge=[];for(var S=A,k;S!==null;){var Z=S;if(k=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||k===null||C===null||(Z=rl(S,C),Z!=null&&ge.push(ql(S,Z,k))),Ke)break;S=S.return}0<ge.length&&(O=new B(O,oe,null,a,V),J.push({event:O,listeners:ge}))}}if((t&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",O&&a!==jr&&(oe=a.relatedTarget||a.fromElement)&&(fs(oe)||oe[us]))break e;if((B||O)&&(O=V.window===V?V:(O=V.ownerDocument)?O.defaultView||O.parentWindow:window,B?(oe=a.relatedTarget||a.toElement,B=A,oe=oe?fs(oe):null,oe!==null&&(Ke=m(oe),ge=oe.tag,oe!==Ke||ge!==5&&ge!==27&&ge!==6)&&(oe=null)):(B=null,oe=A),B!==oe)){if(ge=Cu,Z="onMouseLeave",C="onMouseEnter",S="mouse",(e==="pointerout"||e==="pointerover")&&(ge=Tu,Z="onPointerLeave",C="onPointerEnter",S="pointer"),Ke=B==null?O:cl(B),k=oe==null?O:cl(oe),O=new ge(Z,S+"leave",B,a,V),O.target=Ke,O.relatedTarget=k,Z=null,fs(V)===A&&(ge=new ge(C,S+"enter",oe,a,V),ge.target=k,ge.relatedTarget=Ke,Z=ge),Ke=Z,B&&oe)t:{for(ge=Tp,C=B,S=oe,k=0,Z=C;Z;Z=ge(Z))k++;Z=0;for(var xe=S;xe;xe=ge(xe))Z++;for(;0<k-Z;)C=ge(C),k--;for(;0<Z-k;)S=ge(S),Z--;for(;k--;){if(C===S||S!==null&&C===S.alternate){ge=C;break t}C=ge(C),S=ge(S)}ge=null}else ge=null;B!==null&&N0(J,O,B,ge,!1),oe!==null&&Ke!==null&&N0(J,Ke,oe,ge,!0)}}e:{if(O=A?cl(A):window,B=O.nodeName&&O.nodeName.toLowerCase(),B==="select"||B==="input"&&O.type==="file")var ke=Hu;else if(Ou(O))if(Bu)ke=Lg;else{ke=Bg;var fe=Hg}else B=O.nodeName,!B||B.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?A&&Nr(A.elementType)&&(ke=Hu):ke=Gg;if(ke&&(ke=ke(e,A))){Uu(J,ke,a,V);break e}fe&&fe(e,O,A),e==="focusout"&&A&&O.type==="number"&&A.memoizedProps.value!=null&&vr(O,"number",O.value)}switch(fe=A?cl(A):window,e){case"focusin":(Ou(fe)||fe.contentEditable==="true")&&(Ns=fe,Or=A,gl=null);break;case"focusout":gl=Or=Ns=null;break;case"mousedown":Ur=!0;break;case"contextmenu":case"mouseup":case"dragend":Ur=!1,Qu(J,a,V);break;case"selectionchange":if(Yg)break;case"keydown":case"keyup":Qu(J,a,V)}var ve;if(Ar)e:{switch(e){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else vs?Ru(e,a)&&(_e="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(_e="onCompositionStart");_e&&(ku&&a.locale!=="ko"&&(vs||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&vs&&(ve=Su()):(cn=V,_r="value"in cn?cn.value:cn.textContent,vs=!0)),fe=gc(A,_e),0<fe.length&&(_e=new Eu(_e,e,null,a,V),J.push({event:_e,listeners:fe}),ve?_e.data=ve:(ve=Mu(a),ve!==null&&(_e.data=ve)))),(ve=Dg?Rg(e,a):Mg(e,a))&&(_e=gc(A,"onBeforeInput"),0<_e.length&&(fe=new Eu("onBeforeInput","beforeinput",null,a,V),J.push({event:fe,listeners:_e}),fe.data=ve)),Sp(J,e,A,a,V)}y0(J,t)})}function ql(e,t,a){return{instance:e,listener:t,currentTarget:a}}function gc(e,t){for(var a=t+"Capture",s=[];e!==null;){var l=e,i=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||i===null||(l=rl(e,a),l!=null&&s.unshift(ql(e,l,i)),l=rl(e,t),l!=null&&s.push(ql(e,l,i))),e.tag===3)return s;e=e.return}return[]}function Tp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function N0(e,t,a,s,l){for(var i=t._reactName,f=[];a!==null&&a!==s;){var x=a,z=x.alternate,A=x.stateNode;if(x=x.tag,z!==null&&z===s)break;x!==5&&x!==26&&x!==27||A===null||(z=A,l?(A=rl(a,i),A!=null&&f.unshift(ql(a,A,z))):l||(A=rl(a,i),A!=null&&f.push(ql(a,A,z)))),a=a.return}f.length!==0&&e.push({event:t,listeners:f})}var kp=/\r\n?/g,Ap=/\u0000|\uFFFD/g;function j0(e){return(typeof e=="string"?e:""+e).replace(kp,`
`).replace(Ap,"")}function z0(e,t){return t=j0(t),j0(e)===t}function Ve(e,t,a,s,l,i){switch(a){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||ps(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&ps(e,""+s);break;case"className":vi(e,"class",s);break;case"tabIndex":vi(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":vi(e,a,s);break;case"style":ju(e,s,i);break;case"data":if(t!=="object"){vi(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=ji(""+s),e.setAttribute(a,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(a==="formAction"?(t!=="input"&&Ve(e,t,"name",l.name,l,null),Ve(e,t,"formEncType",l.formEncType,l,null),Ve(e,t,"formMethod",l.formMethod,l,null),Ve(e,t,"formTarget",l.formTarget,l,null)):(Ve(e,t,"encType",l.encType,l,null),Ve(e,t,"method",l.method,l,null),Ve(e,t,"target",l.target,l,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(a);break}s=ji(""+s),e.setAttribute(a,s);break;case"onClick":s!=null&&(e.onclick=Oa);break;case"onScroll":s!=null&&ze("scroll",e);break;case"onScrollEnd":s!=null&&ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(a=s.__html,a!=null){if(l.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}a=ji(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""+s):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":s===!0?e.setAttribute(a,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(a,s):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(a,s):e.removeAttribute(a);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(a):e.setAttribute(a,s);break;case"popover":ze("beforetoggle",e),ze("toggle",e),yi(e,"popover",s);break;case"xlinkActuate":Ma(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Ma(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Ma(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Ma(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Ma(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Ma(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Ma(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Ma(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Ma(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":yi(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=lg.get(a)||a,yi(e,a,s))}}function rd(e,t,a,s,l,i){switch(a){case"style":ju(e,s,i);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(o(61));if(a=s.__html,a!=null){if(l.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof s=="string"?ps(e,s):(typeof s=="number"||typeof s=="bigint")&&ps(e,""+s);break;case"onScroll":s!=null&&ze("scroll",e);break;case"onScrollEnd":s!=null&&ze("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Oa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mu.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),t=a.slice(2,l?a.length-7:void 0),i=e[Mt]||null,i=i!=null?i[a]:null,typeof i=="function"&&e.removeEventListener(t,i,l),typeof s=="function")){typeof i!="function"&&i!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,s,l);break e}a in e?e[a]=s:s===!0?e.setAttribute(a,""):yi(e,a,s)}}}function wt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",e),ze("load",e);var s=!1,l=!1,i;for(i in a)if(a.hasOwnProperty(i)){var f=a[i];if(f!=null)switch(i){case"src":s=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ve(e,t,i,f,a,null)}}l&&Ve(e,t,"srcSet",a.srcSet,a,null),s&&Ve(e,t,"src",a.src,a,null);return;case"input":ze("invalid",e);var x=i=f=l=null,z=null,A=null;for(s in a)if(a.hasOwnProperty(s)){var V=a[s];if(V!=null)switch(s){case"name":l=V;break;case"type":f=V;break;case"checked":z=V;break;case"defaultChecked":A=V;break;case"value":i=V;break;case"defaultValue":x=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,t));break;default:Ve(e,t,s,V,a,null)}}bu(e,i,x,z,A,f,l,!1);return;case"select":ze("invalid",e),s=f=i=null;for(l in a)if(a.hasOwnProperty(l)&&(x=a[l],x!=null))switch(l){case"value":i=x;break;case"defaultValue":f=x;break;case"multiple":s=x;default:Ve(e,t,l,x,a,null)}t=i,a=f,e.multiple=!!s,t!=null?gs(e,!!s,t,!1):a!=null&&gs(e,!!s,a,!0);return;case"textarea":ze("invalid",e),i=l=s=null;for(f in a)if(a.hasOwnProperty(f)&&(x=a[f],x!=null))switch(f){case"value":s=x;break;case"defaultValue":l=x;break;case"children":i=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(o(91));break;default:Ve(e,t,f,x,a,null)}vu(e,s,l,i);return;case"option":for(z in a)if(a.hasOwnProperty(z)&&(s=a[z],s!=null))switch(z){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ve(e,t,z,s,a,null)}return;case"dialog":ze("beforetoggle",e),ze("toggle",e),ze("cancel",e),ze("close",e);break;case"iframe":case"object":ze("load",e);break;case"video":case"audio":for(s=0;s<Ll.length;s++)ze(Ll[s],e);break;case"image":ze("error",e),ze("load",e);break;case"details":ze("toggle",e);break;case"embed":case"source":case"link":ze("error",e),ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(A in a)if(a.hasOwnProperty(A)&&(s=a[A],s!=null))switch(A){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ve(e,t,A,s,a,null)}return;default:if(Nr(t)){for(V in a)a.hasOwnProperty(V)&&(s=a[V],s!==void 0&&rd(e,t,V,s,a,void 0));return}}for(x in a)a.hasOwnProperty(x)&&(s=a[x],s!=null&&Ve(e,t,x,s,a,null))}function Dp(e,t,a,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,i=null,f=null,x=null,z=null,A=null,V=null;for(B in a){var J=a[B];if(a.hasOwnProperty(B)&&J!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":z=J;default:s.hasOwnProperty(B)||Ve(e,t,B,null,s,J)}}for(var O in s){var B=s[O];if(J=a[O],s.hasOwnProperty(O)&&(B!=null||J!=null))switch(O){case"type":i=B;break;case"name":l=B;break;case"checked":A=B;break;case"defaultChecked":V=B;break;case"value":f=B;break;case"defaultValue":x=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(o(137,t));break;default:B!==J&&Ve(e,t,O,B,s,J)}}yr(e,f,x,z,A,V,i,l);return;case"select":B=f=x=O=null;for(i in a)if(z=a[i],a.hasOwnProperty(i)&&z!=null)switch(i){case"value":break;case"multiple":B=z;default:s.hasOwnProperty(i)||Ve(e,t,i,null,s,z)}for(l in s)if(i=s[l],z=a[l],s.hasOwnProperty(l)&&(i!=null||z!=null))switch(l){case"value":O=i;break;case"defaultValue":x=i;break;case"multiple":f=i;default:i!==z&&Ve(e,t,l,i,s,z)}t=x,a=f,s=B,O!=null?gs(e,!!a,O,!1):!!s!=!!a&&(t!=null?gs(e,!!a,t,!0):gs(e,!!a,a?[]:"",!1));return;case"textarea":B=O=null;for(x in a)if(l=a[x],a.hasOwnProperty(x)&&l!=null&&!s.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:Ve(e,t,x,null,s,l)}for(f in s)if(l=s[f],i=a[f],s.hasOwnProperty(f)&&(l!=null||i!=null))switch(f){case"value":O=l;break;case"defaultValue":B=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(o(91));break;default:l!==i&&Ve(e,t,f,l,s,i)}yu(e,O,B);return;case"option":for(var oe in a)if(O=a[oe],a.hasOwnProperty(oe)&&O!=null&&!s.hasOwnProperty(oe))switch(oe){case"selected":e.selected=!1;break;default:Ve(e,t,oe,null,s,O)}for(z in s)if(O=s[z],B=a[z],s.hasOwnProperty(z)&&O!==B&&(O!=null||B!=null))switch(z){case"selected":e.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Ve(e,t,z,O,s,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ge in a)O=a[ge],a.hasOwnProperty(ge)&&O!=null&&!s.hasOwnProperty(ge)&&Ve(e,t,ge,null,s,O);for(A in s)if(O=s[A],B=a[A],s.hasOwnProperty(A)&&O!==B&&(O!=null||B!=null))switch(A){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(o(137,t));break;default:Ve(e,t,A,O,s,B)}return;default:if(Nr(t)){for(var Ke in a)O=a[Ke],a.hasOwnProperty(Ke)&&O!==void 0&&!s.hasOwnProperty(Ke)&&rd(e,t,Ke,void 0,s,O);for(V in s)O=s[V],B=a[V],!s.hasOwnProperty(V)||O===B||O===void 0&&B===void 0||rd(e,t,V,O,s,B);return}}for(var C in a)O=a[C],a.hasOwnProperty(C)&&O!=null&&!s.hasOwnProperty(C)&&Ve(e,t,C,null,s,O);for(J in s)O=s[J],B=a[J],!s.hasOwnProperty(J)||O===B||O==null&&B==null||Ve(e,t,J,O,s,B)}function w0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),s=0;s<a.length;s++){var l=a[s],i=l.transferSize,f=l.initiatorType,x=l.duration;if(i&&x&&w0(f)){for(f=0,x=l.responseEnd,s+=1;s<a.length;s++){var z=a[s],A=z.startTime;if(A>x)break;var V=z.transferSize,J=z.initiatorType;V&&w0(J)&&(z=z.responseEnd,f+=V*(z<x?1:(x-A)/(z-A)))}if(--s,t+=8*(i+f)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var od=null,dd=null;function pc(e){return e.nodeType===9?e:e.ownerDocument}function S0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function _0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function ud(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var fd=null;function Mp(){var e=window.event;return e&&e.type==="popstate"?e===fd?!1:(fd=e,!0):(fd=null,!1)}var C0=typeof setTimeout=="function"?setTimeout:void 0,Op=typeof clearTimeout=="function"?clearTimeout:void 0,E0=typeof Promise=="function"?Promise:void 0,Up=typeof queueMicrotask=="function"?queueMicrotask:typeof E0<"u"?function(e){return E0.resolve(null).then(e).catch(Hp)}:C0;function Hp(e){setTimeout(function(){throw e})}function wn(e){return e==="head"}function T0(e,t){var a=t,s=0;do{var l=a.nextSibling;if(e.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"||a==="/&"){if(s===0){e.removeChild(l),Js(t);return}s--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")s++;else if(a==="html")Yl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Yl(a);for(var i=a.firstChild;i;){var f=i.nextSibling,x=i.nodeName;i[il]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&i.rel.toLowerCase()==="stylesheet"||a.removeChild(i),i=f}}else a==="body"&&Yl(e.ownerDocument.body);a=l}while(a);Js(t)}function k0(e,t){var a=e;e=0;do{var s=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),s&&s.nodeType===8)if(a=s.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=s}while(a)}function md(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":md(a),pr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Bp(e,t,a,s){for(;e.nodeType===1;){var l=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[il])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=ia(e.nextSibling),e===null)break}return null}function Gp(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ia(e.nextSibling),e===null))return null;return e}function A0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=ia(e.nextSibling),e===null))return null;return e}function hd(e){return e.data==="$?"||e.data==="$~"}function xd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Lp(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var s=function(){t(),a.removeEventListener("DOMContentLoaded",s)};a.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function ia(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var gd=null;function D0(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return ia(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function R0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function M0(e,t,a){switch(t=pc(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Yl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);pr(e)}var ca=new Map,O0=new Set;function bc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ia=H.d;H.d={f:qp,r:Yp,D:Vp,C:Kp,L:Xp,m:Qp,X:Jp,S:Zp,M:Fp};function qp(){var e=Ia.f(),t=oc();return e||t}function Yp(e){var t=ms(e);t!==null&&t.tag===5&&t.type==="form"?Wf(t):Ia.r(e)}var Xs=typeof document>"u"?null:document;function U0(e,t,a){var s=Xs;if(s&&typeof t=="string"&&t){var l=Pt(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),O0.has(l)||(O0.add(l),e={rel:e,crossOrigin:a,href:t},s.querySelector(l)===null&&(t=s.createElement("link"),wt(t,"link",e),xt(t),s.head.appendChild(t)))}}function Vp(e){Ia.D(e),U0("dns-prefetch",e,null)}function Kp(e,t){Ia.C(e,t),U0("preconnect",e,t)}function Xp(e,t,a){Ia.L(e,t,a);var s=Xs;if(s&&e&&t){var l='link[rel="preload"][as="'+Pt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+Pt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+Pt(a.imageSizes)+'"]')):l+='[href="'+Pt(e)+'"]';var i=l;switch(t){case"style":i=Qs(e);break;case"script":i=Zs(e)}ca.has(i)||(e=N({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),ca.set(i,e),s.querySelector(l)!==null||t==="style"&&s.querySelector(Vl(i))||t==="script"&&s.querySelector(Kl(i))||(t=s.createElement("link"),wt(t,"link",e),xt(t),s.head.appendChild(t)))}}function Qp(e,t){Ia.m(e,t);var a=Xs;if(a&&e){var s=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Pt(s)+'"][href="'+Pt(e)+'"]',i=l;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Zs(e)}if(!ca.has(i)&&(e=N({rel:"modulepreload",href:e},t),ca.set(i,e),a.querySelector(l)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Kl(i)))return}s=a.createElement("link"),wt(s,"link",e),xt(s),a.head.appendChild(s)}}}function Zp(e,t,a){Ia.S(e,t,a);var s=Xs;if(s&&e){var l=hs(s).hoistableStyles,i=Qs(e);t=t||"default";var f=l.get(i);if(!f){var x={loading:0,preload:null};if(f=s.querySelector(Vl(i)))x.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":t},a),(a=ca.get(i))&&pd(e,a);var z=f=s.createElement("link");xt(z),wt(z,"link",e),z._p=new Promise(function(A,V){z.onload=A,z.onerror=V}),z.addEventListener("load",function(){x.loading|=1}),z.addEventListener("error",function(){x.loading|=2}),x.loading|=4,yc(f,t,s)}f={type:"stylesheet",instance:f,count:1,state:x},l.set(i,f)}}}function Jp(e,t){Ia.X(e,t);var a=Xs;if(a&&e){var s=hs(a).hoistableScripts,l=Zs(e),i=s.get(l);i||(i=a.querySelector(Kl(l)),i||(e=N({src:e,async:!0},t),(t=ca.get(l))&&bd(e,t),i=a.createElement("script"),xt(i),wt(i,"link",e),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(l,i))}}function Fp(e,t){Ia.M(e,t);var a=Xs;if(a&&e){var s=hs(a).hoistableScripts,l=Zs(e),i=s.get(l);i||(i=a.querySelector(Kl(l)),i||(e=N({src:e,async:!0,type:"module"},t),(t=ca.get(l))&&bd(e,t),i=a.createElement("script"),xt(i),wt(i,"link",e),a.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},s.set(l,i))}}function H0(e,t,a,s){var l=(l=W.current)?bc(l):null;if(!l)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Qs(a.href),a=hs(l).hoistableStyles,s=a.get(t),s||(s={type:"style",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Qs(a.href);var i=hs(l).hoistableStyles,f=i.get(e);if(f||(l=l.ownerDocument||l,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,f),(i=l.querySelector(Vl(e)))&&!i._p&&(f.instance=i,f.state.loading=5),ca.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ca.set(e,a),i||$p(l,e,a,f.state))),t&&s===null)throw Error(o(528,""));return f}if(t&&s!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Zs(a),a=hs(l).hoistableScripts,s=a.get(t),s||(s={type:"script",instance:null,count:0,state:null},a.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Qs(e){return'href="'+Pt(e)+'"'}function Vl(e){return'link[rel="stylesheet"]['+e+"]"}function B0(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function $p(e,t,a,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),wt(t,"link",a),xt(t),e.head.appendChild(t))}function Zs(e){return'[src="'+Pt(e)+'"]'}function Kl(e){return"script[async]"+e}function G0(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+Pt(a.href)+'"]');if(s)return t.instance=s,xt(s),s;var l=N({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),xt(s),wt(s,"style",l),yc(s,a.precedence,e),t.instance=s;case"stylesheet":l=Qs(a.href);var i=e.querySelector(Vl(l));if(i)return t.state.loading|=4,t.instance=i,xt(i),i;s=B0(a),(l=ca.get(l))&&pd(s,l),i=(e.ownerDocument||e).createElement("link"),xt(i);var f=i;return f._p=new Promise(function(x,z){f.onload=x,f.onerror=z}),wt(i,"link",s),t.state.loading|=4,yc(i,a.precedence,e),t.instance=i;case"script":return i=Zs(a.src),(l=e.querySelector(Kl(i)))?(t.instance=l,xt(l),l):(s=a,(l=ca.get(i))&&(s=N({},a),bd(s,l)),e=e.ownerDocument||e,l=e.createElement("script"),xt(l),wt(l,"link",s),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,yc(s,a.precedence,e));return t.instance}function yc(e,t,a){for(var s=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=s.length?s[s.length-1]:null,i=l,f=0;f<s.length;f++){var x=s[f];if(x.dataset.precedence===t)i=x;else if(i!==l)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function pd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function bd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var vc=null;function L0(e,t,a){if(vc===null){var s=new Map,l=vc=new Map;l.set(a,s)}else l=vc,s=l.get(a),s||(s=new Map,l.set(a,s));if(s.has(e))return s;for(s.set(e,null),a=a.getElementsByTagName(e),l=0;l<a.length;l++){var i=a[l];if(!(i[il]||i[vt]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var f=i.getAttribute(t)||"";f=e+f;var x=s.get(f);x?x.push(i):s.set(f,[i])}}return s}function q0(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Ip(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Y0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Wp(e,t,a,s){if(a.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var l=Qs(s.href),i=t.querySelector(Vl(l));if(i){t=i._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Nc.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=i,xt(i);return}i=t.ownerDocument||t,s=B0(s),(l=ca.get(l))&&pd(s,l),i=i.createElement("link"),xt(i);var f=i;f._p=new Promise(function(x,z){f.onload=x,f.onerror=z}),wt(i,"link",s),a.instance=i}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Nc.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var yd=0;function Pp(e,t){return e.stylesheets&&e.count===0&&zc(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var s=setTimeout(function(){if(e.stylesheets&&zc(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4+t);0<e.imgBytes&&yd===0&&(yd=62500*Rp());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&zc(e,e.stylesheets),e.unsuspend)){var i=e.unsuspend;e.unsuspend=null,i()}},(e.imgBytes>yd?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(l)}}:null}function Nc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var jc=null;function zc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,jc=new Map,t.forEach(eb,e),jc=null,Nc.call(e))}function eb(e,t){if(!(t.state.loading&4)){var a=jc.get(e);if(a)var s=a.get(null);else{a=new Map,jc.set(e,a);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<l.length;i++){var f=l[i];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(a.set(f.dataset.precedence,f),s=f)}s&&a.set(null,s)}l=t.instance,f=l.getAttribute("data-precedence"),i=a.get(f)||s,i===s&&a.set(null,l),a.set(f,l),this.count++,s=Nc.bind(this),l.addEventListener("load",s),l.addEventListener("error",s),i?i.parentNode.insertBefore(l,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var Xl={$$typeof:q,Provider:null,Consumer:null,_currentValue:ne,_currentValue2:ne,_threadCount:0};function tb(e,t,a,s,l,i,f,x,z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mr(0),this.hiddenUpdates=mr(null),this.identifierPrefix=s,this.onUncaughtError=l,this.onCaughtError=i,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function V0(e,t,a,s,l,i,f,x,z,A,V,J){return e=new tb(e,t,a,f,z,A,V,J,x),t=1,i===!0&&(t|=24),i=Yt(3,null,null,t),e.current=i,i.stateNode=e,t=Ir(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:s,isDehydrated:a,cache:t},to(i),e}function K0(e){return e?(e=ws,e):ws}function X0(e,t,a,s,l,i){l=K0(l),s.context===null?s.context=l:s.pendingContext=l,s=mn(t),s.payload={element:a},i=i===void 0?null:i,i!==null&&(s.callback=i),a=hn(e,s,t),a!==null&&(Lt(a,e,t),zl(a,e,t))}function Q0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function vd(e,t){Q0(e,t),(e=e.alternate)&&Q0(e,t)}function Z0(e){if(e.tag===13||e.tag===31){var t=Yn(e,67108864);t!==null&&Lt(t,e,67108864),vd(e,67108864)}}function J0(e){if(e.tag===13||e.tag===31){var t=Zt();t=hr(t);var a=Yn(e,t);a!==null&&Lt(a,e,t),vd(e,t)}}var wc=!0;function ab(e,t,a,s){var l=y.T;y.T=null;var i=H.p;try{H.p=2,Nd(e,t,a,s)}finally{H.p=i,y.T=l}}function nb(e,t,a,s){var l=y.T;y.T=null;var i=H.p;try{H.p=8,Nd(e,t,a,s)}finally{H.p=i,y.T=l}}function Nd(e,t,a,s){if(wc){var l=jd(s);if(l===null)cd(e,t,s,Sc,a),$0(e,s);else if(lb(l,e,t,a,s))s.stopPropagation();else if($0(e,s),t&4&&-1<sb.indexOf(e)){for(;l!==null;){var i=ms(l);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var f=Re(i.pendingLanes);if(f!==0){var x=i;for(x.pendingLanes|=2,x.entangledLanes|=2;f;){var z=1<<31-Et(f);x.entanglements[1]|=z,f&=~z}Sa(i),(Me&6)===0&&(cc=ft()+500,Gl(0))}}break;case 31:case 13:x=Yn(i,2),x!==null&&Lt(x,i,2),oc(),vd(i,2)}if(i=jd(s),i===null&&cd(e,t,s,Sc,a),i===l)break;l=i}l!==null&&s.stopPropagation()}else cd(e,t,s,null,a)}}function jd(e){return e=zr(e),zd(e)}var Sc=null;function zd(e){if(Sc=null,e=fs(e),e!==null){var t=m(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=b(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Sc=e,null}function F0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(or()){case sn:return 2;case hi:return 8;case ds:case dr:return 32;case xi:return 268435456;default:return 32}default:return 32}}var wd=!1,Sn=null,_n=null,Cn=null,Ql=new Map,Zl=new Map,En=[],sb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $0(e,t){switch(e){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Ql.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(t.pointerId)}}function Jl(e,t,a,s,l,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:i,targetContainers:[l]},t!==null&&(t=ms(t),t!==null&&Z0(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function lb(e,t,a,s,l){switch(t){case"focusin":return Sn=Jl(Sn,e,t,a,s,l),!0;case"dragenter":return _n=Jl(_n,e,t,a,s,l),!0;case"mouseover":return Cn=Jl(Cn,e,t,a,s,l),!0;case"pointerover":var i=l.pointerId;return Ql.set(i,Jl(Ql.get(i)||null,e,t,a,s,l)),!0;case"gotpointercapture":return i=l.pointerId,Zl.set(i,Jl(Zl.get(i)||null,e,t,a,s,l)),!0}return!1}function I0(e){var t=fs(e.target);if(t!==null){var a=m(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,du(e.priority,function(){J0(a)});return}}else if(t===31){if(t=b(a),t!==null){e.blockedOn=t,du(e.priority,function(){J0(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _c(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=jd(e.nativeEvent);if(a===null){a=e.nativeEvent;var s=new a.constructor(a.type,a);jr=s,a.target.dispatchEvent(s),jr=null}else return t=ms(a),t!==null&&Z0(t),e.blockedOn=a,!1;t.shift()}return!0}function W0(e,t,a){_c(e)&&a.delete(t)}function ib(){wd=!1,Sn!==null&&_c(Sn)&&(Sn=null),_n!==null&&_c(_n)&&(_n=null),Cn!==null&&_c(Cn)&&(Cn=null),Ql.forEach(W0),Zl.forEach(W0)}function Cc(e,t){e.blockedOn===t&&(e.blockedOn=null,wd||(wd=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,ib)))}var Ec=null;function P0(e){Ec!==e&&(Ec=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){Ec===e&&(Ec=null);for(var t=0;t<e.length;t+=3){var a=e[t],s=e[t+1],l=e[t+2];if(typeof s!="function"){if(zd(s||a)===null)continue;break}var i=ms(a);i!==null&&(e.splice(t,3),t-=3,jo(i,{pending:!0,data:l,method:a.method,action:s},s,l))}}))}function Js(e){function t(z){return Cc(z,e)}Sn!==null&&Cc(Sn,e),_n!==null&&Cc(_n,e),Cn!==null&&Cc(Cn,e),Ql.forEach(t),Zl.forEach(t);for(var a=0;a<En.length;a++){var s=En[a];s.blockedOn===e&&(s.blockedOn=null)}for(;0<En.length&&(a=En[0],a.blockedOn===null);)I0(a),a.blockedOn===null&&En.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(s=0;s<a.length;s+=3){var l=a[s],i=a[s+1],f=l[Mt]||null;if(typeof i=="function")f||P0(a);else if(f){var x=null;if(i&&i.hasAttribute("formAction")){if(l=i,f=i[Mt]||null)x=f.formAction;else if(zd(l)!==null)continue}else x=f.action;typeof x=="function"?a[s+1]=x:(a.splice(s,3),s-=3),P0(a)}}}function eh(){function e(i){i.canIntercept&&i.info==="react-transition"&&i.intercept({handler:function(){return new Promise(function(f){return l=f})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),s||setTimeout(a,20)}function a(){if(!s&&!navigation.transition){var i=navigation.currentEntry;i&&i.url!=null&&navigation.navigate(i.url,{state:i.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function Sd(e){this._internalRoot=e}Tc.prototype.render=Sd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,s=Zt();X0(a,s,e,t,null,null)},Tc.prototype.unmount=Sd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;X0(e.current,2,null,e,null,null),oc(),t[us]=null}};function Tc(e){this._internalRoot=e}Tc.prototype.unstable_scheduleHydration=function(e){if(e){var t=ou();e={blockedOn:null,target:e,priority:t};for(var a=0;a<En.length&&t!==0&&t<En[a].priority;a++);En.splice(a,0,e),a===0&&I0(e)}};var th=d.version;if(th!=="19.2.4")throw Error(o(527,th,"19.2.4"));H.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var cb={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kc.isDisabled&&kc.supportsFiber)try{Hn=kc.inject(cb),ht=kc}catch{}}return Il.createRoot=function(e,t){if(!u(e))throw Error(o(299));var a=!1,s="",l=rm,i=om,f=dm;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=V0(e,1,!1,null,null,a,s,null,l,i,f,eh),e[us]=t.current,id(e),new Sd(t)},Il.hydrateRoot=function(e,t,a){if(!u(e))throw Error(o(299));var s=!1,l="",i=rm,f=om,x=dm,z=null;return a!=null&&(a.unstable_strictMode===!0&&(s=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(i=a.onUncaughtError),a.onCaughtError!==void 0&&(f=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.formState!==void 0&&(z=a.formState)),t=V0(e,1,!0,t,a??null,s,l,z,i,f,x,eh),t.context=K0(null),a=t.current,s=Zt(),s=hr(s),l=mn(s),l.callback=null,hn(a,l,s),a=s,t.current.lanes=a,ll(t,a),Sa(t),e[us]=t.current,id(e),new Tc(t)},Il.version="19.2.4",Il}var mh;function Dy(){if(mh)return Ed.exports;mh=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(d){console.error(d)}}return c(),Ed.exports=Ay(),Ed.exports}var Ry=Dy();const My="modulepreload",Oy=function(c){return"/"+c},hh={},oa=function(d,r,o){let u=Promise.resolve();if(r&&r.length>0){let h=function(g){return Promise.all(g.map(v=>Promise.resolve(v).then(N=>({status:"fulfilled",value:N}),N=>({status:"rejected",reason:N}))))};document.getElementsByTagName("link");const b=document.querySelector("meta[property=csp-nonce]"),p=(b==null?void 0:b.nonce)||(b==null?void 0:b.getAttribute("nonce"));u=h(r.map(g=>{if(g=Oy(g),g in hh)return;hh[g]=!0;const v=g.endsWith(".css"),N=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${N}`))return;const w=document.createElement("link");if(w.rel=v?"stylesheet":My,v||(w.as="script"),w.crossOrigin="",w.href=g,p&&w.setAttribute("nonce",p),document.head.appendChild(w),v)return new Promise((E,_)=>{w.addEventListener("load",E),w.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${g}`)))})}))}function m(h){const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=h,window.dispatchEvent(b),!b.defaultPrevented)throw h}return u.then(h=>{for(const b of h||[])b.status==="rejected"&&m(b.reason);return d().catch(m)})},xh=c=>typeof c=="boolean"?`${c}`:c===0?"0":c,gh=Xh,tu=(c,d)=>r=>{var o;if((d==null?void 0:d.variants)==null)return gh(c,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:u,defaultVariants:m}=d,h=Object.keys(u).map(g=>{const v=r==null?void 0:r[g],N=m==null?void 0:m[g];if(v===null)return null;const w=xh(v)||xh(N);return u[g][w]}),b=r&&Object.entries(r).reduce((g,v)=>{let[N,w]=v;return w===void 0||(g[N]=w),g},{}),p=d==null||(o=d.compoundVariants)===null||o===void 0?void 0:o.reduce((g,v)=>{let{class:N,className:w,...E}=v;return Object.entries(E).every(_=>{let[M,T]=_;return Array.isArray(T)?T.includes({...m,...b}[M]):{...m,...b}[M]===T})?[...g,N,w]:g},[]);return gh(c,h,p,r==null?void 0:r.class,r==null?void 0:r.className)},Uy={lessThanXSeconds:{one:"bir saniyeden az",other:"{{count}} saniyeden az"},xSeconds:{one:"1 saniye",other:"{{count}} saniye"},halfAMinute:"yarm dakika",lessThanXMinutes:{one:"bir dakikadan az",other:"{{count}} dakikadan az"},xMinutes:{one:"1 dakika",other:"{{count}} dakika"},aboutXHours:{one:"yaklak 1 saat",other:"yaklak {{count}} saat"},xHours:{one:"1 saat",other:"{{count}} saat"},xDays:{one:"1 gn",other:"{{count}} gn"},aboutXWeeks:{one:"yaklak 1 hafta",other:"yaklak {{count}} hafta"},xWeeks:{one:"1 hafta",other:"{{count}} hafta"},aboutXMonths:{one:"yaklak 1 ay",other:"yaklak {{count}} ay"},xMonths:{one:"1 ay",other:"{{count}} ay"},aboutXYears:{one:"yaklak 1 yl",other:"yaklak {{count}} yl"},xYears:{one:"1 yl",other:"{{count}} yl"},overXYears:{one:"1 yldan fazla",other:"{{count}} yldan fazla"},almostXYears:{one:"neredeyse 1 yl",other:"neredeyse {{count}} yl"}},Hy=(c,d,r)=>{let o;const u=Uy[c];return typeof u=="string"?o=u:d===1?o=u.one:o=u.other.replace("{{count}}",d.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?o+" sonra":o+" nce":o},By={full:"d MMMM y EEEE",long:"d MMMM y",medium:"d MMM y",short:"dd.MM.yyyy"},Gy={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Ly={full:"{{date}} 'saat' {{time}}",long:"{{date}} 'saat' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qy={date:_d({formats:By,defaultWidth:"full"}),time:_d({formats:Gy,defaultWidth:"full"}),dateTime:_d({formats:Ly,defaultWidth:"full"})},Yy={lastWeek:"'geen hafta' eeee 'saat' p",yesterday:"'dn saat' p",today:"'bugn saat' p",tomorrow:"'yarn saat' p",nextWeek:"eeee 'saat' p",other:"P"},Vy=(c,d,r,o)=>Yy[c],Ky={narrow:["M","MS"],abbreviated:["M","MS"],wide:["Milattan nce","Milattan Sonra"]},Xy={narrow:["1","2","3","4"],abbreviated:["1","2","3","4"],wide:["lk eyrek","kinci eyrek","nc eyrek","Son eyrek"]},Qy={narrow:["O","","M","N","M","H","T","A","E","E","K","A"],abbreviated:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],wide:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"]},Zy={narrow:["P","P","S","","P","C","C"],short:["Pz","Pt","Sa","a","Pe","Cu","Ct"],abbreviated:["Paz","Pzt","Sal","ar","Per","Cum","Cts"],wide:["Pazar","Pazartesi","Sal","aramba","Perembe","Cuma","Cumartesi"]},Jy={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"},wide:{am:"..",pm:".S.",midnight:"gece yars",noon:"le",morning:"sabah",afternoon:"leden sonra",evening:"akam",night:"gece"}},Fy={narrow:{am:"",pm:"s",midnight:"gy",noon:"",morning:"sa",afternoon:"s",evening:"ak",night:"ge"},abbreviated:{am:"",pm:"S",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"},wide:{am:"..",pm:".s.",midnight:"gece yars",noon:"len",morning:"sabahleyin",afternoon:"leden sonra",evening:"akamleyin",night:"geceleyin"}},$y=(c,d)=>Number(c)+".",Iy={ordinalNumber:$y,era:Fl({values:Ky,defaultWidth:"wide"}),quarter:Fl({values:Xy,defaultWidth:"wide",argumentCallback:c=>Number(c)-1}),month:Fl({values:Qy,defaultWidth:"wide"}),day:Fl({values:Zy,defaultWidth:"wide"}),dayPeriod:Fl({values:Jy,defaultWidth:"wide",formattingValues:Fy,defaultFormattingWidth:"wide"})},Wy=/^(\d+)(\.)?/i,Py=/\d+/i,ev={narrow:/^(m|ms)/i,abbreviated:/^(m|ms)/i,wide:/^(milattan nce|milattan sonra)/i},tv={any:[/(^m|^milattan nce)/i,/(^ms|^milattan sonra)/i]},av={narrow:/^[1234]/i,abbreviated:/^[1234]/i,wide:/^((i|)lk|(i|)kinci|nc|son) eyrek/i},nv={any:[/1/i,/2/i,/3/i,/4/i],abbreviated:[/1/i,/2/i,/3/i,/4/i],wide:[/^(i|)lk eyrek/i,/(i|)kinci eyrek/i,/nc eyrek/i,/son eyrek/i]},sv={narrow:/^[omnhtaek]/i,abbreviated:/^(oca|ub|mar|nis|may|haz|tem|au|eyl|eki|kas|ara)/i,wide:/^(ocak|ubat|mart|nisan|mays|haziran|temmuz|austos|eyll|ekim|kasm|aralk)/i},lv={narrow:[/^o/i,/^/i,/^m/i,/^n/i,/^m/i,/^h/i,/^t/i,/^a/i,/^e/i,/^e/i,/^k/i,/^a/i],any:[/^o/i,/^/i,/^mar/i,/^n/i,/^may/i,/^h/i,/^t/i,/^a/i,/^ey/i,/^ek/i,/^k/i,/^ar/i]},iv={narrow:/^[psc]/i,short:/^(pz|pt|sa|a|pe|cu|ct)/i,abbreviated:/^(paz|pzt|sal|ar|per|cum|cts)/i,wide:/^(pazar(?!tesi)|pazartesi|sal|aramba|perembe|cuma(?!rtesi)|cumartesi)/i},cv={narrow:[/^p/i,/^p/i,/^s/i,/^/i,/^p/i,/^c/i,/^c/i],any:[/^pz/i,/^pt/i,/^sa/i,/^a/i,/^pe/i,/^cu/i,/^ct/i],wide:[/^pazar(?!tesi)/i,/^pazartesi/i,/^sal/i,/^aramba/i,/^perembe/i,/^cuma(?!rtesi)/i,/^cumartesi/i]},rv={narrow:/^(|s|gy||sa|s|ak|ge)/i,any:/^(\.?\s?[s]\.?|leden sonra|gece yars|le|(sabah||akam|gece)(leyin))/i},ov={any:{am:/^\.?\.?/i,pm:/^\.?s\.?/i,midnight:/^(gy|gece yars)/i,noon:/^/i,morning:/^sa/i,afternoon:/^leden sonra/i,evening:/^ak/i,night:/^ge/i}},dv={ordinalNumber:jy({matchPattern:Wy,parsePattern:Py,valueCallback:function(c){return parseInt(c,10)}}),era:$l({matchPatterns:ev,defaultMatchWidth:"wide",parsePatterns:tv,defaultParseWidth:"any"}),quarter:$l({matchPatterns:av,defaultMatchWidth:"wide",parsePatterns:nv,defaultParseWidth:"any",valueCallback:c=>c+1}),month:$l({matchPatterns:sv,defaultMatchWidth:"wide",parsePatterns:lv,defaultParseWidth:"any"}),day:$l({matchPatterns:iv,defaultMatchWidth:"wide",parsePatterns:cv,defaultParseWidth:"any"}),dayPeriod:$l({matchPatterns:rv,defaultMatchWidth:"any",parsePatterns:ov,defaultParseWidth:"any"})},uv={code:"tr",formatDistance:Hy,formatLong:qy,formatRelative:Vy,localize:Iy,match:dv,options:{weekStartsOn:1,firstWeekContainsDate:1}};function fv(c,d){let r;try{r=c()}catch{return}return{getItem:u=>{var m;const h=p=>p===null?null:JSON.parse(p,void 0),b=(m=r.getItem(u))!=null?m:null;return b instanceof Promise?b.then(h):h(b)},setItem:(u,m)=>r.setItem(u,JSON.stringify(m,void 0)),removeItem:u=>r.removeItem(u)}}const Kd=c=>d=>{try{const r=c(d);return r instanceof Promise?r:{then(o){return Kd(o)(r)},catch(o){return this}}}catch(r){return{then(o){return this},catch(o){return Kd(o)(r)}}}},mv=(c,d)=>(r,o,u)=>{let m={storage:fv(()=>window.localStorage),partialize:T=>T,version:0,merge:(T,R)=>({...R,...T}),...d},h=!1,b=0;const p=new Set,g=new Set;let v=m.storage;if(!v)return c((...T)=>{console.warn(`[zustand persist middleware] Unable to update item '${m.name}', the given storage is currently unavailable.`),r(...T)},o,u);const N=()=>{const T=m.partialize({...o()});return v.setItem(m.name,{state:T,version:m.version})},w=u.setState;u.setState=(T,R)=>(w(T,R),N());const E=c((...T)=>(r(...T),N()),o,u);u.getInitialState=()=>E;let _;const M=()=>{var T,R;if(!v)return;const L=++b;h=!1,p.forEach(F=>{var le;return F((le=o())!=null?le:E)});const q=((R=m.onRehydrateStorage)==null?void 0:R.call(m,(T=o())!=null?T:E))||void 0;return Kd(v.getItem.bind(v))(m.name).then(F=>{if(F)if(typeof F.version=="number"&&F.version!==m.version){if(m.migrate){const le=m.migrate(F.state,F.version);return le instanceof Promise?le.then(Y=>[!0,Y]):[!0,le]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,F.state];return[!1,void 0]}).then(F=>{var le;if(L!==b)return;const[Y,I]=F;if(_=m.merge(I,(le=o())!=null?le:E),r(_,!0),Y)return N()}).then(()=>{L===b&&(q==null||q(_,void 0),_=o(),h=!0,g.forEach(F=>F(_)))}).catch(F=>{L===b&&(q==null||q(void 0,F))})};return u.persist={setOptions:T=>{m={...m,...T},T.storage&&(v=T.storage)},clearStorage:()=>{v==null||v.removeItem(m.name)},getOptions:()=>m,rehydrate:()=>M(),hasHydrated:()=>h,onHydrate:T=>(p.add(T),()=>{p.delete(T)}),onFinishHydration:T=>(g.add(T),()=>{g.delete(T)})},m.skipHydration||M(),_||E},hv=mv,xv={apiKey:"AIzaSyDId5LOaNdgw4aMKEh5yD_xDsKCUROSn-w",authDomain:"relay-e61b4.firebaseapp.com",projectId:"relay-e61b4",storageBucket:"relay-e61b4.firebasestorage.app",messagingSenderId:"477483426209",appId:"1:477483426209:web:caa78f0770295669e52be0"},au=hy(xv),ei=xy(au),te=gy(au),Ox=Object.freeze(Object.defineProperty({__proto__:null,app:au,auth:ei,db:te},Symbol.toStringTag,{value:"Module"})),Ge=Ct(c=>({user:null,firebaseUser:null,loading:!1,error:null,initialized:!1,signIn:async(d,r)=>{var o;c({loading:!0,error:null});try{const u=await yy(ei,d,r),m=await ns(he(te,"users",u.user.uid));if(m.exists()){const h=m.data();c({user:{uid:u.user.uid,email:u.user.email||"",name:h.name||"User",role:h.role||"receptionist",hotel_id:h.hotel_id||null,current_shift_type:h.current_shift_type||null,settings:h.settings||{}},firebaseUser:u.user,loading:!1})}else c({user:{uid:u.user.uid,email:u.user.email||"",name:((o=u.user.email)==null?void 0:o.split("@")[0])||"User",role:"receptionist",hotel_id:null,current_shift_type:null,settings:{}},firebaseUser:u.user,loading:!1})}catch(u){const m=u instanceof Error?u.message:"Login failed";c({error:m.replace("Firebase: ","").replace(/\(auth\/.*\)/,"").trim(),loading:!1})}},signOut:async()=>{c({loading:!0});try{await by(ei),c({user:null,firebaseUser:null,loading:!1})}catch(d){const r=d instanceof Error?d.message:"Logout failed";c({error:r,loading:!1})}},clearError:()=>c({error:null}),initialize:()=>py(ei,async r=>{var o;if(r)try{const u=await ns(he(te,"users",r.uid));if(u.exists()){const m=u.data();c({user:{uid:r.uid,email:r.email||"",name:m.name||"User",role:m.role||"receptionist",hotel_id:m.hotel_id||null,current_shift_type:m.current_shift_type||null,settings:m.settings||{}},firebaseUser:r,initialized:!0,loading:!1})}else c({user:{uid:r.uid,email:r.email||"",name:((o=r.email)==null?void 0:o.split("@")[0])||"User",role:"receptionist",hotel_id:null,current_shift_type:null,settings:{}},firebaseUser:r,initialized:!0,loading:!1})}catch{c({user:null,firebaseUser:null,initialized:!0,loading:!1})}else c({user:null,firebaseUser:null,initialized:!0,loading:!1})}),updateSettings:async d=>{const{user:r}=Ge.getState();if(r)try{const o=he(te,"users",r.uid),u={...r.settings,...d};await De(o,{settings:u}),c({user:{...r,settings:u}})}catch(o){console.error("Error updating user settings:",o)}}})),ph={en:{"auth.login":"Login","auth.register":"Register","auth.email":"Email Address","auth.password":"Password","auth.name":"Full Name","auth.confirmPassword":"Confirm Password","auth.noAccount":"Don't have an account?","auth.haveAccount":"Already have an account?","auth.contactGM":"Contact your GM for account access","auth.error.enterName":"Please enter your name","auth.error.passwordLength":"Password must be at least 6 characters","auth.error.passwordMismatch":"Passwords do not match","auth.error.regFailed":"Registration failed","auth.role.receptionist":"Receptionist","auth.role.receptionistDesc":"Front desk staff","auth.role.housekeeping":"Housekeeping","auth.role.housekeepingDesc":"Cleaning & maintenance","auth.registerSubtitle":"Join your hotel's Relay system","auth.roleLabel":"Your Role","auth.creatingAccount":"Creating account...","auth.createAccount":"Create Account","auth.logout":"Logout","auth.switchAccount":"Switch Account","setup.title":"Select Your Hotel","setup.subtitle":"Join an existing hotel or create a new one","setup.joinExisting":"Join Existing","setup.createNew":"Create New","setup.hotelName":"Hotel Name","setup.address":"Address","setup.optional":"optional","setup.loading":"Loading hotels...","setup.noHotels":"No hotels found","setup.createSuccess":"Hotel created successfully","setup.joinSuccess":"Join Hotel","setup.unnamedHotel":"Unnamed Hotel","setup.error.joinFailed":"Failed to join hotel","setup.error.enterName":"Please enter a hotel name","setup.error.createFailed":"Failed to create hotel","setup.hotelNamePlaceholder":"e.g. Grand Palace Hotel","setup.addressPlaceholder":"123 Main Street, City","dashboard.welcome":"Welcome back, {name}","dashboard.role":"Role: {role}","dashboard.startShift":"Start Shift","dashboard.endShift":"End Shift","dashboard.actions":"Actions","dashboard.rooms":"Rooms","dashboard.newLog":"New Log","dashboard.weeklySchedule":"My Weekly Schedule","dashboard.activeHotelShift":"Active Hotel Shift","dashboard.todaysAssignment":"Today's Assignment","dashboard.assignedShift":"Assigned Shift","dashboard.noAssignedShift":"No shift assigned for today","dashboard.operationsHub":"Operations Hub","dashboard.operationsDesc":"Manage hotel communication, feedback, and services in one place.","dashboard.userProfile":"User Profile","status.active":"Active","status.ongoing":"Shift Ongoing","status.resolved":"Resolved","status.archived":"Archived","status.open":"Open","status.noActiveShift":"No active shift","status.low":"Low","status.medium":"Medium","status.critical":"Critical","urgency.low":"Low","urgency.medium":"Medium","urgency.high":"High","urgency.critical":"Critical","module.activityFeed":"Live Activity Feed","module.stickyBoard":"Sticky Board","module.compliance":"Compliance Checklist","module.shiftNotes":"Shift Notes","module.hotelInfo":"Hotel Information","module.roster":"Staff Roster","module.calendar":"Calendar","module.maintenance":"Maintenance","module.guest_request":"Guest Request","module.complaint":"Complaint","module.system":"System","module.overview":"Overview","module.operations":"Operations Hub","module.messaging":"Messaging","module.complaints":"Complaints","module.offDays":"Off-Days","module.tours":"Tours","module.sales":"Sales","log.stickyBoard":"Sticky Board","compliance.kbsLate":"KBS System check is required immediately! Please verify guest identities.","handover.title":"Handover Wizard","handover.step.tickets":"Review Open Tickets","handover.step.cash":"Cash Count","handover.step.notes":"Handover Notes","handover.step.confirm":"Confirm & Complete","handover.tickets.desc":"Acknowledge each open ticket before proceeding","handover.cash.desc":"Count all cash before handover","handover.notes.desc":"Leave any important notes for the next shift","handover.confirm.desc":"Review your handover summary","handover.cash.started":"Started with","handover.cash.difference":"Difference","handover.complete":"Complete Handover","handover.wizard":"Handover Wizard","handover.noOpenTickets":"No open tickets!","handover.allClear":"All clear for handover","handover.cashEnd":"Cash End ()","handover.enterCash":"Enter cash on hand","handover.countCash":"Count all cash before handover","handover.notesDesc":"Leave any important notes for the next shift","handover.readyToComplete":"Ready to Complete Handover","handover.reviewSummary":"Review your handover summary","handover.ticketsReviewed":"Open Tickets Reviewed","handover.notes":"Notes","rooms.title":"Room Management","rooms.add":"Add Room","rooms.edit":"Edit Room","rooms.number":"Room Number","rooms.floor":"Floor","rooms.type":"Room Type","rooms.status":"Status","rooms.occupancy":"Occupancy","rooms.vacant":"Vacant","rooms.occupied":"Occupied","rooms.clean":"Clean","rooms.dirty":"Dirty","rooms.inspect":"Inspect","rooms.dnd":"DND","hotel.laundry":"Laundry Service","hotel.transfer":"Airport Transfer","hotel.lateCheckout":"Late Checkout","hotel.extraBed":"Extra Bed","hotel.iban":"Bank IBAN","hotel.bankName":"Bank Name","hotel.bankNamePlaceholder":"e.g. Garanti BBVA","hotel.additionalNotes":"Additional Notes","hotel.notesPlaceholder":"Any other important information...","hotel.bankAccount":"Bank Account","hotel.noInfo":"No hotel information set","hotel.clickEdit":"Click edit to add","log.new":"New Log Entry","log.edit":"Edit Log Entry","log.typeLabel":"Log Type","log.urgencyLabel":"Urgency Level","log.contentLabel":"Description","log.roomNumberLabel":"Room Number (Optional)","log.create":"Create Log","log.save":"Save Changes","log.enterContent":"Please enter a description","log.mustLogin":"You must be logged in","log.aiHelp":"AI Help","log.roomPlaceholder":"e.g. 101","log.feed.noActive":"No active logs","log.feed.noResolved":"No resolved logs","log.feed.noArchived":"Archive empty","log.error.enterDescription":"Please enter a description","log.error.mustBeLoggedIn":"You must be logged in","sticky.pinnedCount":"{count} pinned","shift.morning":"Morning","shift.afternoon":"Afternoon","shift.night":"Night","shift.extra":"Extra","shift.off":"Off","shift.none":"None","shift.welcome":"Welcome! Please initialize your shift data.","shift.selectType":"Select Shift Type","shift.startingCash":"Starting Cash","shift.proceed":"Proceed to Dashboard","shift.loggedAs":"Logged in as","calendar.noShifts":"No shifts scheduled","calendar.noEvents":"No events for today","calendar.addEvent":"Add Event","calendar.eventTitle":"Event Title","calendar.time":"Time","calendar.roomNumber":"Room Number","calendar.totalPrice":"Total Price","calendar.collectedAmount":"Collected Amount","calendar.payment":"Payment","calendar.remaining":"Remaining","calendar.eventType.checkout":"Checkout","calendar.eventType.arrival":"Arrival","calendar.eventType.meeting":"Meeting","calendar.eventType.inspection":"Inspection","calendar.eventType.delivery":"Delivery","calendar.eventType.maintenance":"Maintenance","calendar.eventType.reminder":"Reminder","calendar.eventType.tour":"Tour","calendar.eventType.transfer":"Transfer","calendar.eventType.off_day":"Off Day","day.mon":"Monday","day.tue":"Tuesday","day.wed":"Wednesday","day.thu":"Thursday","day.fri":"Friday","day.sat":"Saturday","day.sun":"Sunday","day.short.mon":"MON","day.short.tue":"TUE","day.short.wed":"WED","day.short.thu":"THU","day.short.fri":"FRI","day.short.sat":"SAT","day.short.sun":"SUN","category.allIssues":"All Issues","category.handover":"Handover","category.damage":"Damage","category.guestInfo":"Guest Info","category.earlyCheckout":"Early Checkout","category.feedback":"Feedback","category.upgrade":"Upgrade (Room)","category.upsell":"Upsell","category.restaurant":"Restaurant/Bar","category.minibar":"Minibar","category.maintenance":"Maintenance","category.guest_request":"Guest Request","category.complaint":"Complaint","category.system":"System","category.other":"Other","notes.activeCount":"Active Notes","notes.noNotes":"No active notes","notes.aiHelp":"AI Assist","notes.anonymous":"Anonymous","notifications.title":"Notifications","notifications.markAllRead":"Mark all read","notifications.noNotifications":"No new notifications","notifications.viewAll":"View All Activity","status.all":"All","app.welcome":"Welcome to Relay","app.description":"Your digital handover system for seamless hotel operations. Manage shifts, track logs, and ensure complianceall in one place.","app.activeShift":"Active Shift","app.openTickets":"Open Tickets","app.cashBalance":"Cash Balance","app.systemTitle":"Relay Hotel Operations System","common.dismiss":"Dismiss","common.add":"Add","common.cancel":"Cancel","common.save":"Save","common.delete":"Delete","common.edit":"Edit","common.archive":"Archive","common.viewAll":"View All","common.loading":"Loading...","common.room":"Room","common.amount":"Amount","common.description":"Description","common.search":"Search...","common.continue":"Continue","common.back":"Back","common.confirm":"Confirm","common.by":"by","common.none":"None","common.staff":"Staff","common.unknown":"Unknown","common.update":"Update","common.deleteConfirm":"Delete this event?","common.next":"Next","common.finish":"Finish","common.reopen":"Reopen","common.resolve":"Resolve","roster.title":"Weekly Roster","roster.noStaff":"No staff members found","roster.show":"Show in Roster","roster.hide":"Hide from Roster","tours.catalogue.title":"Tour Catalogue","tours.catalogue.desc":"Browse available tours and track local sales.","tours.add":"Add New Tour","tours.edit":"Edit Tour","tours.create":"Create New Tour Entry","tours.form.name":"Tour Name","tours.form.desc":"Short Description","tours.form.basePrice":"Base Price (EUR)","tours.form.adultPrice":"Adult Price","tours.form.child37Price":"Child (3-7y)","tours.form.child03Price":"Child (0-3y)","tours.form.operatingDays":"Operating Days","tours.noTours":"No tours in the catalogue yet.","tours.createFirst":"Create the first one","tours.local":"Local Tour","tours.clickToLog":"Click a category to log a sale.","tours.book.title":"New Booking: {name}","tours.book.desc":"Enter booking details for this tour.","tours.book.guestName":"Guest Name","tours.book.room":"Room #","tours.book.pax":"Pax","tours.book.date":"Date","tours.book.totalPrice":"Total Price","tours.book.confirm":"Confirm Booking","sales.tracker":"Sales Tracker","sales.new":"New Sale","sales.newType":"New {label}","sales.service":"Service","sales.other":"Other / Custom","sales.customName":"Enter custom tour name...","sales.pickupTime":"Pickup Time","sales.price":"Price","sales.notes":"Notes","sales.optionalNotes":"Optional notes...","sales.create":"Create Sale","sales.noSales":"No {label} sales yet.","sales.soldBy":"Sold by: {name}","compliance.kbs.required":"KBS Check Required!","compliance.kbs.pastTime":"It's past 23:00","compliance.kbs.desc":"The KBS system check must be completed before your shift ends. This is a mandatory compliance requirement.","compliance.kbs.remindLater":"Remind Later","compliance.kbs.checkNow":"Check KBS Now","compliance.agency.label":"Agency Messages Checked","compliance.agency.desc":"Check all OTA messages (Booking, Expedia, etc.)","compliance.kbs.label":"KBS System Verified","compliance.kbs.checklistDesc":"Daily compliance check before 23:00","onboarding.welcome.title":"Welcome to Relay","onboarding.welcome.desc":"Your digital operations hub. Let's get you set up.","onboarding.activity.title":"Operations Feed","onboarding.activity.desc":"View guest requests, maintenance logs, and shift notes in real-time.","onboarding.shift.title":"Shift Management","onboarding.shift.desc":"Start/End shifts, check KBS compliance, and count cash.","onboarding.team.title":"Roster & Sales","onboarding.team.desc":"Check your weekly schedule, request off-days, and manage tour sales.","onboarding.localization.title":"Localization","onboarding.localization.desc":"Switch languages instantly using the globe icon.","onboarding.stepOf":"Step {current} of {total}","tour.intro.title":"Welcome to Relay","tour.intro.desc":"This is your digital handover platform. Let's take a quick tour.","tour.compliance.title":"Shift Compliance","tour.compliance.desc":"Track your mandatory KBS and Agency checks here. The pulse indicates urgency.","tour.feed.title":"Activity Feed","tour.feed.desc":"All guest requests and maintenance logs appear here in real-time.","tour.sales.title":"Sales & Tours","tour.sales.desc":"Switch tabs to manage Tour Sales, Off-Days, and guest Feedback.","tour.notifications.title":"Notifications","tour.notifications.desc":"Stay updated on off-day requests and important messages.","tour.profile.title":"Your Profile","tour.profile.desc":"Access settings, tutorials, and logout here.","menu.title":"Staff Daily Menu","menu.content":"Today's Menu","menu.edit":"Edit Menu","menu.updateSuccess":"Menu updated successfully","menu.noMenuToday":"No menu shared for today yet.","menu.hours":"Service Hours","menu.breakfastTime":"Breakfast: 07:00 - 09:00","menu.lunchTime":"Lunch: 12:00 - 13:30","menu.dinnerTime":"Dinner: 17:00 - 18:30","hotel.secure.title":"Secure Information (KBS / Agency)","hotel.secure.encrypted":"Encrypted Section","hotel.secure.safeCode":"Safe Code","hotel.secure.agency":"Agency Logins (Extranet)","hotel.secure.other":"Other Safe Info","hotel.secure.kbs":"KBS Login Info","hotel.secure.safeInfo":"Safe & Key Info","hotel.settings.fixturePrices":"Fixture Damage Prices","fixture.hand_towel":"Hand Towel","fixture.bath_towel":"Bath Towel","fixture.bed_sheet":"Bed Sheet","fixture.pillow_case":"Pillow Case","fixture.duvet_cover":"Duvet Cover","fixture.bathrobe":"Bathrobe","fixture.mattress_protector":"Mattress Protector","hotel.settings.minibarPrices":"Minibar Prices","minibar.cola":"Cola","minibar.cola_zero":"Cola Zero","minibar.fanta":"Fanta","minibar.sprite":"Sprite","minibar.soda":"Soda","offday.management.title":"Leave & Shift Management","offday.management.desc":"Manage staff leave and shift requests.","offday.pending":"Pending Requests","offday.history":"Request History","offday.petitions":"Complaints & Petitions","messages.title":"Messages","messages.search":"Search staff...","messages.announcements":"General Announcements","messages.broadcast":"Broadcast to all staff","feedback.anonymous.title":"Anonymous Feedback","feedback.anonymous.subtitle":"Your voice matters safely.","feedback.privacy.title":"Privacy Guaranteed","feedback.privacy.desc":"We use hotel-level collections without user associations. Even database administrators cannot trace feedback to a specific user account.","feedback.submit.title":"Submit Anonymous Complaint","feedback.submit.desc":"Your identity is completely hidden. No personal data is stored with your message.","feedback.management.view":"Management View","ai.title":"Relay AI Assistant","ai.poweredBy":"Powered by Gemini & Gemma","ai.model":"AI Model","ai.mode.assistant":"Assistant Mode","ai.mode.quota":"Quota Balanced Mode","ai.task.general":"General Assistant Request","ai.task.generalDesc":"How can I help you today?","ai.task.incident":"Incident Report","ai.task.incidentDesc":"Describe the incident (Who, What, When, Where)...","ai.task.email":"Professional Email Request","ai.task.emailDesc":"Who is the recipient and what is the core message?","ai.task.review":"Review Reply Request","ai.task.reviewDesc":"Paste the guest review here...","ai.context.title":"Hotel Knowledge Base","ai.context.desc":"Enter facts about your hotel (breakfast hours, wifi password, policies). The AI will use this to generate accurate answers.","ai.context.save":"Save Context","ai.generate":"Generate","ai.cancel":"Cancel","notes.edited":"(edited)","notes.label":"shift notes","notes.noFixturePrices":"No fixture prices configured by management."},tr:{"app.welcome":"Relay'e Hogeldiniz","app.description":"Dijital devir teslim sisteminiz. Vardiyalar ynetin, kaytlar takip edin ve uyumluluu salayn - hepsi tek bir yerde.","app.activeShift":"Aktif Vardiya","app.openTickets":"Ak Kaytlar","app.cashBalance":"Kasa Bakiyesi","app.systemTitle":"Relay Otel Operasyon Sistemi","auth.login":"Giri Yap","auth.register":"Kayt Ol","auth.email":"E-posta Adresi","auth.password":"ifre","auth.name":"Ad Soyad","auth.confirmPassword":"ifreyi Onayla","auth.noAccount":"Hesabnz yok mu?","auth.haveAccount":"Zaten hesabnz var m?","auth.contactGM":"Hesap eriimi iin yneticinizle (GM) iletiime gein","auth.error.enterName":"Ltfen adnz girin","auth.error.passwordLength":"ifre en az 6 karakter olmaldr","auth.error.passwordMismatch":"ifreler elemiyor","auth.error.regFailed":"Kayt baarsz oldu","auth.role.receptionist":"Resepsiyonist","auth.role.receptionistDesc":"n bro personeli","auth.role.housekeeping":"Kat Hizmetleri","auth.role.housekeepingDesc":"Temizlik ve bakm","auth.registerSubtitle":"Otelinizin Relay sistemine katln","auth.roleLabel":"Rolnz","auth.creatingAccount":"Hesap oluturuluyor...","auth.createAccount":"Hesap Olutur","auth.logout":"k Yap","auth.switchAccount":"Hesap Deitir","setup.title":"Otel Sein","setup.subtitle":"Mevcut bir otele katln veya yeni bir tane oluturun","setup.joinExisting":"Mevcut Otele Katl","setup.createNew":"Yeni Olutur","setup.hotelName":"Otel Ad","setup.address":"Adres","setup.optional":"istee bal","setup.loading":"Oteller ykleniyor...","setup.noHotels":"Otel bulunamad","setup.createSuccess":"Otel baaryla oluturuldu","setup.joinSuccess":"Otele Katl","setup.unnamedHotel":"simsiz Otel","setup.error.joinFailed":"Otele katlma baarsz oldu","setup.error.enterName":"Ltfen bir otel ad girin","setup.error.createFailed":"Otel oluturma baarsz oldu","setup.hotelNamePlaceholder":"rn. Grand Palace Otel","setup.addressPlaceholder":"123 Ana Cadde, ehir","dashboard.welcome":"Hogeldin, {name}","dashboard.role":"Rol: {role}","dashboard.startShift":"Vardiyay Balat","dashboard.endShift":"Vardiyay Bitir","dashboard.actions":"lemler","dashboard.rooms":"Odalar","dashboard.newLog":"Yeni Kayt","dashboard.weeklySchedule":"Haftalk Programm","dashboard.activeHotelShift":"Aktif Otel Vardiyas","dashboard.todaysAssignment":"Bugnk Grev","dashboard.assignedShift":"Atanan Vardiya","dashboard.noAssignedShift":"Bugn iin atanm vardiya yok","dashboard.operationsHub":"Operasyon Merkezi","dashboard.operationsDesc":"Otel iletiimi, geri bildirim ve hizmetleri tek bir yerden ynetin.","dashboard.userProfile":"Kullanc Profili","status.active":"Aktif","status.ongoing":"Vardiya Devam Ediyor","status.resolved":"zld","status.archived":"Ariv","status.open":"Ak","status.noActiveShift":"Aktif vardiya yok","status.low":"Dk","status.medium":"Orta","status.critical":"Kritik","urgency.low":"Dk","urgency.medium":"Orta","urgency.high":"Yksek","urgency.critical":"Kritik","module.activityFeed":"Canl Aktivite Ak","module.stickyBoard":"nemli Notlar","module.compliance":"Uyumluluk Kontrol","module.shiftNotes":"Vardiya Notlar","module.hotelInfo":"Otel Bilgileri","module.roster":"Personel izelgesi","module.calendar":"Takvim","module.maintenance":"Teknik Servis","module.guest_request":"Misafir Talebi","module.complaint":"ikayet","module.system":"Sistem","module.overview":"Genel Bak","module.operations":"Operasyon Merkezi","module.messaging":"Mesajlama","module.complaints":"ikayetler","module.offDays":"zin Gnleri","module.tours":"Turlar","module.sales":"Satlar","handover.title":"Devir Teslim Sihirbaz","common.dismiss":"Gizle","handover.step.tickets":"Ak Kaytlar ncele","handover.step.cash":"Kasa Saym","handover.step.notes":"Devir Notlar","handover.step.confirm":"Onayla ve Bitir","handover.tickets.desc":"Devam etmeden nce her ak kayd onaylayn","handover.cash.desc":"Devir yapmadan nce tm nakit paray sayn","handover.notes.desc":"Bir sonraki vardiya iin nemli notlar brakn","handover.confirm.desc":"Devir zetini inceleyin","handover.cash.started":"Balang","handover.cash.difference":"Fark","handover.complete":"Devri Tamamla","handover.wizard":"Devir Teslim Sihirbaz","handover.noOpenTickets":"Ak kayt yok!","handover.allClear":"Devir teslim iin her ey hazr","handover.cashEnd":"Biti Nakit ()","handover.enterCash":"Kasadaki nakdi girin","handover.countCash":"Devretmeden nce tm nakdi sayn","handover.notesDesc":"Sonraki vardiya iin nemli notlar brakn","handover.readyToComplete":"Devri Tamamlamaya Hazr","handover.reviewSummary":"Devir zetini gzden geirin","handover.ticketsReviewed":"ncelenen Ak Kaytlar","handover.notes":"Notlar","rooms.title":"Oda Ynetimi","rooms.add":"Oda Ekle","rooms.edit":"Oday Dzenle","rooms.number":"Oda Numaras","rooms.floor":"Kat","rooms.type":"Oda Tipi","rooms.status":"Durum","rooms.occupancy":"Doluluk","rooms.vacant":"Bo","rooms.occupied":"Dolu","rooms.clean":"Temiz","rooms.dirty":"Kirli","rooms.inspect":"Kontrol","rooms.dnd":"DND (Rahatsz Etmeyin)","hotel.laundry":"amarhane Hizmeti","hotel.transfer":"Havaliman Transferi","hotel.lateCheckout":"Ge k","hotel.extraBed":"Ekstra Yatak","hotel.iban":"Banka IBAN","hotel.bankName":"Banka Ad","hotel.bankNamePlaceholder":"rn. Garanti BBVA","hotel.additionalNotes":"Ek Notlar","hotel.notesPlaceholder":"Dier nemli bilgiler...","hotel.bankAccount":"Banka Hesab","hotel.noInfo":"Otel bilgisi ayarlanmam","hotel.clickEdit":"Ekleme yapmak iin dzenle'ye tklayn","log.new":"Yeni Kayt Ekle","log.edit":"Kayd Dzenle","log.typeLabel":"Kayt Tipi","log.urgencyLabel":"Aciliyet Seviyesi","log.contentLabel":"Aklama","log.roomNumberLabel":"Oda Numaras (Opsiyonel)","log.create":"Kayt Olutur","log.save":"Deiiklikleri Kaydet","log.enterContent":"Ltfen bir aklama girin","log.mustLogin":"Giri yapmalsnz","log.aiHelp":"AI Yardm","log.roomPlaceholder":"rn. 101","log.feed.noActive":"Aktif kayt bulunmuyor","log.feed.noResolved":"zlm kayt bulunmuyor","log.feed.noArchived":"Ariv bo","log.error.enterDescription":"Ltfen bir aklama giriniz","log.error.mustBeLoggedIn":"Giri yapmanz gerekiyor","sticky.pinnedCount":"{count} sabitlenmi","shift.morning":"Sabah","shift.afternoon":"leden Sonra","shift.night":"Gece","shift.extra":"Ekstra","shift.off":"zinli","shift.none":"Yok","shift.welcome":"Ho geldiniz! Ltfen vardiya verilerinizi giriniz.","shift.selectType":"Vardiya Tipi Sein","shift.startingCash":"Balang Nakdi","shift.proceed":"Dashboard'a Devam Et","shift.loggedAs":"Giri yapan kullanc:","calendar.noShifts":"Planlanm vardiya yok","calendar.noEvents":"Bugn iin etkinlik yok","calendar.addEvent":"Etkinlik Ekle","calendar.eventTitle":"Etkinlik Bal","calendar.time":"Saat","calendar.roomNumber":"Oda Numaras","calendar.totalPrice":"Toplam Tutar","calendar.collectedAmount":"Tahsil Edilen","calendar.payment":"deme","calendar.remaining":"Kalan","calendar.eventType.checkout":"k","calendar.eventType.arrival":"Giri","calendar.eventType.meeting":"Toplant","calendar.eventType.inspection":"Denetim","calendar.eventType.delivery":"Teslimat","calendar.eventType.maintenance":"Bakm","calendar.eventType.reminder":"Hatrlatc","calendar.eventType.tour":"Tur","calendar.eventType.transfer":"Transfer","calendar.eventType.off_day":"zin Gn","day.mon":"Pazartesi","day.tue":"Sal","day.wed":"aramba","day.thu":"Perembe","day.fri":"Cuma","day.sat":"Cumartesi","day.sun":"Pazar","day.short.mon":"PZT","day.short.tue":"SAL","day.short.wed":"AR","day.short.thu":"PER","day.short.fri":"CUM","day.short.sat":"CTS","day.short.sun":"PAZ","category.allIssues":"Tm Kaytlar","category.handover":"Devir Teslim","category.damage":"Hasar/Arza","category.guestInfo":"Misafir Bilgisi","category.earlyCheckout":"Erken k","category.feedback":"Geri Bildirim","category.upgrade":"Upgrade (Oda)","category.upsell":"Ekstra Sat","category.restaurant":"Restoran","category.minibar":"Minibar","category.maintenance":"Bakm","category.guest_request":"Misafir stei","category.complaint":"ikayet","category.system":"Sistem","category.other":"Dier","notes.activeCount":"Aktif Kaytlar","notes.noNotes":"Aktif kayt bulunmuyor","notes.aiHelp":"AI Asistan","notes.anonymous":"Anonim","notifications.title":"Bildirimler","notifications.markAllRead":"Tmn okundu iaretle","notifications.noNotifications":"Yeni bildirim yok","notifications.viewAll":"Tm Aktiviteyi Gr","status.all":"Tm","common.add":"Ekle","common.cancel":"ptal","common.save":"Kaydet","common.delete":"Sil","common.edit":"Dzenle","common.archive":"Arivle","common.viewAll":"Tmn Gr","common.loading":"Ykleniyor...","common.room":"Oda","common.amount":"Tutar","common.description":"Aklama","common.search":"Ara...","common.continue":"Devam Et","common.back":"Geri","common.confirm":"Onayla","common.by":"tarafndan","common.none":"Yok","common.staff":"Personel","common.unknown":"Bilinmiyor","common.update":"Gncelle","common.deleteConfirm":"Bu etkinlii silmek istediinize emin misiniz?","common.next":"leri","common.finish":"Bitir","common.reopen":"Yeniden A","common.resolve":"z","roster.title":"Haftalk izelge","roster.noStaff":"Personel bulunamad","menu.title":"Personel Gnlk Mens","menu.content":"Gnn Mens","menu.edit":"Meny Dzenle","menu.updateSuccess":"Men baaryla gncellendi","menu.noMenuToday":"Bugn iin henz men paylalmad.","menu.hours":"Servis Saatleri","menu.breakfastTime":"Kahvalt: 07:00 - 09:00","menu.lunchTime":"le Yemei: 12:00 - 13:30","menu.dinnerTime":"Akam Yemei: 17:00 - 18:30","hotel.secure.title":"Gizli Bilgiler (KBS / Acente)","hotel.secure.encrypted":"ifreli Blm","hotel.secure.safeCode":"Kasa ifresi","hotel.secure.agency":"Acente Girileri (Extranet)","hotel.secure.other":"Dier Kasa Bilgileri","hotel.secure.kbs":"KBS Giri Bilgileri","hotel.secure.safeInfo":"Kasa ve Anahtar Bilgileri","hotel.settings.fixturePrices":"Demirba Hasar Fiyatlar","fixture.hand_towel":"El Havlusu","fixture.bath_towel":"Banyo Havlusu","fixture.bed_sheet":"araf","fixture.pillow_case":"Yastk Klf","fixture.duvet_cover":"Nevresim","fixture.bathrobe":"Bornoz","fixture.mattress_protector":"Alez","hotel.settings.minibarPrices":"Minibar Fiyatlar","minibar.cola":"Cola","minibar.cola_zero":"Cola Zero","minibar.fanta":"Fanta","minibar.sprite":"Sprite","minibar.soda":"Maden Suyu","offday.management.title":"zin & Vardiya Ynetimi","offday.management.desc":"Personel izin ve vardiya taleplerini ynetin.","offday.pending":"Bekleyen Talepler","offday.history":"Talep Gemiim","offday.petitions":"ikayet Dilekeleri","messages.title":"Mesajlar","messages.search":"Personel ara...","messages.announcements":"Genel Duyurular","messages.broadcast":"Tm personele yaynla","feedback.anonymous.title":"Anonim Geri Bildirim","feedback.anonymous.subtitle":"Sesiniz gvenle duyulsun.","feedback.privacy.title":"Gizlilik Garantili","feedback.privacy.desc":"Kullanc ilikilendirmesi olmayan otel dzeyinde koleksiyonlar kullanyoruz. Veritaban yneticileri bile geri bildirimi belirli bir kullanc hesabna kadar takip edemez.","feedback.submit.title":"Anonim ikayet Gnder","feedback.submit.desc":"Kimliiniz tamamen gizlidir. Mesajnzla birlikte hibir kiisel veri saklanmaz.","feedback.management.view":"Ynetim Grnm","ai.title":"Relay AI Asistan","ai.poweredBy":"Gemini & Gemma ile glendirilmitir","ai.model":"Yapay Zeka Modeli","ai.mode.assistant":"Asistan Modu","ai.mode.quota":"Kota Dengeli Mod","ai.task.general":"Genel Asistan Talebi","ai.task.generalDesc":"Bugn size nasl yardmc olabilirim?","ai.task.incident":"Tutanak Raporu","ai.task.incidentDesc":"Olay tanmlayn (Kim, Ne, Ne Zaman, Nerede)...","ai.task.email":"Profesyonel E-posta stei","ai.task.emailDesc":"Alc kim ve ana mesaj nedir?","ai.task.review":"Yorum Yantla","ai.task.reviewDesc":"Misafir yorumunu buraya yaptrn...","ai.context.title":"Otel Bilgi Bankas","ai.context.desc":"Oteliniz hakknda gerekleri girin (kahvalt saatleri, wifi ifresi, kurallar). AI, doru yantlar oluturmak iin bunu kullanacaktr.","ai.context.save":"Balam Kaydet","ai.generate":"Olutur","ai.cancel":"ptal","notes.edited":"(dzenlendi)","notes.label":"vardiya notlar","notes.noFixturePrices":"Ynetim tarafndan demirba fiyat girilmemi.","tours.catalogue.title":"Tur Katalou","tours.catalogue.desc":"Mevcut turlar inceleyin ve satlar takip edin.","tours.add":"Yeni Tur Ekle","tours.edit":"Turu Dzenle","tours.create":"Yeni Tur Girii Olutur","tours.form.name":"Tur Ad","tours.form.desc":"Ksa Aklama","tours.form.basePrice":"Taban Fiyat (EUR)","tours.form.adultPrice":"Yetikin Fiyat","tours.form.child37Price":"ocuk (3-7y)","tours.form.child03Price":"Bebek (0-3y)","tours.form.operatingDays":"Operasyon Gnleri","tours.noTours":"Katalogda henz tur yok.","tours.createFirst":"lk turu olutur","tours.local":"Yerel Tur","tours.clickToLog":"Sat girmek iin bir kategoriye tklayn.","tours.book.title":"Yeni Rezervasyon: {name}","tours.book.desc":"Bu tur iin rezervasyon detaylarn girin.","tours.book.guestName":"Misafir Ad","tours.book.room":"Oda No","tours.book.pax":"Kii","tours.book.date":"Tarih","tours.book.totalPrice":"Toplam Fiyat","tours.book.confirm":"Rezervasyonu Onayla","tour.intro.title":"Relay'e Hogeldiniz","tour.intro.desc":"Bu sizin dijital devir teslim platformunuz. Hadi hzlca bir gz atalm.","tour.compliance.title":"Vardiya Uyumluluu","tour.compliance.desc":"Zorunlu KBS ve Acente kontrollerini buradan takip edin. Nabz iareti aciliyeti gsterir.","tour.feed.title":"Aktivite Ak","tour.feed.desc":"Tm misafir talepleri ve bakm kaytlar burada anlk olarak grnr.","tour.sales.title":"Sat ve Turlar","tour.sales.desc":"Tur Satlarn, zin Gnlerini ve Misafir Geri Bildirimlerini ynetmek iin sekmeleri kullann.","tour.notifications.title":"Bildirimler","tour.notifications.desc":"zin talepleri ve nemli mesajlardan haberdar olun.","tour.profile.title":"Profiliniz","tour.profile.desc":"Ayarlara, eitimlere ve k yapma seeneklerine buradan ulan.","sales.tracker":"Sat Takibi","sales.new":"Yeni Sat","sales.newType":"Yeni {label}","sales.service":"Hizmet","sales.other":"Dier / zel","sales.customName":"zel tur ad girin...","sales.pickupTime":"Aln Saati","sales.price":"Fiyat","sales.notes":"Notlar","sales.optionalNotes":"stee bal notlar...","sales.create":"Sat Olutur","sales.noSales":"Henz {label} sat yok.","sales.soldBy":"Satan: {name}","roster.show":"izelgede Gster","roster.hide":"izelgeden Gizle","compliance.kbs.required":"KBS Kontrol Gerekli!","compliance.kbs.pastTime":"Saat 23:00' geti","compliance.kbs.desc":"KBS sistem kontrol vardiyanz bitmeden tamamlanmaldr. Bu zorunlu bir uyumluluk gerekliliidir.","compliance.kbs.remindLater":"Sonra Hatrlat","compliance.kbs.checkNow":"KBS'yi imdi Kontrol Et","compliance.agency.label":"Acente Mesajlar Kontrol Edildi","compliance.agency.desc":"Tm OTA mesajlarn (Booking, Expedia, vb.) kontrol edin","compliance.kbs.label":"KBS Sistemi Doruland","compliance.kbs.checklistDesc":"23:00'den nce gnlk uyumluluk kontrol","onboarding.welcome.title":"Relay'e Hogeldiniz","onboarding.welcome.desc":"Dijital operasyon merkeziniz. Hadi kuruluma balayalm.","onboarding.activity.title":"Operasyon Ak","onboarding.activity.desc":"Misafir taleplerini, teknik servis kaytlarn ve vardiya notlarn canl izleyin.","onboarding.shift.title":"Vardiya Ynetimi","onboarding.shift.desc":"Vardiya balat/bitir, KBS kontrollerini yap ve kasa saymn gerekletir.","onboarding.team.title":"izelge ve Satlar","onboarding.team.desc":"Haftalk programnz kontrol edin, izin isteyin ve tur satlarn ynetin.","onboarding.localization.title":"Dil Seimi","onboarding.localization.desc":"Dnya ikonunu kullanarak dilediiniz an dil deitirebilirsiniz.","onboarding.stepOf":"{current} / {total}","log.stickyBoard":"nemli Notlar","compliance.kbsLate":"KBS Kontrol hemen yaplmaldr! Ltfen misafir kimliklerini dorulayn."}},Xe=Ct()(hv((c,d)=>({language:"tr",setLanguage:r=>{c({language:r});const{user:o,updateSettings:u}=Ge.getState();o&&u({language:r})},t:(r,o)=>{const u=d().language;let m=ph[u][r]||ph.en[r]||r;return o&&Object.entries(o).forEach(([h,b])=>{m=m.replace(`{${h}}`,b)}),m}}),{name:"relay-language",partialize:c=>({language:c.language})}));Ge.subscribe(c=>{var r,o;const d=(o=(r=c.user)==null?void 0:r.settings)==null?void 0:o.language;d&&d!==Xe.getState().language&&Xe.setState({language:d})});function G(...c){return ob(Xh(c))}function ii(){const{language:c}=Xe.getState();return c==="tr"?uv:zy}function ls(c){if(!c)return"";const d=typeof c=="string"||typeof c=="number"?new Date(c):c;return bt(d,"dd-MM-yyyy")}function Xd(c){if(!c)return"";const d=typeof c=="string"||typeof c=="number"?new Date(c):c;return bt(d,"dd-MM-yyyy HH:mm")}const gv=tu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 active:scale-[0.98]",{variants:{variant:{default:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg glow-primary hover:from-indigo-600 hover:to-purple-700",destructive:"bg-gradient-to-r from-rose-500 to-red-600 text-white shadow-lg glow-critical hover:from-rose-600 hover:to-red-700",outline:"border border-zinc-700 bg-transparent hover:bg-zinc-800 hover:border-zinc-600",secondary:"bg-zinc-800 text-zinc-100 hover:bg-zinc-700",ghost:"hover:bg-zinc-800/50 hover:text-zinc-100",link:"text-indigo-400 underline-offset-4 hover:underline",success:"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg glow-success hover:from-emerald-600 hover:to-green-700"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-12 rounded-xl px-8 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ee=j.forwardRef(({className:c,variant:d,size:r,asChild:o=!1,...u},m)=>{const h=o?db:"button";return n.jsx(h,{className:G(gv({variant:d,size:r,className:c})),ref:m,...u})});ee.displayName="Button";const re=j.forwardRef(({className:c,type:d,...r},o)=>n.jsx("input",{type:d,className:G("flex h-10 w-full rounded-lg border border-zinc-700 bg-zinc-900/50 px-3 py-2 text-sm text-zinc-100 placeholder:text-zinc-500 transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500","disabled:cursor-not-allowed disabled:opacity-50","file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-zinc-100",c),ref:o,...r}));re.displayName="Input";function pv(){const c=el(),{signIn:d,loading:r,error:o,clearError:u}=Ge(),{t:m}=Xe(),[h,b]=j.useState(""),[p,g]=j.useState(""),[v,N]=j.useState(""),[w,E]=j.useState(!1),[_,M]=j.useState(null),T=async R=>{R.preventDefault(),u(),M(null),await d(h,p);const L=Ge.getState().user;if(L){try{const{doc:q,getDoc:F}=await oa(async()=>{const{doc:Y,getDoc:I}=await import("./vendor-firebase-DntPIKkY.js").then(D=>D.y);return{doc:Y,getDoc:I}},[]),{db:le}=await oa(async()=>{const{db:Y}=await Promise.resolve().then(()=>Ox);return{db:Y}},void 0);if(L.hotel_id){const Y=q(le,"hotels",L.hotel_id),I=await F(Y);if(I.exists()){const K=I.data().code;if(K){if(!v.trim()){M("Hotel Code is required for this hotel."),await Ge.getState().signOut();return}if(K!==v.trim().toUpperCase()){M("Invalid Hotel Code."),await Ge.getState().signOut();return}}}else{M("Account configuration error: Hotel not found."),await Ge.getState().signOut();return}}else!L.hotel_id&&location.pathname}catch(q){console.error("Error verifying hotel code:",q),M("Verification failed. Please try again."),await Ge.getState().signOut();return}c("/")}};return n.jsxs("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[n.jsx(me.div,{className:"absolute w-96 h-96 rounded-full bg-indigo-500/20 blur-3xl",animate:{x:[0,100,0],y:[0,-50,0]},transition:{duration:20,repeat:1/0,ease:"easeInOut"},style:{top:"10%",left:"10%"}}),n.jsx(me.div,{className:"absolute w-80 h-80 rounded-full bg-purple-500/20 blur-3xl",animate:{x:[0,-80,0],y:[0,80,0]},transition:{duration:25,repeat:1/0,ease:"easeInOut"},style:{bottom:"10%",right:"10%"}}),n.jsx(me.div,{className:"absolute w-64 h-64 rounded-full bg-rose-500/10 blur-3xl",animate:{x:[0,50,-50,0],y:[0,-30,30,0]},transition:{duration:15,repeat:1/0,ease:"easeInOut"},style:{top:"40%",right:"20%"}}),n.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:`linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)`,backgroundSize:"50px 50px"}})]}),n.jsxs(me.div,{className:"relative z-10 w-full max-w-md mx-4",initial:{opacity:0,y:30,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,ease:"easeOut"},children:[n.jsxs("div",{className:"glass rounded-3xl p-8 shadow-2xl",children:[n.jsxs(me.div,{className:"flex flex-col items-center mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:[n.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 glow-primary mb-4",children:n.jsx(Yc,{className:"w-8 h-8 text-white"})}),n.jsx("h1",{className:"text-3xl font-bold text-gradient-primary",children:"Relay"}),n.jsx("p",{className:"text-zinc-400 mt-2",children:m("app.description")})]}),n.jsxs(me.form,{onSubmit:T,className:"space-y-5",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Yc,{className:"absolute left-3 top-2.5 w-4 h-4 text-zinc-500"}),n.jsx(re,{value:v,onChange:R=>N(R.target.value.toUpperCase()),className:"pl-9 bg-black/50 border-zinc-800 text-white placeholder:text-zinc-600 uppercase tracking-widest font-mono",placeholder:"HOTEL CODE",maxLength:10})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Wc,{className:"absolute left-3 top-2.5 w-4 h-4 text-zinc-500"}),n.jsx(re,{type:"email",value:h,onChange:R=>b(R.target.value),className:"pl-9 bg-black/50 border-zinc-800 text-white placeholder:text-zinc-600",placeholder:m("auth.email")})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Vc,{className:"absolute left-3 top-2.5 w-4 h-4 text-zinc-500"}),n.jsx(re,{type:w?"text":"password",value:p,onChange:R=>g(R.target.value),className:"pl-9 pr-9 bg-black/50 border-zinc-800 text-white placeholder:text-zinc-600",placeholder:m("auth.password")}),n.jsx("button",{type:"button",onClick:()=>E(!w),className:"absolute right-3 top-2.5 text-zinc-500 hover:text-white",children:w?n.jsx(Pc,{className:"w-4 h-4"}):n.jsx(er,{className:"w-4 h-4"})})]})]}),(o||_)&&n.jsx("div",{className:"p-3 rounded-lg bg-rose-500/10 border border-rose-500/20 text-rose-400 text-xs text-center",children:_||o}),n.jsx(ee,{type:"submit",className:"w-full h-12 text-base",disabled:r,children:r?n.jsxs(n.Fragment,{children:[n.jsx(at,{className:"w-5 h-5 animate-spin"}),m("common.loading")]}):m("auth.login")})]}),n.jsxs(me.div,{className:"text-center text-sm mt-6 space-y-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.5},children:[n.jsxs("p",{className:"text-zinc-500",children:[m("auth.noAccount")," ",n.jsx(Dx,{to:"/register",className:"text-indigo-400 hover:text-indigo-300 transition-colors",children:m("auth.register")})]}),n.jsx("p",{className:"text-zinc-600 text-xs",children:m("auth.contactGM")})]})]}),n.jsx("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 w-3/4 h-20 bg-indigo-500/20 blur-3xl rounded-full"})]})]})}const Wl={kbs_time:"23:00",check_agency_intervals:[9,12,15,18,21]},ut=Ct(c=>({hotel:null,loading:!0,error:null,loadHotel:async d=>{c({loading:!0,error:null});try{const r=he(te,"hotels",d),o=await ns(r);if(o.exists()){const u=o.data();c({hotel:{id:d,code:u.code,info:u.info||{name:"Hotel",address:""},settings:u.settings||Wl},loading:!1})}else c({hotel:null,loading:!1,error:"Hotel not found"})}catch(r){console.error("Error loading hotel:",r),c({error:r instanceof Error?r.message:"Failed to load hotel",loading:!1})}},subscribeToHotel:d=>{c({loading:!0,error:null});const r=he(te,"hotels",d);return $t(r,u=>{if(u.exists()){const m=u.data();c({hotel:{id:d,code:m.code,info:m.info||{name:"Hotel",address:""},settings:m.settings||Wl},loading:!1,error:null})}else c({hotel:null,loading:!1})},u=>{console.error("Error subscribing to hotel:",u),c({error:u.message,loading:!1})})},createHotelIfNotExists:async(d,r)=>{try{const o=he(te,"hotels",d);(await ns(o)).exists()||(await Pa(o,{info:r,settings:Wl}),c({hotel:{id:d,info:r,settings:Wl},loading:!1}))}catch(o){throw console.error("Error creating hotel:",o),o}},updateHotelSettings:async(d,r)=>{try{const o=he(te,"hotels",d);await Pa(o,{settings:r},{merge:!0})}catch(o){throw console.error("Error updating hotel settings:",o),o}},joinHotelByCode:async(d,r)=>{try{const{collection:o,query:u,where:m,getDocs:h,updateDoc:b,arrayUnion:p,doc:g}=await oa(async()=>{const{collection:R,query:L,where:q,getDocs:F,updateDoc:le,arrayUnion:Y,doc:I}=await import("./vendor-firebase-DntPIKkY.js").then(D=>D.y);return{collection:R,query:L,where:q,getDocs:F,updateDoc:le,arrayUnion:Y,doc:I}},[]),v=o(te,"hotels"),N=u(v,m("code","==",d)),w=await h(N);if(w.empty)return!1;const _=w.docs[0].id,M=g(te,"hotels",_);await b(M,{staff_list:p(r.uid)});const T=g(te,"users",r.uid);return await Pa(T,{hotel_id:_},{merge:!0}),!0}catch(o){throw console.error("Error joining hotel:",o),o}},validateHotelCode:async d=>{try{const{collection:r,query:o,where:u,getDocs:m}=await oa(async()=>{const{collection:g,query:v,where:N,getDocs:w}=await import("./vendor-firebase-DntPIKkY.js").then(E=>E.y);return{collection:g,query:v,where:N,getDocs:w}},[]),h=r(te,"hotels"),b=o(h,u("code","==",d)),p=await m(b);return p.empty?null:p.docs[0].id}catch(r){return console.error("Error validating hotel code:",r),null}},createNewHotel:async(d,r)=>{try{const u=(()=>{const b="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let p="";for(let g=0;g<6;g++)p+=b.charAt(Math.floor(Math.random()*b.length));return p})(),m=await oa(()=>import("./vendor-firebase-DntPIKkY.js").then(b=>b.y),[]).then(b=>b.addDoc(b.collection(te,"hotels"),{info:d,code:u,settings:Wl,staff_list:[r.uid],owner_id:r.uid,created_at:b.serverTimestamp()})),h=he(te,"users",r.uid);return await Pa(h,{hotel_id:m.id},{merge:!0}),m.id}catch(o){return console.error("Error creating hotel:",o),null}}}));function bv(){const c=el(),{t:d}=Xe(),[r,o]=j.useState(""),[u,m]=j.useState(""),[h,b]=j.useState(""),[p,g]=j.useState(""),[v,N]=j.useState("receptionist"),[w,E]=j.useState(""),[_,M]=j.useState(!1),[T,R]=j.useState(!1),[L,q]=j.useState(!1),[F,le]=j.useState(null),{validateHotelCode:Y}=ut(),I=async K=>{if(K.preventDefault(),le(null),!r.trim()){le(d("auth.error.enterName"));return}if(h.length<6){le(d("auth.error.passwordLength"));return}if(h!==p){le(d("auth.error.passwordMismatch"));return}let Q=null;if(!_){if(!w.trim()){le("Please enter a Hotel Code to join your team.");return}if(q(!0),Q=await Y(w.trim().toUpperCase()),!Q){q(!1),le("Invalid Hotel Code. Please check with your manager.");return}}q(!0);try{const P=await vy(ei,u,h);if(await Pa(he(te,"users",P.user.uid),{email:u,name:r.trim(),role:_?"gm":v,current_shift_type:null,hotel_id:Q,created_at:new Date}),Q){const{updateDoc:ie,arrayUnion:$,doc:ae}=await oa(async()=>{const{updateDoc:de,arrayUnion:y,doc:H}=await import("./vendor-firebase-DntPIKkY.js").then(ne=>ne.y);return{updateDoc:de,arrayUnion:y,doc:H}},[]);await ie(ae(te,"hotels",Q),{staff_list:$(P.user.uid)})}c(_?"/setup-hotel":"/")}catch(P){const ie=P instanceof Error?P.message:d("auth.error.regFailed");le(ie.replace("Firebase: ","").replace(/\(auth\/.*\)/,"").trim()),q(!1)}},D=[{value:"receptionist",label:d("auth.role.receptionist"),desc:d("auth.role.receptionistDesc")},{value:"housekeeping",label:d("auth.role.housekeeping"),desc:d("auth.role.housekeepingDesc")}];return n.jsxs("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[n.jsx(me.div,{className:"absolute w-96 h-96 rounded-full bg-indigo-500/20 blur-3xl",animate:{x:[0,100,0],y:[0,-50,0]},transition:{duration:20,repeat:1/0,ease:"easeInOut"},style:{top:"10%",left:"10%"}}),n.jsx(me.div,{className:"absolute w-80 h-80 rounded-full bg-purple-500/20 blur-3xl",animate:{x:[0,-80,0],y:[0,80,0]},transition:{duration:25,repeat:1/0,ease:"easeInOut"},style:{bottom:"10%",right:"10%"}}),n.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:`linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),
                              linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)`,backgroundSize:"50px 50px"}})]}),n.jsx(me.div,{className:"relative z-10 w-full max-w-md mx-4",initial:{opacity:0,y:30,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.6,ease:"easeOut"},children:n.jsxs("div",{className:"glass rounded-3xl p-8 shadow-2xl",children:[n.jsxs(Dx,{to:"/login",className:"inline-flex items-center gap-1 text-sm text-zinc-400 hover:text-zinc-200 transition-colors mb-6",children:[n.jsx(ub,{className:"w-4 h-4"}),d("common.back")]}),n.jsxs(me.div,{className:"flex flex-col items-center mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5},children:[n.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 glow-primary mb-4",children:n.jsx(Yc,{className:"w-8 h-8 text-white"})}),n.jsx("h1",{className:"text-2xl font-bold text-gradient-primary",children:d("auth.register")}),n.jsx("p",{className:"text-zinc-400 mt-1 text-sm",children:d("auth.registerSubtitle")})]}),n.jsxs("form",{onSubmit:I,className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("p",{className:"text-xs text-zinc-400 font-medium uppercase tracking-wider",children:"I am a..."}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>M(!1),className:`p-3 rounded-xl border text-left transition-all ${_?"bg-zinc-900 border-zinc-800 text-zinc-500 hover:border-zinc-700":"bg-indigo-600/10 border-indigo-500/50 text-indigo-400"}`,children:[n.jsx("div",{className:"font-semibold text-sm mb-1",children:"Staff Member"}),n.jsx("div",{className:"text-[10px] opacity-70",children:"Joining a team"})]}),n.jsxs("button",{type:"button",onClick:()=>M(!0),className:`p-3 rounded-xl border text-left transition-all ${_?"bg-indigo-600/10 border-indigo-500/50 text-indigo-400":"bg-zinc-900 border-zinc-800 text-zinc-500 hover:border-zinc-700"}`,children:[n.jsx("div",{className:"font-semibold text-sm mb-1",children:"Manager"}),n.jsx("div",{className:"text-[10px] opacity-70",children:"Creating a hotel"})]})]})]}),!_&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Yc,{className:"absolute left-3 top-2.5 w-4 h-4 text-zinc-500"}),n.jsx(re,{value:w,onChange:K=>E(K.target.value.toUpperCase()),className:"pl-9 bg-black/50 border-zinc-800 text-white placeholder:text-zinc-600 uppercase tracking-widest font-mono",placeholder:"HOTEL CODE (e.g. RELAY-X)",maxLength:10,required:!0})]}),n.jsx("p",{className:"text-[10px] text-zinc-500 ml-1",children:"Ask your manager for the hotel code."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ws,{className:"absolute left-3 top-2.5 w-4 h-4 text-zinc-500"}),n.jsx(re,{value:r,onChange:K=>o(K.target.value),className:"pl-9 bg-black/50 border-zinc-800 text-white placeholder:text-zinc-600",placeholder:d("auth.name"),required:!0})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Wc,{className:"absolute left-3 top-2.5 w-4 h-4 text-zinc-500"}),n.jsx(re,{type:"email",value:u,onChange:K=>m(K.target.value),className:"pl-9 bg-black/50 border-zinc-800 text-white placeholder:text-zinc-600",placeholder:d("auth.email"),required:!0})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Vc,{className:"absolute left-3 top-2.5 w-4 h-4 text-zinc-500"}),n.jsx(re,{type:T?"text":"password",value:h,onChange:K=>b(K.target.value),className:"pl-9 pr-9 bg-black/50 border-zinc-800 text-white placeholder:text-zinc-600",placeholder:d("auth.password"),required:!0}),n.jsx("button",{type:"button",onClick:()=>R(!T),className:"absolute right-3 top-2.5 text-zinc-500 hover:text-white",children:T?n.jsx(Pc,{className:"w-4 h-4"}):n.jsx(er,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Vc,{className:"absolute left-3 top-2.5 w-4 h-4 text-zinc-500"}),n.jsx(re,{type:T?"text":"password",value:p,onChange:K=>g(K.target.value),className:"pl-9 bg-black/50 border-zinc-800 text-white placeholder:text-zinc-600",placeholder:d("auth.confirmPassword"),required:!0})]})]}),!_&&n.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4",children:D.map(K=>n.jsxs("div",{onClick:()=>N(K.value),className:`cursor-pointer p-3 rounded-xl border transition-all ${v===K.value?"bg-zinc-800 border-zinc-700":"bg-black/20 border-zinc-800/50 hover:bg-zinc-900"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:`text-xs font-semibold ${v===K.value?"text-white":"text-zinc-400"}`,children:K.label}),v===K.value&&n.jsx(me.div,{layoutId:"check",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500"})})]}),n.jsx("p",{className:"text-[10px] text-zinc-500 leading-tight",children:K.desc})]},K.value))}),F&&n.jsx(me.div,{className:"p-3 rounded-lg bg-rose-500/10 border border-rose-500/30 text-rose-300 text-sm",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:F}),n.jsx(ee,{type:"submit",className:"w-full h-12 text-base",disabled:L,children:L?n.jsxs(n.Fragment,{children:[n.jsx(at,{className:"w-5 h-5 animate-spin"}),d("auth.creatingAccount")]}):d("auth.createAccount")})]}),n.jsx("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 w-3/4 h-20 bg-indigo-500/20 blur-3xl rounded-full"})]})})]})}const fa=j.forwardRef(({className:c,...d},r)=>n.jsx("div",{ref:r,className:G("rounded-2xl glass glass-hover",c),...d}));fa.displayName="Card";const tn=j.forwardRef(({className:c,...d},r)=>n.jsx("div",{ref:r,className:G("flex flex-col space-y-1.5 p-6",c),...d}));tn.displayName="CardHeader";const _t=j.forwardRef(({className:c,...d},r)=>n.jsx("div",{ref:r,className:G("text-xl font-semibold leading-none tracking-tight text-zinc-100",c),...d}));_t.displayName="CardTitle";const sr=j.forwardRef(({className:c,...d},r)=>n.jsx("div",{ref:r,className:G("text-sm text-zinc-400",c),...d}));sr.displayName="CardDescription";const ma=j.forwardRef(({className:c,...d},r)=>n.jsx("div",{ref:r,className:G("p-6 pt-0",c),...d}));ma.displayName="CardContent";const yv=j.forwardRef(({className:c,...d},r)=>n.jsx("div",{ref:r,className:G("flex items-center p-6 pt-0",c),...d}));yv.displayName="CardFooter";function vv(){const c=el(),{user:d}=Ge(),{t:r}=Xe(),{joinHotelByCode:o,createNewHotel:u}=ut(),[m,h]=j.useState("join"),[b,p]=j.useState(!1),[g,v]=j.useState(null),[N,w]=j.useState(""),[E,_]=j.useState(""),[M,T]=j.useState(""),R=async q=>{if(q.preventDefault(),!(!N.trim()||!d)){p(!0),v(null);try{await o(N.trim().toUpperCase(),d)?c("/"):v(r("setup.error.joinFailed")||"Invalid hotel code")}catch{v(r("setup.error.joinFailed"))}finally{p(!1)}}},L=async q=>{if(q.preventDefault(),!(!E.trim()||!d)){p(!0),v(null);try{await u({name:E.trim(),address:M.trim()},d)?c("/"):v(r("setup.error.createFailed"))}catch{v(r("setup.error.createFailed"))}finally{p(!1)}}};return n.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center p-4",children:n.jsxs("div",{className:"w-full max-w-md space-y-8",children:[n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-xl mx-auto flex items-center justify-center shadow-lg shadow-indigo-500/20",children:n.jsx(fb,{className:"w-6 h-6 text-white"})}),n.jsx("h1",{className:"text-2xl font-bold text-white",children:r("setup.title")}),n.jsx("p",{className:"text-zinc-400 text-sm",children:r("setup.subtitle")})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 p-1 bg-zinc-900 rounded-lg border border-zinc-800",children:[n.jsx("button",{onClick:()=>h("join"),className:`py-2 text-sm font-medium rounded-md transition-all ${m==="join"?"bg-zinc-800 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:r("setup.joinExisting")||"Join Hotel"}),n.jsx("button",{onClick:()=>h("create"),className:`py-2 text-sm font-medium rounded-md transition-all ${m==="create"?"bg-zinc-800 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:r("setup.createNew")||"Create Hotel"})]}),n.jsx(fa,{className:"bg-zinc-900 border-zinc-800",children:n.jsx(ma,{className:"p-6",children:m==="join"?n.jsxs("form",{onSubmit:R,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-medium text-zinc-400 uppercase tracking-wider",children:"Hotel Code"}),n.jsxs("div",{className:"relative",children:[n.jsx(Md,{className:"absolute left-3 top-2.5 w-4 h-4 text-zinc-500"}),n.jsx(re,{value:N,onChange:q=>w(q.target.value.toUpperCase()),placeholder:"RELAY-XXXX",className:"pl-9 bg-zinc-950 border-zinc-800 text-white placeholder:text-zinc-600 uppercase font-mono tracking-widest",maxLength:10})]}),n.jsx("p",{className:"text-[10px] text-zinc-500",children:"Ask your General Manager for the 6-character hotel code."})]}),g&&n.jsx("div",{className:"p-3 rounded-lg bg-rose-500/10 border border-rose-500/20 text-rose-400 text-xs",children:g}),n.jsxs(ee,{type:"submit",disabled:b||!N.trim(),className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-medium",children:[b?n.jsx(at,{className:"w-4 h-4 animate-spin mr-2"}):n.jsx(mb,{className:"w-4 h-4 mr-2"}),r("setup.joinSuccess")||"Join Hotel"]})]}):n.jsxs("form",{onSubmit:L,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-medium text-zinc-400 uppercase tracking-wider",children:r("setup.hotelName")}),n.jsx(re,{value:E,onChange:q=>_(q.target.value),placeholder:r("setup.hotelNamePlaceholder")||"e.g. Grand Hotel",className:"bg-zinc-950 border-zinc-800 text-white"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-xs font-medium text-zinc-400 uppercase tracking-wider",children:[r("setup.address")," ",n.jsxs("span",{className:"text-zinc-600 lowercase",children:["(",r("setup.optional"),")"]})]}),n.jsx(re,{value:M,onChange:q=>T(q.target.value),placeholder:r("setup.addressPlaceholder")||"City, Country",className:"bg-zinc-950 border-zinc-800 text-white"})]}),g&&n.jsx("div",{className:"p-3 rounded-lg bg-rose-500/10 border border-rose-500/20 text-rose-400 text-xs",children:g}),n.jsxs(ee,{type:"submit",disabled:b||!E.trim(),className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium",children:[b?n.jsx(at,{className:"w-4 h-4 animate-spin mr-2"}):n.jsx(cs,{className:"w-4 h-4 mr-2"}),r("setup.createSuccess")||"Create Hotel"]})]})})})]})})}const Qd=xb,Zd=gb,Nv=j.forwardRef(({className:c,inset:d,children:r,...o},u)=>n.jsxs(Qh,{ref:u,className:G("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",d&&"pl-8",c),...o,children:[r,n.jsx(Ps,{className:"ml-auto h-4 w-4"})]}));Nv.displayName=Qh.displayName;const jv=j.forwardRef(({className:c,...d},r)=>n.jsx(Zh,{ref:r,className:G("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",c),...d}));jv.displayName=Zh.displayName;const Jc=j.forwardRef(({className:c,sideOffset:d=4,...r},o)=>n.jsx(hb,{children:n.jsx(Jh,{ref:o,sideOffset:d,className:G("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",c),...r})}));Jc.displayName=Jh.displayName;const ra=j.forwardRef(({className:c,inset:d,...r},o)=>n.jsx(Fh,{ref:o,className:G("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",d&&"pl-8",c),...r}));ra.displayName=Fh.displayName;const zv=j.forwardRef(({className:c,children:d,checked:r,...o},u)=>n.jsxs($h,{ref:u,className:G("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",c),checked:r,...o,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Ih,{children:n.jsx(kt,{className:"h-4 w-4"})})}),d]}));zv.displayName=$h.displayName;const wv=j.forwardRef(({className:c,children:d,...r},o)=>n.jsxs(Wh,{ref:o,className:G("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",c),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Ih,{children:n.jsx(Fd,{className:"h-2 w-2 fill-current"})})}),d]}));wv.displayName=Wh.displayName;const Fc=j.forwardRef(({className:c,inset:d,...r},o)=>n.jsx(Ph,{ref:o,className:G("px-2 py-1.5 text-sm font-semibold",d&&"pl-8",c),...r}));Fc.displayName=Ph.displayName;const ti=j.forwardRef(({className:c,...d},r)=>n.jsx(ex,{ref:r,className:G("-mx-1 my-1 h-px bg-muted",c),...d}));ti.displayName=ex.displayName;function Sv({forceOpen:c,onClose:d}){const{user:r,updateSettings:o}=Ge(),{t:u}=Xe(),[m,h]=j.useState(!1),[b,p]=j.useState(0);j.useEffect(()=>{var M;c?(h(!0),p(0)):r&&!((M=r.settings)!=null&&M.onboarding_seen)&&h(!0)},[r,c]);const g=[{title:u("onboarding.welcome.title"),description:u("onboarding.welcome.desc"),icon:pb,color:"text-indigo-400"},{title:u("onboarding.activity.title"),description:u("onboarding.activity.desc"),icon:tx,color:"text-emerald-400"},{title:u("onboarding.shift.title"),description:u("onboarding.shift.desc"),icon:ax,color:"text-amber-400"},{title:u("onboarding.team.title"),description:u("onboarding.team.desc"),icon:Dn,color:"text-purple-400"},{title:u("onboarding.localization.title"),description:u("onboarding.localization.desc"),icon:nx,color:"text-blue-400"}],v=()=>{b<g.length-1?p(M=>M+1):w()},N=()=>{b>0&&p(M=>M-1)},w=async()=>{r&&!c&&await o({onboarding_seen:!0}),h(!1),d&&d()};if(!m)return null;const E=g[b],_=E.icon;return n.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:n.jsxs(me.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},className:"w-full max-w-sm glass rounded-3xl overflow-hidden shadow-2xl border-white/10",children:[n.jsx("div",{className:"flex h-1 bg-white/5",children:g.map((M,T)=>n.jsx("div",{className:`flex-1 transition-all duration-500 ${T<=b?"bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]":""}`},T))}),n.jsxs("div",{className:"p-8 text-center space-y-6",children:[n.jsx("button",{onClick:w,className:"absolute top-4 right-4 text-zinc-500 hover:text-white transition-colors",children:n.jsx(St,{className:"w-5 h-5"})}),n.jsxs(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-6",children:[n.jsx("div",{className:`w-20 h-20 rounded-2xl bg-white/5 flex items-center justify-center mx-auto border border-white/10 ${E.color}`,children:n.jsx(_,{className:"w-10 h-10"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:E.title}),n.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:E.description})]})]},b),n.jsxs("div",{className:"flex items-center justify-between pt-4",children:[n.jsxs(ee,{variant:"ghost",onClick:N,disabled:b===0,className:"text-zinc-500 hover:text-white",children:[n.jsx(oi,{className:"w-4 h-4 mr-1"}),u("common.back")]}),n.jsxs(ee,{onClick:v,className:"bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg shadow-indigo-900/20",children:[b===g.length-1?u("common.finish"):u("common.next"),b<g.length-1&&n.jsx(Ps,{className:"w-4 h-4 ml-1"})]})]})]}),n.jsx("div",{className:"bg-white/5 p-4 text-center",children:n.jsx("p",{className:"text-[10px] text-zinc-500 font-medium uppercase tracking-widest",children:u("onboarding.stepOf").replace("{current}",(b+1).toString()).replace("{total}",g.length.toString())})})]})})}const _v=c=>c?c instanceof Dt?c.toDate():c instanceof Date?c:new Date:new Date,di=Ct((c,d)=>({notifications:[],unreadCount:0,loading:!0,error:null,subscribeToNotifications:(r,o,u)=>{c({loading:!0,error:null});const m=Le(te,"hotels",r,"notifications"),h=yt(m,ka("timestamp","desc"),ss(50));return $t(h,p=>{const v=p.docs.map(w=>{const E=w.data();return{id:w.id,type:E.type,title:E.title,content:E.content,timestamp:_v(E.timestamp),is_read:E.is_read||!1,target_role:E.target_role,target_uid:E.target_uid,link:E.link}}).filter(w=>w.target_uid===o||w.target_role==="all"||w.target_role===u||!w.target_uid&&!w.target_role),N=v.filter(w=>!w.is_read).length;c({notifications:v,unreadCount:N,loading:!1})},p=>{console.error("Notification subscription error:",p),c({error:p.message,loading:!1})})},addNotification:async(r,o)=>{try{const u=Le(te,"hotels",r,"notifications");await Ft(u,{...o,timestamp:Je(),is_read:!1})}catch(u){throw console.error("Error adding notification:",u),u}},markAsRead:async(r,o)=>{try{const u=he(te,"hotels",r,"notifications",o);await De(u,{is_read:!0})}catch(u){console.error("Error marking notification as read:",u)}},markAllAsRead:async r=>{const{notifications:o}=d(),u=o.filter(m=>!m.is_read).map(m=>m.id);if(u.length!==0)try{const m=Ny(te);u.forEach(h=>{const b=he(te,"hotels",r,"notifications",h);m.update(b,{is_read:!0})}),await m.commit()}catch(m){console.error("Error marking all notifications as read:",m)}},removeNotification:async(r,o)=>{try{const u=he(te,"hotels",r,"notifications",o);await Ta(u)}catch(u){console.error("Error removing notification:",u)}}}));function Cv(){const{hotel:c}=ut(),{notifications:d,markAsRead:r}=di(),o=d.filter(b=>b.type==="announcement"&&!b.is_read).sort((b,p)=>p.timestamp.getTime()-b.timestamp.getTime())[0],[u,m]=j.useState(!1);j.useEffect(()=>{m(!!o)},[o]);const h=async()=>{c!=null&&c.id&&o&&(await r(c.id,o.id),m(!1))};return n.jsx(dt,{children:u&&o&&n.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-zinc-950/80 backdrop-blur-sm",children:n.jsx(me.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-lg bg-zinc-900 border border-indigo-500/30 rounded-3xl shadow-2xl overflow-hidden",children:n.jsxs("div",{className:"relative p-8",children:[n.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:n.jsx(Kc,{className:"w-32 h-32 text-indigo-500"})}),n.jsxs("div",{className:"flex flex-col items-center text-center space-y-6 relative z-10",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-500/20 rounded-2xl flex items-center justify-center border border-indigo-500/30",children:n.jsx(Kc,{className:"w-8 h-8 text-indigo-400"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-2xl font-bold text-white tracking-tight",children:o.title}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-zinc-500 text-xs font-bold uppercase tracking-[0.2em]",children:[n.jsx(Xc,{className:"w-3 h-3"}),"Official GM Broadcast"]})]}),n.jsx("div",{className:"bg-zinc-950/50 p-6 rounded-2xl border border-zinc-800 w-full",children:n.jsxs("p",{className:"text-zinc-300 leading-relaxed text-lg italic",children:['"',o.content,'"']})}),n.jsxs(ee,{onClick:h,className:"w-full bg-indigo-600 hover:bg-indigo-500 h-12 rounded-xl font-bold group",children:["Understood",n.jsx(St,{className:"w-4 h-4 ml-2 opacity-50 group-hover:opacity-100 transition-opacity"})]})]})]})})})})}var bh;(function(c){c.STRING="string",c.NUMBER="number",c.INTEGER="integer",c.BOOLEAN="boolean",c.ARRAY="array",c.OBJECT="object"})(bh||(bh={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yh;(function(c){c.LANGUAGE_UNSPECIFIED="language_unspecified",c.PYTHON="python"})(yh||(yh={}));var vh;(function(c){c.OUTCOME_UNSPECIFIED="outcome_unspecified",c.OUTCOME_OK="outcome_ok",c.OUTCOME_FAILED="outcome_failed",c.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(vh||(vh={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=["user","model","function","system"];var jh;(function(c){c.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",c.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",c.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",c.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",c.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",c.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(jh||(jh={}));var zh;(function(c){c.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",c.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",c.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",c.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",c.BLOCK_NONE="BLOCK_NONE"})(zh||(zh={}));var wh;(function(c){c.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",c.NEGLIGIBLE="NEGLIGIBLE",c.LOW="LOW",c.MEDIUM="MEDIUM",c.HIGH="HIGH"})(wh||(wh={}));var Sh;(function(c){c.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",c.SAFETY="SAFETY",c.OTHER="OTHER"})(Sh||(Sh={}));var ai;(function(c){c.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",c.STOP="STOP",c.MAX_TOKENS="MAX_TOKENS",c.SAFETY="SAFETY",c.RECITATION="RECITATION",c.LANGUAGE="LANGUAGE",c.BLOCKLIST="BLOCKLIST",c.PROHIBITED_CONTENT="PROHIBITED_CONTENT",c.SPII="SPII",c.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",c.OTHER="OTHER"})(ai||(ai={}));var _h;(function(c){c.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",c.RETRIEVAL_QUERY="RETRIEVAL_QUERY",c.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",c.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",c.CLASSIFICATION="CLASSIFICATION",c.CLUSTERING="CLUSTERING"})(_h||(_h={}));var Ch;(function(c){c.MODE_UNSPECIFIED="MODE_UNSPECIFIED",c.AUTO="AUTO",c.ANY="ANY",c.NONE="NONE"})(Ch||(Ch={}));var Eh;(function(c){c.MODE_UNSPECIFIED="MODE_UNSPECIFIED",c.MODE_DYNAMIC="MODE_DYNAMIC"})(Eh||(Eh={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt extends Error{constructor(d){super(`[GoogleGenerativeAI Error]: ${d}`)}}class $s extends Tt{constructor(d,r){super(d),this.response=r}}class Ux extends Tt{constructor(d,r,o,u){super(d),this.status=r,this.statusText=o,this.errorDetails=u}}class An extends Tt{}class Hx extends Tt{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="https://generativelanguage.googleapis.com",Tv="v1beta",kv="0.24.1",Av="genai-js";var is;(function(c){c.GENERATE_CONTENT="generateContent",c.STREAM_GENERATE_CONTENT="streamGenerateContent",c.COUNT_TOKENS="countTokens",c.EMBED_CONTENT="embedContent",c.BATCH_EMBED_CONTENTS="batchEmbedContents"})(is||(is={}));class Dv{constructor(d,r,o,u,m){this.model=d,this.task=r,this.apiKey=o,this.stream=u,this.requestOptions=m}toString(){var d,r;const o=((d=this.requestOptions)===null||d===void 0?void 0:d.apiVersion)||Tv;let m=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||Ev}/${o}/${this.model}:${this.task}`;return this.stream&&(m+="?alt=sse"),m}}function Rv(c){const d=[];return c!=null&&c.apiClient&&d.push(c.apiClient),d.push(`${Av}/${kv}`),d.join(" ")}async function Mv(c){var d;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",Rv(c.requestOptions)),r.append("x-goog-api-key",c.apiKey);let o=(d=c.requestOptions)===null||d===void 0?void 0:d.customHeaders;if(o){if(!(o instanceof Headers))try{o=new Headers(o)}catch(u){throw new An(`unable to convert customHeaders value ${JSON.stringify(o)} to Headers: ${u.message}`)}for(const[u,m]of o.entries()){if(u==="x-goog-api-key")throw new An(`Cannot set reserved header name ${u}`);if(u==="x-goog-api-client")throw new An(`Header name ${u} can only be set using the apiClient field`);r.append(u,m)}}return r}async function Ov(c,d,r,o,u,m){const h=new Dv(c,d,r,o,m);return{url:h.toString(),fetchOptions:Object.assign(Object.assign({},Gv(m)),{method:"POST",headers:await Mv(h),body:u})}}async function ui(c,d,r,o,u,m={},h=fetch){const{url:b,fetchOptions:p}=await Ov(c,d,r,o,u,m);return Uv(b,p,h)}async function Uv(c,d,r=fetch){let o;try{o=await r(c,d)}catch(u){Hv(u,c)}return o.ok||await Bv(o,c),o}function Hv(c,d){let r=c;throw r.name==="AbortError"?(r=new Hx(`Request aborted when fetching ${d.toString()}: ${c.message}`),r.stack=c.stack):c instanceof Ux||c instanceof An||(r=new Tt(`Error fetching from ${d.toString()}: ${c.message}`),r.stack=c.stack),r}async function Bv(c,d){let r="",o;try{const u=await c.json();r=u.error.message,u.error.details&&(r+=` ${JSON.stringify(u.error.details)}`,o=u.error.details)}catch{}throw new Ux(`Error fetching from ${d.toString()}: [${c.status} ${c.statusText}] ${r}`,c.status,c.statusText,o)}function Gv(c){const d={};if((c==null?void 0:c.signal)!==void 0||(c==null?void 0:c.timeout)>=0){const r=new AbortController;(c==null?void 0:c.timeout)>=0&&setTimeout(()=>r.abort(),c.timeout),c!=null&&c.signal&&c.signal.addEventListener("abort",()=>{r.abort()}),d.signal=r.signal}return d}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(c){return c.text=()=>{if(c.candidates&&c.candidates.length>0){if(c.candidates.length>1&&console.warn(`This response had ${c.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Hc(c.candidates[0]))throw new $s(`${kn(c)}`,c);return Lv(c)}else if(c.promptFeedback)throw new $s(`Text not available. ${kn(c)}`,c);return""},c.functionCall=()=>{if(c.candidates&&c.candidates.length>0){if(c.candidates.length>1&&console.warn(`This response had ${c.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hc(c.candidates[0]))throw new $s(`${kn(c)}`,c);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Th(c)[0]}else if(c.promptFeedback)throw new $s(`Function call not available. ${kn(c)}`,c)},c.functionCalls=()=>{if(c.candidates&&c.candidates.length>0){if(c.candidates.length>1&&console.warn(`This response had ${c.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Hc(c.candidates[0]))throw new $s(`${kn(c)}`,c);return Th(c)}else if(c.promptFeedback)throw new $s(`Function call not available. ${kn(c)}`,c)},c}function Lv(c){var d,r,o,u;const m=[];if(!((r=(d=c.candidates)===null||d===void 0?void 0:d[0].content)===null||r===void 0)&&r.parts)for(const h of(u=(o=c.candidates)===null||o===void 0?void 0:o[0].content)===null||u===void 0?void 0:u.parts)h.text&&m.push(h.text),h.executableCode&&m.push("\n```"+h.executableCode.language+`
`+h.executableCode.code+"\n```\n"),h.codeExecutionResult&&m.push("\n```\n"+h.codeExecutionResult.output+"\n```\n");return m.length>0?m.join(""):""}function Th(c){var d,r,o,u;const m=[];if(!((r=(d=c.candidates)===null||d===void 0?void 0:d[0].content)===null||r===void 0)&&r.parts)for(const h of(u=(o=c.candidates)===null||o===void 0?void 0:o[0].content)===null||u===void 0?void 0:u.parts)h.functionCall&&m.push(h.functionCall);if(m.length>0)return m}const qv=[ai.RECITATION,ai.SAFETY,ai.LANGUAGE];function Hc(c){return!!c.finishReason&&qv.includes(c.finishReason)}function kn(c){var d,r,o;let u="";if((!c.candidates||c.candidates.length===0)&&c.promptFeedback)u+="Response was blocked",!((d=c.promptFeedback)===null||d===void 0)&&d.blockReason&&(u+=` due to ${c.promptFeedback.blockReason}`),!((r=c.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(u+=`: ${c.promptFeedback.blockReasonMessage}`);else if(!((o=c.candidates)===null||o===void 0)&&o[0]){const m=c.candidates[0];Hc(m)&&(u+=`Candidate was blocked due to ${m.finishReason}`,m.finishMessage&&(u+=`: ${m.finishMessage}`))}return u}function ci(c){return this instanceof ci?(this.v=c,this):new ci(c)}function Yv(c,d,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=r.apply(c,d||[]),u,m=[];return u={},h("next"),h("throw"),h("return"),u[Symbol.asyncIterator]=function(){return this},u;function h(w){o[w]&&(u[w]=function(E){return new Promise(function(_,M){m.push([w,E,_,M])>1||b(w,E)})})}function b(w,E){try{p(o[w](E))}catch(_){N(m[0][3],_)}}function p(w){w.value instanceof ci?Promise.resolve(w.value.v).then(g,v):N(m[0][2],w)}function g(w){b("next",w)}function v(w){b("throw",w)}function N(w,E){w(E),m.shift(),m.length&&b(m[0][0],m[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Vv(c){const d=c.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=Qv(d),[o,u]=r.tee();return{stream:Xv(o),response:Kv(u)}}async function Kv(c){const d=[],r=c.getReader();for(;;){const{done:o,value:u}=await r.read();if(o)return nu(Zv(d));d.push(u)}}function Xv(c){return Yv(this,arguments,function*(){const r=c.getReader();for(;;){const{value:o,done:u}=yield ci(r.read());if(u)break;yield yield ci(nu(o))}})}function Qv(c){const d=c.getReader();return new ReadableStream({start(o){let u="";return m();function m(){return d.read().then(({value:h,done:b})=>{if(b){if(u.trim()){o.error(new Tt("Failed to parse stream"));return}o.close();return}u+=h;let p=u.match(kh),g;for(;p;){try{g=JSON.parse(p[1])}catch{o.error(new Tt(`Error parsing JSON response: "${p[1]}"`));return}o.enqueue(g),u=u.substring(p[0].length),p=u.match(kh)}return m()}).catch(h=>{let b=h;throw b.stack=h.stack,b.name==="AbortError"?b=new Hx("Request aborted when reading from the stream"):b=new Tt("Error reading from the stream"),b})}}})}function Zv(c){const d=c[c.length-1],r={promptFeedback:d==null?void 0:d.promptFeedback};for(const o of c){if(o.candidates){let u=0;for(const m of o.candidates)if(r.candidates||(r.candidates=[]),r.candidates[u]||(r.candidates[u]={index:u}),r.candidates[u].citationMetadata=m.citationMetadata,r.candidates[u].groundingMetadata=m.groundingMetadata,r.candidates[u].finishReason=m.finishReason,r.candidates[u].finishMessage=m.finishMessage,r.candidates[u].safetyRatings=m.safetyRatings,m.content&&m.content.parts){r.candidates[u].content||(r.candidates[u].content={role:m.content.role||"user",parts:[]});const h={};for(const b of m.content.parts)b.text&&(h.text=b.text),b.functionCall&&(h.functionCall=b.functionCall),b.executableCode&&(h.executableCode=b.executableCode),b.codeExecutionResult&&(h.codeExecutionResult=b.codeExecutionResult),Object.keys(h).length===0&&(h.text=""),r.candidates[u].content.parts.push(h)}u++}o.usageMetadata&&(r.usageMetadata=o.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bx(c,d,r,o){const u=await ui(d,is.STREAM_GENERATE_CONTENT,c,!0,JSON.stringify(r),o);return Vv(u)}async function Gx(c,d,r,o){const m=await(await ui(d,is.GENERATE_CONTENT,c,!1,JSON.stringify(r),o)).json();return{response:nu(m)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(c){if(c!=null){if(typeof c=="string")return{role:"system",parts:[{text:c}]};if(c.text)return{role:"system",parts:[c]};if(c.parts)return c.role?c:{role:"system",parts:c.parts}}}function ri(c){let d=[];if(typeof c=="string")d=[{text:c}];else for(const r of c)typeof r=="string"?d.push({text:r}):d.push(r);return Jv(d)}function Jv(c){const d={role:"user",parts:[]},r={role:"function",parts:[]};let o=!1,u=!1;for(const m of c)"functionResponse"in m?(r.parts.push(m),u=!0):(d.parts.push(m),o=!0);if(o&&u)throw new Tt("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!o&&!u)throw new Tt("No content is provided for sending chat message.");return o?d:r}function Fv(c,d){var r;let o={model:d==null?void 0:d.model,generationConfig:d==null?void 0:d.generationConfig,safetySettings:d==null?void 0:d.safetySettings,tools:d==null?void 0:d.tools,toolConfig:d==null?void 0:d.toolConfig,systemInstruction:d==null?void 0:d.systemInstruction,cachedContent:(r=d==null?void 0:d.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const u=c.generateContentRequest!=null;if(c.contents){if(u)throw new An("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=c.contents}else if(u)o=Object.assign(Object.assign({},o),c.generateContentRequest);else{const m=ri(c);o.contents=[m]}return{generateContentRequest:o}}function Ah(c){let d;return c.contents?d=c:d={contents:[ri(c)]},c.systemInstruction&&(d.systemInstruction=Lx(c.systemInstruction)),d}function $v(c){return typeof c=="string"||Array.isArray(c)?{content:ri(c)}:c}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Iv={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Wv(c){let d=!1;for(const r of c){const{role:o,parts:u}=r;if(!d&&o!=="user")throw new Tt(`First content should be with role 'user', got ${o}`);if(!Nh.includes(o))throw new Tt(`Each item should include role field. Got ${o} but valid roles are: ${JSON.stringify(Nh)}`);if(!Array.isArray(u))throw new Tt("Content should have 'parts' property with an array of Parts");if(u.length===0)throw new Tt("Each Content should have at least one part");const m={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const b of u)for(const p of Dh)p in b&&(m[p]+=1);const h=Iv[o];for(const b of Dh)if(!h.includes(b)&&m[b]>0)throw new Tt(`Content with role '${o}' can't contain '${b}' part`);d=!0}}function Rh(c){var d;if(c.candidates===void 0||c.candidates.length===0)return!1;const r=(d=c.candidates[0])===null||d===void 0?void 0:d.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const o of r.parts)if(o===void 0||Object.keys(o).length===0||o.text!==void 0&&o.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mh="SILENT_ERROR";class Pv{constructor(d,r,o,u={}){this.model=r,this.params=o,this._requestOptions=u,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=d,o!=null&&o.history&&(Wv(o.history),this._history=o.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(d,r={}){var o,u,m,h,b,p;await this._sendPromise;const g=ri(d),v={safetySettings:(o=this.params)===null||o===void 0?void 0:o.safetySettings,generationConfig:(u=this.params)===null||u===void 0?void 0:u.generationConfig,tools:(m=this.params)===null||m===void 0?void 0:m.tools,toolConfig:(h=this.params)===null||h===void 0?void 0:h.toolConfig,systemInstruction:(b=this.params)===null||b===void 0?void 0:b.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,g]},N=Object.assign(Object.assign({},this._requestOptions),r);let w;return this._sendPromise=this._sendPromise.then(()=>Gx(this._apiKey,this.model,v,N)).then(E=>{var _;if(Rh(E.response)){this._history.push(g);const M=Object.assign({parts:[],role:"model"},(_=E.response.candidates)===null||_===void 0?void 0:_[0].content);this._history.push(M)}else{const M=kn(E.response);M&&console.warn(`sendMessage() was unsuccessful. ${M}. Inspect response object for details.`)}w=E}).catch(E=>{throw this._sendPromise=Promise.resolve(),E}),await this._sendPromise,w}async sendMessageStream(d,r={}){var o,u,m,h,b,p;await this._sendPromise;const g=ri(d),v={safetySettings:(o=this.params)===null||o===void 0?void 0:o.safetySettings,generationConfig:(u=this.params)===null||u===void 0?void 0:u.generationConfig,tools:(m=this.params)===null||m===void 0?void 0:m.tools,toolConfig:(h=this.params)===null||h===void 0?void 0:h.toolConfig,systemInstruction:(b=this.params)===null||b===void 0?void 0:b.systemInstruction,cachedContent:(p=this.params)===null||p===void 0?void 0:p.cachedContent,contents:[...this._history,g]},N=Object.assign(Object.assign({},this._requestOptions),r),w=Bx(this._apiKey,this.model,v,N);return this._sendPromise=this._sendPromise.then(()=>w).catch(E=>{throw new Error(Mh)}).then(E=>E.response).then(E=>{if(Rh(E)){this._history.push(g);const _=Object.assign({},E.candidates[0].content);_.role||(_.role="model"),this._history.push(_)}else{const _=kn(E);_&&console.warn(`sendMessageStream() was unsuccessful. ${_}. Inspect response object for details.`)}}).catch(E=>{E.message!==Mh&&console.error(E)}),w}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(c,d,r,o){return(await ui(d,is.COUNT_TOKENS,c,!1,JSON.stringify(r),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(c,d,r,o){return(await ui(d,is.EMBED_CONTENT,c,!1,JSON.stringify(r),o)).json()}async function aN(c,d,r,o){const u=r.requests.map(h=>Object.assign(Object.assign({},h),{model:d}));return(await ui(d,is.BATCH_EMBED_CONTENTS,c,!1,JSON.stringify({requests:u}),o)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(d,r,o={}){this.apiKey=d,this._requestOptions=o,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Lx(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(d,r={}){var o;const u=Ah(d),m=Object.assign(Object.assign({},this._requestOptions),r);return Gx(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},u),m)}async generateContentStream(d,r={}){var o;const u=Ah(d),m=Object.assign(Object.assign({},this._requestOptions),r);return Bx(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(o=this.cachedContent)===null||o===void 0?void 0:o.name},u),m)}startChat(d){var r;return new Pv(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},d),this._requestOptions)}async countTokens(d,r={}){const o=Fv(d,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),u=Object.assign(Object.assign({},this._requestOptions),r);return eN(this.apiKey,this.model,o,u)}async embedContent(d,r={}){const o=$v(d),u=Object.assign(Object.assign({},this._requestOptions),r);return tN(this.apiKey,this.model,o,u)}async batchEmbedContents(d,r={}){const o=Object.assign(Object.assign({},this._requestOptions),r);return aN(this.apiKey,this.model,d,o)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(d){this.apiKey=d}getGenerativeModel(d,r){if(!d.model)throw new Tt("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Oh(this.apiKey,d,r)}getGenerativeModelFromCachedContent(d,r,o){if(!d.name)throw new An("Cached content must contain a `name` field.");if(!d.model)throw new An("Cached content must contain a `model` field.");const u=["model","systemInstruction"];for(const h of u)if(r!=null&&r[h]&&d[h]&&(r==null?void 0:r[h])!==d[h]){if(h==="model"){const b=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,p=d.model.startsWith("models/")?d.model.replace("models/",""):d.model;if(b===p)continue}throw new An(`Different value for "${h}" specified in modelParams (${r[h]}) and cachedContent (${d[h]})`)}const m=Object.assign(Object.assign({},r),{model:d.model,tools:d.tools,toolConfig:d.toolConfig,systemInstruction:d.systemInstruction,cachedContent:d});return new Oh(this.apiKey,m,o)}}const Pl=["AIzaSyAPSkwDga2vquJ0iYourWcHzHXUFUxNrSE","AIzaSyCaD-6HCccmrWPHF9ghvjHx2J6OaQnTsoI","AIzaSyBhtZ3AF1nVhPWNZmGfUG4TG5h0e-vJPEc","AIzaSyDGa3anAFOkLPPFILfzpVG1WUT_lirR6x0","AIzaSyAtViy9GAr1SkI2AWhSrPjJFU4pouswEMk","AIzaSyCRLIXSe9ZgtYTzl-AZ7SQVdCUUA91qElM","AIzaSyCs1gcNQwVkfA9XVTr-e2aBWRMotFnavB8","AIzaSyCA1qFRgNsIubQm18jnWzqdU3MjxOdOsPA",void 0].filter(Boolean),sN={general:"You are a helpful AI assistant for hotel receptionists. Provide professional, concise, and accurate information.",email:"You are a professional hotel receptionist writing an email. Maintain a polite, formal, and helpful tone. Format it as a ready-to-send email.",report:"You are writing a formal hotel incident report (Tutanak) in Turkish or English. Use objective language, specify dates/times clearly, and follow official report standards.",review:"You are a guest relations manager replying to a review. Be appreciative of positive feedback and professional/empathetic regarding complaints. Always aim to convert the guest back to a happy customer."},lN=Ct((c,d)=>({loading:!1,result:null,error:null,lastUsedModel:"gemini-2.5-flash",currentKeyIndex:0,clearResult:()=>c({result:null,error:null}),generate:async(r,o,u,m)=>{const{currentKeyIndex:h}=d();c({loading:!0,error:null});try{let b=sN[u];m&&(b+=`

[HOTEL KNOWLEDGE BASE]
Use the following information to answer factual questions about the hotel:
${m}`),b+=`

[TRANSLATION RULE]
If you generate content in any language OTHER than Turkish, you MUST append a Turkish translation at the very bottom.
Use this format:

[Original Content]

--- TRKE EVRS ---
[Turkish Translation]`;let p="";if(o.startsWith("gpt-")||o.startsWith("o")||o.startsWith("claude-")){const g=await fetch("/api/ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r,modelType:o,systemInstruction:b})});if(!g.ok){const N=await g.json();throw new Error(N.error||"AI Proxy request failed")}p=(await g.json()).text}else{if(Pl.length===0)throw new Error("Gemini API keys not configured in .env");const g=Pl[h%Pl.length],v=new nN(g);let N="gemini-1.5-flash";o.includes("gemini-3")?N="gemini-3-flash-preview":o.includes("gemini-3-pro")?N="gemini-3-pro-preview":o.includes("gemini-2.5")?N="gemini-2.5-flash":o.startsWith("gemma-3")&&(N=o),p=(await v.getGenerativeModel({model:N,systemInstruction:b}).generateContent(r)).response.text()}return c({result:p,loading:!1,lastUsedModel:o,currentKeyIndex:(h+1)%(Pl.length||1)}),p}catch(b){return console.error("AI Generation Error:",b),c({error:b.message,loading:!1,currentKeyIndex:(h+1)%(Pl.length||1)}),null}}}));function qx({isOpen:c,onClose:d,initialTask:r="general",initialPrompt:o=""}){var y,H,ne;const{generate:u,loading:m,result:h,error:b}=lN(),{hotel:p,updateHotelSettings:g}=ut(),{user:v}=Ge(),{t:N}=Xe(),w=j.useMemo(()=>[{id:"general",name:N("ai.task.general"),icon:$d,prompt:N("ai.task.generalDesc")},{id:"report",name:N("ai.task.incident"),icon:bb,prompt:N("ai.task.incidentDesc")},{id:"email",name:N("ai.task.email"),icon:Wc,prompt:N("ai.task.emailDesc")},{id:"review",name:N("ai.task.review"),icon:Id,prompt:N("ai.task.reviewDesc")}],[N]),E=j.useMemo(()=>[{id:"gemini-3-flash-preview",name:"Gemini 3 Flash",desc:"Frontier Speed (Google)"},{id:"gemini-3-pro-preview",name:"Gemini 3 Pro",desc:"Frontier Speed (Google)"},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash",desc:"Balanced (Google)"},{id:"gpt-5",name:"GPT-5",desc:"Next Frontier (OpenAI)"},{id:"gpt-5-mini",name:"GPT-5 Mini",desc:"Fast & Smart (OpenAI)"},{id:"o3",name:"OpenAI o3",desc:"Advanced Reasoning (OpenAI)"},{id:"o3-mini",name:"OpenAI o3-mini",desc:"Fast Reasoning (OpenAI)"},{id:"claude-4.5-sonnet",name:"Claude 4.5 Sonnet",desc:"Very Intelligent (Anthropic)"},{id:"claude-4.5-haiku",name:"Claude 4.5 Haiku",desc:"Balanced (Anthropic)"},{id:"gemma-3-27b",name:"Gemma 3 27B",desc:"Large Open Model (Google)"},{id:"gemma-3-12b",name:"Gemma 3 12B",desc:"Medium Open Model (Google)"},{id:"gemma-3-4b",name:"Gemma 3 4B",desc:"Small Open Model (Google)"},{id:"gemma-3-2b",name:"Gemma 3 2B",desc:"Tiny Open Model (Google)"},{id:"gemma-3-1b",name:"Gemma 3 1B",desc:"Micro Open Model (Google)"}],[N]),[_,M]=j.useState(r),[T,R]=j.useState(o),[L,q]=j.useState("gemini-3-flash-preview"),[F,le]=j.useState(!1),[Y,I]=j.useState(!1),[D,K]=j.useState(!1),[Q,P]=j.useState("");j.useEffect(()=>{var se;D&&((se=p==null?void 0:p.settings)!=null&&se.knowledge_base)&&P(p.settings.knowledge_base)},[D,p]);const ie=async()=>{var se;T.trim()&&await u(T,L,_,(se=p==null?void 0:p.settings)==null?void 0:se.knowledge_base)},$=async()=>{if(p!=null&&p.id)try{await g(p.id,{knowledge_base:Q}),K(!1)}catch(se){console.error("Failed to save knowledge base:",se)}},ae=()=>{h&&(navigator.clipboard.writeText(h),le(!0),setTimeout(()=>le(!1),2e3))};if(!c)return null;const de=(v==null?void 0:v.role)==="gm";return n.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:n.jsxs(me.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},className:"w-full max-w-2xl bg-zinc-900 border border-white/10 rounded-3xl overflow-hidden shadow-2xl flex flex-col max-h-[90vh]",children:[n.jsxs("div",{className:"p-6 border-b border-white/5 flex items-center justify-between bg-zinc-900/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-500/20 flex items-center justify-center border border-indigo-500/30",children:n.jsx(Od,{className:"w-5 h-5 text-indigo-400"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-white tracking-tight",children:N("ai.title")}),n.jsx("p",{className:"text-xs text-zinc-500",children:N("ai.poweredBy")})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[de&&n.jsxs("button",{onClick:()=>K(!D),className:G("p-2 rounded-full transition-colors flex items-center gap-2 px-3",D?"bg-emerald-500/20 text-emerald-400":"hover:bg-white/5 text-zinc-500 hover:text-white"),title:"Edit Hotel Knowledge Base",children:[n.jsx(ah,{className:"w-4 h-4"}),D&&n.jsx("span",{className:"text-xs font-bold",children:N("ai.context.title")})]}),n.jsx("button",{onClick:d,className:"p-2 hover:bg-white/5 rounded-full transition-colors text-zinc-500 hover:text-white",children:n.jsx(St,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[n.jsx(dt,{children:D&&n.jsx(me.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden",children:n.jsxs("div",{className:"bg-emerald-950/30 border border-emerald-500/20 rounded-2xl p-4 mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("h3",{className:"text-sm font-bold text-emerald-400 flex items-center gap-2",children:[n.jsx(ah,{className:"w-4 h-4"})," ",N("ai.context.title")]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ee,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>K(!1),children:N("ai.cancel")}),n.jsx(ee,{size:"sm",className:"h-7 text-xs bg-emerald-600 hover:bg-emerald-500",onClick:$,children:N("ai.context.save")})]})]}),n.jsx("p",{className:"text-[10px] text-zinc-400 mb-3",children:N("ai.context.desc")}),n.jsx("textarea",{value:Q,onChange:se=>P(se.target.value),className:"w-full h-32 bg-black/40 border border-emerald-500/20 rounded-xl p-3 text-xs text-zinc-300 focus:outline-none focus:ring-1 focus:ring-emerald-500/50",placeholder:"e.g. Breakfast is served 07:00-10:00. Pool closes at 20:00. Checkout is 12:00..."})]})})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 ml-1",children:N("ai.model")}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{onClick:()=>I(!Y),className:"w-full h-12 px-4 bg-zinc-800/50 border border-zinc-700/50 rounded-2xl flex items-center justify-between text-sm text-zinc-300 hover:border-indigo-500/50 transition-all font-medium",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yb,{className:"w-4 h-4 text-indigo-400"}),(y=E.find(se=>se.id===L))==null?void 0:y.name]}),n.jsx(tr,{className:G("w-4 h-4 transition-transform",Y&&"rotate-180")})]}),n.jsx(dt,{children:Y&&n.jsx(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute top-full left-0 right-0 mt-2 bg-zinc-800 border border-zinc-700 rounded-2xl shadow-2xl z-50 overflow-hidden",children:n.jsx("div",{className:"max-h-60 overflow-y-auto p-2 space-y-1",children:E.map(se=>n.jsxs("button",{onClick:()=>{q(se.id),I(!1)},className:G("w-full px-4 py-3 rounded-xl text-left text-sm transition-colors flex items-center justify-between group",L===se.id?"bg-indigo-500 text-white":"text-zinc-400 hover:bg-white/5"),children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:se.name}),n.jsx("p",{className:G("text-[10px]",L===se.id?"text-indigo-100":"text-zinc-600"),children:se.desc})]}),L===se.id&&n.jsx(kt,{className:"w-4 h-4"})]},se.id))})})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 ml-1",children:N("ai.mode.assistant")}),n.jsx("div",{className:"flex gap-2",children:w.map(se=>{const pe=se.icon;return n.jsxs("button",{onClick:()=>M(se.id),title:se.name,className:G("flex-1 h-12 rounded-2xl border transition-all flex items-center justify-center relative group",_===se.id?"bg-indigo-500/10 border-indigo-500 text-indigo-400":"bg-zinc-800/50 border-zinc-700/50 text-zinc-500 hover:border-zinc-600"),children:[n.jsx(pe,{className:"w-5 h-5"}),_===se.id&&n.jsx(me.div,{layoutId:"active-task",className:"absolute -bottom-1 w-1 h-1 rounded-full bg-indigo-500"})]},se.id)})})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 ml-1",children:(H=w.find(se=>se.id===_))==null?void 0:H.name}),n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{value:T,onChange:se=>R(se.target.value),placeholder:(ne=w.find(se=>se.id===_))==null?void 0:ne.prompt,className:"w-full h-32 bg-zinc-800/30 border border-zinc-700/50 rounded-2xl p-4 text-sm text-zinc-200 placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500/40 transition-all resize-none"}),n.jsx("div",{className:"absolute bottom-3 right-3",children:n.jsxs(ee,{onClick:ie,disabled:m||!T.trim(),className:"rounded-xl bg-indigo-600 hover:bg-indigo-500 shadow-xl shadow-indigo-900/20 h-10 px-4",children:[m?n.jsx(at,{className:"w-4 h-4 animate-spin mr-2"}):n.jsx(si,{className:"w-3.5 h-3.5 mr-2"}),N("ai.generate")]})})]})]}),n.jsxs(dt,{mode:"wait",children:[h&&n.jsxs(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-3 pt-2",children:[n.jsxs("div",{className:"flex items-center justify-between px-1",children:[n.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-emerald-500",children:"Suggested Draft"}),n.jsx("button",{onClick:ae,className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 hover:text-white flex items-center gap-1 transition-colors",children:F?n.jsxs(n.Fragment,{children:[n.jsx(kt,{className:"w-3 h-3 text-emerald-500"})," Copied"]}):n.jsxs(n.Fragment,{children:[n.jsx(vb,{className:"w-3 h-3"})," Copy Text"]})})]}),n.jsx("div",{className:"w-full bg-emerald-500/5 border border-emerald-500/20 rounded-2xl p-5 text-sm text-zinc-300 leading-relaxed font-normal whitespace-pre-wrap selection:bg-emerald-500/30",children:h})]}),b&&n.jsx(me.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 rounded-2xl bg-rose-500/10 border border-rose-500/20 text-rose-400 text-xs font-medium",children:b})]})]}),n.jsxs("div",{className:"p-4 bg-white/5 text-center flex items-center justify-center gap-4 border-t border-white/5",children:[n.jsx("p",{className:"text-[10px] text-zinc-600 font-medium uppercase tracking-widest",children:L.toUpperCase()}),n.jsx("div",{className:"w-1 h-1 rounded-full bg-zinc-800"}),n.jsx("p",{className:"text-[10px] text-zinc-600 font-medium uppercase tracking-widest",children:"Quota Balanced Mode"})]})]})})}const iN={compliance:lx,message:Id,announcement:jb,off_day:Nb,system:Xc},cN={compliance:"text-rose-400 bg-rose-500/10",message:"text-indigo-400 bg-indigo-500/10",announcement:"text-amber-400 bg-amber-500/10",off_day:"text-emerald-400 bg-emerald-500/10",system:"text-zinc-400 bg-zinc-500/10"};function rN(){const{user:c}=Ge(),{hotel:d}=ut(),r=el(),{notifications:o,unreadCount:u,subscribeToNotifications:m,markAsRead:h,markAllAsRead:b,removeNotification:p}=di(),{t:g}=Xe();j.useEffect(()=>{if(c&&(d!=null&&d.id)){const w=m(d.id,c.uid,c.role);return()=>w()}},[c,d==null?void 0:d.id]);const v=()=>{d!=null&&d.id&&b(d.id)},N=w=>{d!=null&&d.id&&(h(d.id,w.id),w.link&&r(w.link))};return n.jsxs(Qd,{children:[n.jsx(Zd,{asChild:!0,children:n.jsxs("button",{className:"relative p-2 rounded-lg hover:bg-zinc-800 transition-all active:scale-95",children:[n.jsx(Xc,{className:G("w-5 h-5 transition-colors",u>0?"text-indigo-400":"text-zinc-400")}),n.jsx(dt,{children:u>0&&n.jsx(me.span,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"absolute top-1.5 right-1.5 w-4 h-4 bg-rose-500 text-[10px] font-bold text-white flex items-center justify-center rounded-full border-2 border-zinc-950",children:u>9?"9+":u})})]})}),n.jsxs(Jc,{align:"end",className:"w-80 bg-zinc-900/95 backdrop-blur-md border-zinc-800 p-0 shadow-2xl",children:[n.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-zinc-800",children:[n.jsx(Fc,{className:"p-0 font-bold text-base text-white font-sans",children:g("notifications.title")}),u>0&&n.jsxs(ee,{variant:"ghost",size:"sm",onClick:v,className:"h-8 text-[11px] text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10 gap-1.5",children:[n.jsx(sx,{className:"w-3.5 h-3.5"}),g("notifications.markAllRead")]})]}),n.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:o.length===0?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(Xc,{className:"w-8 h-8 text-zinc-700 mx-auto mb-3 opacity-20"}),n.jsx("p",{className:"text-sm text-zinc-500 font-medium",children:g("notifications.noNotifications")})]}):n.jsx("div",{className:"py-2",children:o.map(w=>{const E=iN[w.type];return n.jsxs(ra,{onSelect:()=>N(w),className:G("flex gap-3 p-4 transition-all cursor-pointer focus:bg-zinc-800/50 relative group outline-none",!w.is_read&&"bg-indigo-500/[0.03]"),children:[!w.is_read&&n.jsx("div",{className:"absolute left-1 top-1/2 -translate-y-1/2 w-1 h-8 bg-indigo-500 rounded-full"}),n.jsx("div",{className:G("shrink-0 w-10 h-10 rounded-xl flex items-center justify-center",cN[w.type]),children:n.jsx(E,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("p",{className:G("text-xs font-bold truncate pr-6",w.is_read?"text-zinc-400":"text-white"),children:w.title}),n.jsx("span",{className:"text-[10px] text-zinc-600 whitespace-nowrap",children:nr(w.timestamp,{addSuffix:!0,locale:ii()})})]}),n.jsx("p",{className:"text-[11px] text-zinc-500 line-clamp-2 leading-relaxed",children:w.content})]}),n.jsx("button",{onClick:_=>{_.stopPropagation(),d!=null&&d.id&&p(d.id,w.id)},className:"absolute top-2 right-2 p-1 text-zinc-600 hover:text-white hover:bg-zinc-700/50 rounded-full opacity-50 hover:opacity-100 transition-all",title:g("common.dismiss"),children:n.jsx(St,{className:"w-3 h-3"})})]},w.id)})})}),n.jsx(ti,{className:"bg-zinc-800 m-0"}),n.jsx(ra,{onSelect:()=>r("/operations"),className:"w-full rounded-none h-11 text-xs text-zinc-500 hover:text-white focus:text-white transition-colors flex items-center justify-center cursor-pointer focus:bg-zinc-800",children:g("notifications.viewAll")})]})]})}const su=Sb,oN=zb,Yx=j.forwardRef(({className:c,...d},r)=>n.jsx(ix,{ref:r,className:G("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",c),...d}));Yx.displayName=ix.displayName;const lr=j.forwardRef(({className:c,children:d,...r},o)=>n.jsxs(oN,{children:[n.jsx(Yx,{}),n.jsxs(cx,{ref:o,className:G("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",c),...r,children:[d,n.jsxs(wb,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(St,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));lr.displayName=cx.displayName;const lu=({className:c,...d})=>n.jsx("div",{className:G("flex flex-col space-y-1.5 text-center sm:text-left",c),...d});lu.displayName="DialogHeader";const Vx=({className:c,...d})=>n.jsx("div",{className:G("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",c),...d});Vx.displayName="DialogFooter";const ir=j.forwardRef(({className:c,...d},r)=>n.jsx(rx,{ref:r,className:G("text-lg font-semibold leading-none tracking-tight",c),...d}));ir.displayName=rx.displayName;const cr=j.forwardRef(({className:c,...d},r)=>n.jsx(ox,{ref:r,className:G("text-sm text-muted-foreground",c),...d}));cr.displayName=ox.displayName;const ya=Ab,va=Db,da=j.forwardRef(({className:c,children:d,...r},o)=>n.jsxs(dx,{ref:o,className:G("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",c),...r,children:[d,n.jsx(_b,{asChild:!0,children:n.jsx(tr,{className:"h-4 w-4 opacity-50"})})]}));da.displayName=dx.displayName;const Kx=j.forwardRef(({className:c,...d},r)=>n.jsx(ux,{ref:r,className:G("flex cursor-default items-center justify-center py-1",c),...d,children:n.jsx(fx,{className:"h-4 w-4"})}));Kx.displayName=ux.displayName;const Xx=j.forwardRef(({className:c,...d},r)=>n.jsx(mx,{ref:r,className:G("flex cursor-default items-center justify-center py-1",c),...d,children:n.jsx(tr,{className:"h-4 w-4"})}));Xx.displayName=mx.displayName;const ua=j.forwardRef(({className:c,children:d,position:r="popper",...o},u)=>n.jsx(Cb,{children:n.jsxs(hx,{ref:u,className:G("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",c),position:r,...o,children:[n.jsx(Kx,{}),n.jsx(Eb,{className:G("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:d}),n.jsx(Xx,{})]})}));ua.displayName=hx.displayName;const dN=j.forwardRef(({className:c,...d},r)=>n.jsx(xx,{ref:r,className:G("py-1.5 pl-8 pr-2 text-sm font-semibold",c),...d}));dN.displayName=xx.displayName;const Te=j.forwardRef(({className:c,children:d,...r},o)=>n.jsxs(gx,{ref:o,className:G("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",c),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(Tb,{children:n.jsx(kt,{className:"h-4 w-4"})})}),n.jsx(kb,{children:d})]}));Te.displayName=gx.displayName;const uN=j.forwardRef(({className:c,...d},r)=>n.jsx(px,{ref:r,className:G("-mx-1 my-1 h-px bg-muted",c),...d}));uN.displayName=px.displayName;const ni=Rb,$c=j.forwardRef(({className:c,...d},r)=>n.jsx(bx,{ref:r,className:G("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",c),...d}));$c.displayName=bx.displayName;const _a=j.forwardRef(({className:c,...d},r)=>n.jsx(yx,{ref:r,className:G("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",c),...d}));_a.displayName=yx.displayName;const Ca=j.forwardRef(({className:c,...d},r)=>n.jsx(vx,{ref:r,className:G("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",c),...d}));Ca.displayName=vx.displayName;const fN=tu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ea=j.forwardRef(({className:c,...d},r)=>n.jsx(Nx,{ref:r,className:G(fN(),c),...d}));Ea.displayName=Nx.displayName;const mN=tu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-indigo-500/20 text-indigo-300",secondary:"border-transparent bg-zinc-700 text-zinc-300",destructive:"border-transparent bg-rose-500/20 text-rose-300 animate-pulse",success:"border-transparent bg-emerald-500/20 text-emerald-300",outline:"border-zinc-700 text-zinc-400",room:"border-indigo-500/30 bg-indigo-500/10 text-indigo-300 cursor-pointer hover:bg-indigo-500/20"}},defaultVariants:{variant:"default"}});function lt({className:c,variant:d,...r}){return n.jsx("div",{className:G(mN({variant:d}),c),...r})}const hN=Ct(c=>({rooms:[],loading:!1,error:null,subscribeToRooms:d=>{c({loading:!0});const r=Le(te,"hotels",d,"rooms"),o=yt(r,ka("number","asc"));return $t(o,m=>{const h=m.docs.map(b=>({id:b.id,...b.data()}));h.sort((b,p)=>{const g=parseInt(b.number),v=parseInt(p.number);return!isNaN(g)&&!isNaN(v)?g-v:b.number.localeCompare(p.number)}),c({rooms:h,loading:!1})},m=>{console.error("Error fetching rooms:",m),c({error:m.message,loading:!1})})},addRoom:async(d,r)=>{try{const o=Le(te,"hotels",d,"rooms"),u=Object.entries(r).reduce((m,[h,b])=>(b!==void 0&&(m[h]=b),m),{});await Ft(o,u)}catch(o){throw c({error:o.message}),o}},updateRoomStatus:async(d,r,o)=>{try{const u=he(te,"hotels",d,"rooms",r);await De(u,{status:o})}catch(u){c({error:u.message})}},updateRoomOccupancy:async(d,r,o)=>{try{const u=he(te,"hotels",d,"rooms",r);await De(u,{occupancy:o})}catch(u){c({error:u.message})}},updateRoom:async(d,r,o)=>{try{const u=he(te,"hotels",d,"rooms",r),m=Object.entries(o).reduce((h,[b,p])=>(p!==void 0&&(h[b]=p),h),{});await De(u,m)}catch(u){c({error:u.message})}},deleteRoom:async(d,r)=>{try{const o=he(te,"hotels",d,"rooms",r);await Ta(o)}catch(o){c({error:o.message})}},updateMultipleRooms:async(d,r,o)=>{try{const{writeBatch:u}=await oa(async()=>{const{writeBatch:b}=await import("./vendor-firebase-DntPIKkY.js").then(p=>p.y);return{writeBatch:b}},[]),m=u(te),h=Object.entries(o).reduce((b,[p,g])=>(g!==void 0&&(b[p]=g),b),{});for(const b of r){const p=he(te,"hotels",d,"rooms",b);m.update(p,h)}await m.commit()}catch(u){c({error:u.message})}}})),Uh={clean:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",dirty:"bg-rose-500/20 text-rose-400 border-rose-500/30",inspect:"bg-amber-500/20 text-amber-400 border-amber-500/30",dnd:"bg-purple-500/20 text-purple-400 border-purple-500/30"},xN={clean:"Clean",dirty:"Dirty",inspect:"Inspect",dnd:"DND"},Hh={standard:"Standard",corner:"Corner",corner_jacuzzi:"Corner Jakuzzi",triple:"Triple",teras_suite:"Teras Suite"};function gN({isOpen:c,onClose:d}){const{user:r}=Ge(),{hotel:o}=ut(),u=o==null?void 0:o.id,{rooms:m,subscribeToRooms:h,addRoom:b,updateRoomStatus:p,updateRoomOccupancy:g,updateRoom:v,deleteRoom:N,updateMultipleRooms:w}=hN(),[E,_]=j.useState("overview"),[M,T]=j.useState(""),[R,L]=j.useState("all"),[q,F]=j.useState(""),[le,Y]=j.useState("standard"),[I,D]=j.useState(""),[K,Q]=j.useState("separated"),[P,ie]=j.useState(new Set),[$,ae]=j.useState("separated");j.useEffect(()=>{if(c&&u){const W=h(u);return()=>W()}},[c,u]);const de=(r==null?void 0:r.role)==="gm",y=m.filter(W=>{const ye=W.number.toLowerCase().includes(M.toLowerCase()),$e=R==="all"||W.status===R;return ye&&$e}),H=async W=>{if(W.preventDefault(),!(!u||!q))try{await b(u,{number:q,type:le,status:"clean",occupancy:"vacant",floor:parseInt(I)||1,bed_config:le==="standard"?K:null}),F(""),D(""),Q("separated")}catch(ye){console.error(ye)}},ne=async W=>{if(!u)return;const ye=W.occupancy==="vacant"?"occupied":"vacant";await g(u,W.id,ye)},se=async W=>{if(!u)return;const ye=["clean","dirty","inspect","dnd"],$e=(ye.indexOf(W.status)+1)%ye.length;await p(u,W.id,ye[$e])},pe=async W=>{if(!u||W.type!=="standard")return;const ye=W.bed_config==="together"?"separated":"together";await v(u,W.id,{bed_config:ye})},qe=W=>{ie(ye=>{const $e=new Set(ye);return $e.has(W)?$e.delete(W):$e.add(W),$e})},Ne=()=>{const W=m.filter(ye=>ye.type==="standard").map(ye=>ye.id);ie(new Set(W))},X=()=>ie(new Set),ue=async()=>{!u||P.size===0||(await w(u,Array.from(P),{bed_config:$}),X())},we=m.filter(W=>W.type==="standard");return n.jsx(su,{open:c,onOpenChange:d,children:n.jsxs(lr,{className:"bg-zinc-950 border-zinc-800 text-zinc-100 max-w-4xl max-h-[85vh] overflow-hidden flex flex-col p-0",children:[n.jsxs("div",{className:"p-6 pb-2 border-b border-zinc-800 bg-zinc-900/50",children:[n.jsxs(lu,{children:[n.jsx(ir,{className:"flex items-center justify-between text-xl font-bold",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ud,{className:"w-6 h-6 text-indigo-400"}),"Room Management"]})}),n.jsx(cr,{className:"sr-only",children:"Manage hotel rooms, status, and occupancy."})]}),n.jsx(ni,{value:E,onValueChange:W=>_(W),className:"mt-6",children:n.jsxs($c,{className:"bg-zinc-900 border border-zinc-800",children:[n.jsx(_a,{value:"overview",children:"Room Situation"}),de&&n.jsx(_a,{value:"setup",children:"Room Setup"})]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-zinc-950/50",children:n.jsxs(ni,{value:E,className:"h-full",children:[n.jsxs(Ca,{value:"overview",className:"mt-0 space-y-6 h-full",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center bg-zinc-900/50 p-4 rounded-xl border border-zinc-800/50",children:[n.jsxs("div",{className:"relative w-full sm:w-64",children:[n.jsx(Hd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),n.jsx(re,{placeholder:"Search room...",className:"pl-9 bg-zinc-950 border-zinc-800 focus:border-indigo-500",value:M,onChange:W=>T(W.target.value)})]}),n.jsx("div",{className:"flex gap-2 w-full sm:w-auto overflow-x-auto pb-1 sm:pb-0",children:["all","clean","dirty","inspect","dnd"].map(W=>n.jsx(ee,{variant:R===W?"default":"outline",size:"sm",onClick:()=>L(W),className:G("capitalize text-xs h-8 border-zinc-800",R===W&&W!=="all"&&Uh[W]),children:W},W))})]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:n.jsx(dt,{children:y.map(W=>n.jsxs(me.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:G("relative group p-4 rounded-xl border transition-all cursor-pointer hover:shadow-lg",W.occupancy==="occupied"?"bg-zinc-800/60 border-indigo-500/40 hover:border-indigo-500":"bg-zinc-900 border-zinc-800 hover:border-zinc-600"),children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-lg font-bold text-zinc-200",children:W.number}),n.jsx("span",{className:"text-[10px] text-zinc-600 uppercase font-medium",children:Hh[W.type]})]}),n.jsxs("div",{className:"flex gap-1",children:[W.type==="standard"&&n.jsx("button",{onClick:ye=>{ye.stopPropagation(),pe(W)},className:G("p-1.5 rounded-full transition-colors",W.bed_config==="together"?"bg-amber-500/20 text-amber-500":"bg-zinc-800 text-zinc-500 hover:bg-zinc-700"),title:W.bed_config==="together"?"Birleik Yatak":"Ayrk Yataklar",children:n.jsx(Ud,{className:"w-3.5 h-3.5"})}),n.jsx("div",{onClick:ye=>{ye.stopPropagation(),ne(W)},className:G("p-1.5 rounded-full transition-colors",W.occupancy==="occupied"?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-zinc-800 text-zinc-500 group-hover:bg-zinc-700"),title:W.occupancy,children:W.occupancy==="occupied"?n.jsx(Ws,{className:"w-3.5 h-3.5"}):n.jsx(Ws,{className:"w-3.5 h-3.5 opacity-50"})})]})]}),n.jsx(ee,{variant:"ghost",className:G("w-full h-8 text-xs font-semibold capitalize justify-start px-2",Uh[W.status]),onClick:()=>se(W),children:n.jsxs("div",{className:"flex items-center gap-2",children:[W.status==="clean"&&n.jsx($d,{className:"w-3.5 h-3.5"}),W.status==="dirty"&&n.jsx(Mb,{className:"w-3.5 h-3.5"}),W.status==="inspect"&&n.jsx(Hd,{className:"w-3.5 h-3.5"}),W.status==="dnd"&&n.jsx(Bd,{className:"w-3.5 h-3.5"}),xN[W.status]]})})]},W.id))})}),y.length===0&&n.jsx("div",{className:"text-center py-12 text-zinc-500",children:"No rooms found matching your filter."})]}),n.jsx(Ca,{value:"setup",className:"mt-0",children:de?n.jsxs("div",{className:"space-y-6",children:[n.jsxs(Bh,{className:"bg-zinc-900/50 border-zinc-800 p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[n.jsx(cs,{className:"w-5 h-5 text-indigo-400"}),"Add New Room"]}),n.jsxs("form",{onSubmit:H,className:"flex gap-4 items-end",children:[n.jsxs("div",{className:"space-y-2 flex-1",children:[n.jsx(Ea,{children:"Room Number"}),n.jsx(re,{value:q,onChange:W=>F(W.target.value),placeholder:"e.g. 101",className:"bg-zinc-950 border-zinc-800"})]}),n.jsxs("div",{className:"space-y-2 w-32",children:[n.jsx(Ea,{children:"Floor"}),n.jsx(re,{value:I,onChange:W=>D(W.target.value),placeholder:"1",type:"number",className:"bg-zinc-950 border-zinc-800"})]}),n.jsxs("div",{className:"space-y-2 w-48",children:[n.jsx(Ea,{children:"Type"}),n.jsxs(ya,{value:le,onValueChange:W=>Y(W),children:[n.jsx(da,{className:"bg-zinc-950 border-zinc-800",children:n.jsx(va,{})}),n.jsxs(ua,{children:[n.jsx(Te,{value:"standard",children:"Standard"}),n.jsx(Te,{value:"corner",children:"Corner"}),n.jsx(Te,{value:"corner_jacuzzi",children:"Corner Jakuzzi"}),n.jsx(Te,{value:"triple",children:"Triple"}),n.jsx(Te,{value:"teras_suite",children:"Teras Suite"})]})]})]}),le==="standard"&&n.jsxs("div",{className:"space-y-2 w-40",children:[n.jsx(Ea,{children:"Bed Config"}),n.jsxs(ya,{value:K,onValueChange:W=>Q(W),children:[n.jsx(da,{className:"bg-zinc-950 border-zinc-800",children:n.jsx(va,{})}),n.jsxs(ua,{children:[n.jsx(Te,{value:"separated",children:"Ayrk"}),n.jsx(Te,{value:"together",children:"Birleik"})]})]})]}),n.jsx(ee,{type:"submit",disabled:!q,className:"bg-indigo-600 hover:bg-indigo-700",children:"Add Room"})]})]}),n.jsxs(Bh,{className:"bg-zinc-900/50 border-zinc-800 p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[n.jsx(Ob,{className:"w-5 h-5 text-indigo-400"}),"Bulk Room Setup"]}),n.jsx("p",{className:"text-sm text-zinc-400 mb-4",children:"Select standard rooms to update their bed configuration."}),n.jsxs("div",{className:"flex gap-2 mb-4",children:[n.jsxs(ee,{variant:"outline",size:"sm",onClick:Ne,className:"border-zinc-700",children:["Select All Standard (",we.length,")"]}),n.jsxs(ee,{variant:"ghost",size:"sm",onClick:X,disabled:P.size===0,children:["Clear (",P.size,")"]})]}),n.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-8 md:grid-cols-10 gap-2 mb-4 max-h-32 overflow-y-auto p-2 bg-zinc-950 rounded-lg border border-zinc-800",children:we.map(W=>n.jsxs("button",{onClick:()=>qe(W.id),className:G("p-2 rounded-lg text-xs font-medium transition-all flex items-center justify-center gap-1",P.has(W.id)?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:[P.has(W.id)?n.jsx(Ub,{className:"w-3 h-3"}):n.jsx(Hb,{className:"w-3 h-3"}),W.number]},W.id))}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(Ea,{className:"text-xs text-zinc-500",children:"Bed Configuration"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ee,{variant:$==="separated"?"default":"outline",size:"sm",onClick:()=>ae("separated"),className:$==="separated"?"bg-indigo-600":"border-zinc-700",children:"Ayrk Yataklar"}),n.jsx(ee,{variant:$==="together"?"default":"outline",size:"sm",onClick:()=>ae("together"),className:$==="together"?"bg-indigo-600":"border-zinc-700",children:"Birleik Yatak"})]})]}),n.jsxs(ee,{onClick:ue,disabled:P.size===0,className:"bg-emerald-600 hover:bg-emerald-500 ml-auto",children:["Update ",P.size," Rooms"]})]})]}),n.jsx("div",{className:"rounded-lg border border-zinc-800 overflow-hidden",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-zinc-900 text-zinc-400 font-medium",children:n.jsxs("tr",{children:[n.jsx("th",{className:"p-3 text-left",children:"Room"}),n.jsx("th",{className:"p-3 text-left",children:"Type"}),n.jsx("th",{className:"p-3 text-left",children:"Bed"}),n.jsx("th",{className:"p-3 text-left",children:"Floor"}),n.jsx("th",{className:"p-3 text-right",children:"Actions"})]})}),n.jsxs("tbody",{className:"divide-y divide-zinc-800",children:[m.map(W=>n.jsxs("tr",{className:"bg-zinc-900/30 hover:bg-zinc-800/50 transition-colors",children:[n.jsx("td",{className:"p-3 font-medium",children:W.number}),n.jsx("td",{className:"p-3 text-zinc-400",children:Hh[W.type]}),n.jsx("td",{className:"p-3 text-zinc-400",children:W.type==="standard"&&W.bed_config&&n.jsx(lt,{variant:"outline",className:"text-[10px] border-zinc-700 text-zinc-500",children:W.bed_config==="separated"?"Ayrk":"Birleik"})}),n.jsx("td",{className:"p-3 text-zinc-400",children:W.floor}),n.jsx("td",{className:"p-3 text-right",children:n.jsx(ee,{variant:"ghost",size:"icon",className:"text-zinc-500 hover:text-rose-400",onClick:()=>u&&N(u,W.id),children:n.jsx(en,{className:"w-4 h-4"})})})]},W.id)),m.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,className:"p-8 text-center text-zinc-500",children:"No rooms added yet."})})]})]})})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-zinc-500",children:[n.jsx(Bd,{className:"w-12 h-12 mb-4 text-zinc-700"}),n.jsx("p",{children:"Only General Managers can access Room Setup."})]})})]})})]})})}function Bh({children:c,className:d}){return n.jsx("div",{className:G("rounded-xl border",d),children:c})}const pN=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Gh={A:1,E:2,B:3,C:4},rs=Ct((c,d)=>({staff:[],schedule:{},loading:!0,error:null,subscribeToRoster:r=>{c({loading:!0,error:null});const o=Le(te,"hotels",r,"roster");return $t(o,async m=>{const h={},b=new Set;m.docs.forEach(p=>{const g=p.id,v=p.data();v.schedule&&Object.entries(v.schedule).forEach(([N,w])=>{b.add(N),h[N]||(h[N]={}),pN.forEach((E,_)=>{const M=w[E];if(M)try{const T=Mx(g),R=li(T,_),L=bt(R,"yyyy-MM-dd");h[N][L]=M}catch(T){console.error("Error parsing date for roster:",g,T)}})})});try{const p=Le(te,"users"),g=yt(p,Na("hotel_id","==",r)),v=await tl(g),N=[];v.forEach(w=>{const E=w.data();E.name&&E.name!=="Unknown"&&N.push({uid:w.id,name:E.name,role:E.role,is_hidden_in_roster:E.is_hidden_in_roster})}),c({staff:N})}catch(p){console.error("Failed to fetch staff details",p)}c({schedule:h,loading:!1})},m=>{console.error("Roster subscription error",m),c({error:m.message})})},getShiftsForDate:r=>{const{schedule:o,staff:u}=d(),m=bt(r,"yyyy-MM-dd"),h=[];return u.forEach(b=>{const p=o[b.uid];if(p&&p[m]){const g=p[m];g!=="OFF"&&h.push({name:b.name,shift:g,uid:b.uid})}}),h.sort((b,p)=>{const g=Gh[b.shift]||99,v=Gh[p.shift]||99;return g-v})},toggleStaffVisibility:async(r,o,u)=>{try{const m=he(te,"users",o);await De(m,{is_hidden_in_roster:u});const{staff:h}=d(),b=h.map(p=>p.uid===o?{...p,is_hidden_in_roster:u}:p);c({staff:b})}catch(m){throw console.error("Error toggling staff visibility:",m),m}}})),al=Ct((c,d)=>({currentShift:null,loading:!0,error:null,subscribeToCurrentShift:r=>{c({loading:!0,error:null});const o=Le(te,"hotels",r,"shifts"),u=yt(o,Na("status","==","active"),ss(1));return $t(u,h=>{if(h.empty)c({currentShift:null,loading:!1});else{const b=h.docs[0],p=b.data();c({currentShift:{shift_id:b.id,date:p.date,type:p.type,staff_ids:p.staff_ids||[],compliance:p.compliance||{kbs_checked:!1,agency_msg_checked_count:0},cash_start:p.cash_start||0,cash_end:p.cash_end||0,handover_note:p.handover_note||"",status:p.status},loading:!1})}},h=>{console.error("Error subscribing to shift:",h),c({error:h.message,loading:!1})})},startShift:async(r,o,u,m,h)=>{const b=h||new Date().toLocaleDateString("sv-SE"),p=`${b}_SHIFT_${u}`;try{const g=he(te,"hotels",r,"shifts",p);if((await ns(g)).exists())return;await Pa(g,{shift_id:p,date:b,type:u,staff_ids:o,compliance:{kbs_checked:!1,agency_msg_checked_count:0},cash_start:m,cash_end:0,handover_note:"",status:"active",started_at:Je()})}catch(g){throw console.error("Error starting shift:",g),g}},getLastClosedShift:async r=>{const o=Le(te,"hotels",r,"shifts"),u=yt(o,Na("status","==","closed"),ka("ended_at","desc"),ss(1));try{const m=await tl(u);if(!m.empty){const h=m.docs[0],b=h.data();return{shift_id:h.id,date:b.date,type:b.type,staff_ids:b.staff_ids||[],compliance:b.compliance||{kbs_checked:!1,agency_msg_checked_count:0},cash_start:b.cash_start||0,cash_end:b.cash_end||0,handover_note:b.handover_note||"",status:b.status}}return null}catch(m){return console.error("Error fetching last shift:",m),null}},endShift:async(r,o,u)=>{const{currentShift:m}=d();if(!m)throw new Error("No active shift");try{const h=he(te,"hotels",r,"shifts",m.shift_id);await De(h,{cash_end:o,handover_note:u,status:"closed",ended_at:Je()})}catch(h){throw console.error("Error ending shift:",h),h}},updateCompliance:async(r,o,u)=>{const{currentShift:m}=d();if(!m)throw new Error("No active shift");try{const h=he(te,"hotels",r,"shifts",m.shift_id);await De(h,{[`compliance.${o}`]:u})}catch(h){throw console.error("Error updating compliance:",h),h}}}));function Rn({id:c,title:d,children:r,className:o,headerActions:u,defaultCollapsed:m=!1,onToggle:h}){const[b,p]=j.useState(m);j.useEffect(()=>{const v=localStorage.getItem(`relay_card_collapsed_${c}`);v!==null&&p(v==="true")},[c]);const g=()=>{const v=!b;p(v),localStorage.setItem(`relay_card_collapsed_${c}`,String(v)),h&&h(v)};return n.jsxs(fa,{className:G("overflow-hidden flex flex-col",o),children:[n.jsx(tn,{className:"pb-3 select-none",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1 cursor-pointer flex items-center gap-2 group",onClick:g,children:[d,n.jsx("div",{className:"p-1 rounded-md hover:bg-zinc-800 transition-colors",children:b?n.jsx(tr,{className:"w-3.5 h-3.5 text-zinc-500 group-hover:text-zinc-300"}):n.jsx(fx,{className:"w-3.5 h-3.5 text-zinc-500 group-hover:text-zinc-300"})})]}),u&&n.jsx("div",{className:"flex items-center gap-2",children:u})]})}),n.jsx(dt,{initial:!1,children:!b&&n.jsx(me.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2,ease:"easeInOut"},children:n.jsx(ma,{className:"pt-0",children:r})})})]})}function bN({hotelId:c,userId:d}){var _,M,T,R,L;const{schedule:r,subscribeToRoster:o}=rs(),{currentShift:u}=al(),{t:m}=Xe(),[h,b]=j.useState(!1),p={A:{label:m("shift.morning"),time:"08:00 - 16:00",color:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20"},B:{label:m("shift.afternoon"),time:"16:00 - 00:00",color:"bg-purple-500/10 text-purple-400 border-purple-500/20"},C:{label:m("shift.night"),time:"00:00 - 08:00",color:"bg-rose-500/10 text-rose-400 border-rose-500/20"},E:{label:m("shift.extra"),time:"10:00 - 18:00",color:"bg-amber-500/10 text-amber-400 border-amber-500/20"},OFF:{label:m("shift.off"),time:"-",color:"bg-zinc-800 text-zinc-400 border-zinc-700"}};j.useEffect(()=>{if(!c)return;const q=o(c);return()=>q()},[c]);const g=async()=>{b(!0),o(c),setTimeout(()=>b(!1),800)},v=j.useMemo(()=>{const q=new Date,F=Vd(q,{weekStartsOn:1}),le=[],Y=r[d]||{};for(let I=0;I<7;I++){const D=li(F,I),K=bt(D,"yyyy-MM-dd"),Q=Y[K]||null;le.push({date:D,dayName:bt(D,"EEE",{locale:ii()}),shift:Q,isToday:Zc(D,q)})}return le},[r,d]),N=v.find(q=>q.isToday),w=u==null?void 0:u.type,E=w?(_=p[w])==null?void 0:_.label:m("shift.none");return n.jsx(Rn,{id:"current-shift",title:n.jsxs(_t,{className:"text-sm font-medium text-zinc-400 flex items-center gap-2",children:[n.jsx(Dn,{className:"w-4 h-4"}),m("dashboard.weeklySchedule")]}),headerActions:n.jsx(ee,{variant:"ghost",size:"icon",className:G("h-6 w-6 text-zinc-500",h&&"animate-spin"),onClick:q=>{q.stopPropagation(),g()},children:n.jsx(Gd,{className:"w-3.5 h-3.5"})}),className:"bg-zinc-900 border-zinc-800",children:n.jsxs("div",{className:"space-y-5 pt-2",children:[n.jsxs("div",{className:"flex items-center justify-between bg-zinc-800/50 p-3 rounded-lg border border-zinc-800",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-1.5 bg-emerald-500/10 rounded-md",children:n.jsx(jx,{className:"w-4 h-4 text-emerald-500"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] text-zinc-500 uppercase tracking-wider font-semibold",children:m("dashboard.activeHotelShift")}),n.jsx("p",{className:"text-sm font-medium text-white",children:E})]})]}),n.jsx(lt,{variant:"outline",className:"bg-zinc-900 text-zinc-400 border-zinc-700",children:m(u?"status.ongoing":"status.noActiveShift")})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs font-medium text-zinc-400",children:m("dashboard.todaysAssignment")}),N&&N.shift&&n.jsx(lt,{className:G("text-[10px] px-2 py-0.5",((M=p[N.shift])==null?void 0:M.color)||"bg-zinc-800"),children:(T=p[N.shift])==null?void 0:T.time})]}),N!=null&&N.shift?n.jsx("div",{className:G("flex items-center justify-between p-3 rounded-lg border",((R=p[N.shift])==null?void 0:R.color)||"bg-zinc-800 border-zinc-700"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Jt,{className:"w-5 h-5 opacity-80"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold",children:(L=p[N.shift])==null?void 0:L.label}),n.jsx("p",{className:"text-xs opacity-70",children:m("dashboard.assignedShift")})]})]})}):n.jsx("div",{className:"p-3 rounded-lg border border-dashed border-zinc-800 bg-zinc-900/50 text-center",children:n.jsx("span",{className:"text-xs text-zinc-500",children:m("dashboard.noAssignedShift")})})]}),n.jsx("div",{className:"grid grid-cols-7 gap-1",children:v.map(q=>{var F,le;return n.jsxs("div",{className:G("flex flex-col items-center gap-1 p-2 rounded-lg border transition-all",q.isToday?"bg-zinc-800 border-zinc-700 ring-1 ring-indigo-500/20":"bg-transparent border-transparent hover:bg-zinc-800/50"),children:[n.jsx("span",{className:G("text-[10px] font-medium uppercase",q.isToday?"text-indigo-400":"text-zinc-500"),children:q.dayName}),q.shift?n.jsx("div",{className:G("w-6 h-6 rounded flex items-center justify-center text-[10px] font-bold",(F=p[q.shift])==null?void 0:F.color.split(" ")[0],(le=p[q.shift])!=null&&le.color.includes("text-white")?"text-white":"text-zinc-300"),children:q.shift==="OFF"?"-":q.shift}):n.jsx("div",{className:"w-6 h-6 rounded bg-zinc-800/50 flex items-center justify-center text-[10px] text-zinc-600",children:"-"})]},q.dayName)})})]})})}const yN=c=>c?c instanceof Dt?c.toDate():c:new Date,Qx=Ct((c,d)=>({logs:[],pinnedLogs:[],loading:!0,error:null,hotelId:null,setHotelId:r=>{c({hotelId:r})},subscribeToLogs:()=>{const{hotelId:r}=d();if(!r)return c({loading:!1,error:"No hotel selected"}),()=>{};c({loading:!0,error:null});const o=Le(te,"hotels",r,"logs"),u=yt(o,ka("created_at","desc"));return $t(u,h=>{const b=h.docs.map(g=>{const v=g.data();return{id:g.id,type:v.type,content:v.content,room_number:v.room_number||null,urgency:v.urgency,status:v.status,created_at:yN(v.created_at),created_by:v.created_by,created_by_name:v.created_by_name||"Staff",is_pinned:v.is_pinned||!1}}),p=b.filter(g=>g.is_pinned);c({logs:b,pinnedLogs:p,loading:!1,error:null})},h=>{console.error("Error listening to logs:",h),c({error:h.message,loading:!1})})},addLog:async r=>{const{hotelId:o}=d();if(o)try{const u=Le(te,"hotels",o,"logs");await Ft(u,{...r,created_at:Je()})}catch(u){c({error:u.message})}},editLog:async(r,o)=>{const{hotelId:u}=d();if(u)try{const m=he(te,"hotels",u,"logs",r);await De(m,o)}catch(m){c({error:m.message})}},updateLogStatus:async(r,o)=>{const{hotelId:u}=d();if(!u)throw new Error("No hotel selected");try{const m=he(te,"hotels",u,"logs",r);await De(m,{status:o})}catch(m){throw console.error("Error updating log status:",m),m}},togglePin:async(r,o)=>{const{hotelId:u}=d();if(u)try{const m=he(te,"hotels",u,"logs",r);await De(m,{is_pinned:o})}catch(m){throw console.error("Error toggling pin:",m),m}},archiveLog:async r=>{const{hotelId:o}=d();if(o)try{const u=he(te,"hotels",o,"logs",r);await De(u,{status:"archived"})}catch(u){throw console.error("Error archiving log:",u),u}}}));function vN({isOpen:c,onClose:d,hotelId:r,onComplete:o}){const{logs:u}=Qx(),{currentShift:m}=al(),{t:h}=Xe(),b=["tickets","cash","notes","confirm"],p={tickets:{title:h("handover.step.tickets"),icon:Bb},cash:{title:h("handover.step.cash"),icon:Ld},notes:{title:h("handover.step.notes"),icon:Qc},confirm:{title:h("handover.step.confirm"),icon:as}},[g,v]=j.useState("tickets"),[N,w]=j.useState(""),[E,_]=j.useState(""),[M,T]=j.useState(!1),[R,L]=j.useState(new Set),q=u.filter(ie=>ie.status==="open");j.useEffect(()=>{c&&(v("tickets"),w(""),_(""),L(new Set))},[c]);const F=b.indexOf(g),le=F===0,Y=F===b.length-1,I=()=>{switch(g){case"tickets":return q.length===0||R.size===q.length;case"cash":return N.trim()!==""&&!isNaN(parseFloat(N));case"notes":return!0;case"confirm":return!0;default:return!1}},D=()=>{F<b.length-1&&v(b[F+1])},K=()=>{F>0&&v(b[F-1])},Q=async()=>{T(!0);try{await o(parseFloat(N),E),d()}finally{T(!1)}},P=ie=>{L($=>{const ae=new Set($);return ae.has(ie)?ae.delete(ie):ae.add(ie),ae})};return n.jsx(dt,{children:c&&n.jsxs(n.Fragment,{children:[n.jsx(me.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),n.jsx(me.div,{className:"fixed inset-0 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:n.jsxs(me.div,{className:"glass rounded-2xl w-full max-w-2xl overflow-hidden",initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{type:"spring",duration:.4},children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-lg bg-indigo-500/20",children:(()=>{const ie=p[g].icon;return n.jsx(ie,{className:"w-5 h-5 text-indigo-400"})})()}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-semibold text-lg",children:h("handover.wizard")}),n.jsx("p",{className:"text-sm text-zinc-400",children:p[g].title})]})]}),n.jsx("button",{onClick:d,className:"p-2 hover:bg-zinc-800 rounded-lg transition-colors",children:n.jsx(St,{className:"w-5 h-5 text-zinc-400"})})]}),n.jsx("div",{className:"flex items-center gap-2 p-4 border-b border-zinc-800/50",children:b.map((ie,$)=>{const ae=$===F,de=$<F;return n.jsxs("div",{className:"flex items-center flex-1",children:[n.jsx("div",{className:G("w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all",de&&"bg-emerald-500 text-white",ae&&"bg-indigo-500 text-white ring-2 ring-indigo-500/50",!ae&&!de&&"bg-zinc-800 text-zinc-500"),children:de?n.jsx(as,{className:"w-4 h-4"}):$+1}),$<b.length-1&&n.jsx("div",{className:G("flex-1 h-0.5 mx-2",$<F?"bg-emerald-500":"bg-zinc-800")})]},ie)})}),n.jsx("div",{className:"p-6 min-h-[300px]",children:n.jsx(dt,{mode:"wait",children:n.jsxs(me.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:[g==="tickets"&&n.jsx("div",{className:"space-y-4",children:q.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(as,{className:"w-12 h-12 text-emerald-400 mx-auto mb-3"}),n.jsx("p",{className:"text-zinc-300",children:h("handover.noOpenTickets")}),n.jsx("p",{className:"text-zinc-500 text-sm",children:h("handover.allClear")})]}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-zinc-400 text-sm mb-4",children:[h("handover.tickets.desc")," (",R.size,"/",q.length,")"]}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:q.map(ie=>n.jsxs("button",{onClick:()=>P(ie.id),className:G("w-full flex items-center gap-3 p-3 rounded-lg border text-left transition-all",R.has(ie.id)?"border-emerald-500/30 bg-emerald-500/10":"border-zinc-700 hover:border-zinc-600"),children:[n.jsx("div",{className:G("w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0",R.has(ie.id)?"border-emerald-500 bg-emerald-500":"border-zinc-600"),children:R.has(ie.id)&&n.jsx(as,{className:"w-3 h-3 text-white"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-zinc-200 truncate",children:ie.content}),n.jsxs("p",{className:"text-xs text-zinc-500 capitalize",children:[h(`module.${ie.type}`),"  ",h(`status.${ie.urgency}`)]})]}),ie.urgency==="critical"&&n.jsx(lx,{className:"w-4 h-4 text-rose-400"})]},ie.id))})]})}),g==="cash"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx(Ld,{className:"w-12 h-12 text-indigo-400 mx-auto mb-3"}),n.jsx("p",{className:"text-zinc-300 mb-1",children:h("handover.enterCash")}),n.jsx("p",{className:"text-zinc-500 text-sm",children:h("handover.countCash")})]}),m&&n.jsx("div",{className:"flex justify-center gap-8 text-sm",children:n.jsxs("div",{children:[n.jsxs("span",{className:"text-zinc-500",children:[h("handover.cash.started"),":"]}),n.jsxs("span",{className:"text-emerald-400 font-bold ml-2",children:["",m.cash_start.toLocaleString()]})]})}),n.jsxs("div",{className:"max-w-xs mx-auto",children:[n.jsx("label",{className:"text-sm text-zinc-400 mb-2 block",children:h("handover.cashEnd")}),n.jsx(re,{type:"number",placeholder:"0.00",value:N,onChange:ie=>w(ie.target.value),className:"text-center text-2xl h-14"})]}),m&&N&&n.jsxs("div",{className:"text-center",children:[n.jsxs("span",{className:"text-zinc-500",children:[h("handover.cash.difference"),":"]}),n.jsxs("span",{className:G("font-bold ml-2",parseFloat(N)-m.cash_start>=0?"text-emerald-400":"text-rose-400"),children:[parseFloat(N)-m.cash_start>=0?"+":"","",(parseFloat(N)-m.cash_start).toLocaleString()]})]})]}),g==="notes"&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(Qc,{className:"w-12 h-12 text-indigo-400 mx-auto mb-3"}),n.jsx("p",{className:"text-zinc-300",children:h("handover.step.notes")}),n.jsx("p",{className:"text-zinc-500 text-sm",children:h("handover.notesDesc")})]}),n.jsx("textarea",{placeholder:"e.g., Room 204 guest requested late checkout, VIP arriving tomorrow...",value:E,onChange:ie=>_(ie.target.value),rows:6,className:"w-full rounded-lg border border-zinc-700 bg-zinc-900/50 px-4 py-3 text-sm text-zinc-100 placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500 resize-none"})]}),g==="confirm"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(as,{className:"w-12 h-12 text-emerald-400 mx-auto mb-3"}),n.jsx("p",{className:"text-zinc-300 text-lg font-semibold",children:h("handover.readyToComplete")}),n.jsx("p",{className:"text-zinc-500 text-sm",children:h("handover.reviewSummary")})]}),n.jsxs("div",{className:"glass rounded-lg p-4 space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-zinc-400",children:h("handover.ticketsReviewed")}),n.jsxs("span",{className:"text-emerald-400",children:[R.size,"/",q.length]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-zinc-400",children:h("handover.cashEnd")}),n.jsxs("span",{className:"text-zinc-100 font-bold",children:["",parseFloat(N||"0").toLocaleString()]})]}),E&&n.jsxs("div",{children:[n.jsx("span",{className:"text-zinc-400 block mb-1",children:h("handover.notes")}),n.jsx("p",{className:"text-zinc-300 text-sm bg-zinc-800/50 p-2 rounded",children:E})]})]})]})]},g)})}),n.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-zinc-800",children:[n.jsxs(ee,{variant:"ghost",onClick:K,disabled:le,children:[n.jsx(oi,{className:"w-4 h-4"}),h("common.back")]}),Y?n.jsx(ee,{onClick:Q,disabled:M,className:"bg-emerald-600 hover:bg-emerald-700",children:M?n.jsx(at,{className:"w-4 h-4 animate-spin"}):n.jsxs(n.Fragment,{children:[h("handover.complete"),n.jsx(as,{className:"w-4 h-4 ml-2"})]})}):n.jsxs(ee,{onClick:D,disabled:!I(),children:[h("common.continue"),n.jsx(Ps,{className:"w-4 h-4 ml-2"})]})]})]})})]})})}function NN({compliance:c,onKBSCheck:d,onAgencyCheck:r,disabled:o=!1}){const{t:u}=Xe(),[m,h]=j.useState(null),b=async()=>{if(!(o||c.kbs_checked)){h("kbs");try{await d()}finally{h(null)}}},p=async()=>{if(!o){h("agency");try{await r()}finally{h(null)}}},g=[{key:"agency",label:u("compliance.agency.label"),description:u("compliance.agency.desc"),icon:Wc,checked:c.agency_msg_checked_count>0,count:c.agency_msg_checked_count,onCheck:p,canRecheck:!0},{key:"kbs",label:u("compliance.kbs.label"),description:u("compliance.kbs.checklistDesc"),icon:Gb,checked:c.kbs_checked,count:null,onCheck:b,canRecheck:!1}];return n.jsx(Rn,{id:"compliance",title:n.jsxs(_t,{className:"text-sm font-medium text-zinc-300 flex items-center gap-2",children:[n.jsx(ar,{className:"w-4 h-4 text-amber-400"}),u("module.compliance")]}),children:n.jsx("div",{className:"space-y-2 pt-2",children:g.map(v=>n.jsxs(me.button,{onClick:v.onCheck,disabled:o||m!==null||v.checked&&!v.canRecheck,className:G("w-full flex items-center gap-3 p-3 rounded-lg border transition-all text-left",v.checked?"border-emerald-500/30 bg-emerald-500/10":"border-zinc-700 hover:border-zinc-600 hover:bg-zinc-800/50",(o||!v.canRecheck&&v.checked)&&"opacity-50 cursor-not-allowed"),whileTap:{scale:.98},children:[n.jsx("div",{className:G("p-2 rounded-lg",v.checked?"bg-emerald-500/20":"bg-zinc-800"),children:m===v.key?n.jsx(at,{className:"w-4 h-4 text-zinc-400 animate-spin"}):n.jsx(v.icon,{className:G("w-4 h-4",v.checked?"text-emerald-400":"text-zinc-400")})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:G("text-sm font-medium",v.checked?"text-emerald-300":"text-zinc-200"),children:v.label}),v.count!==null&&v.count>0&&n.jsxs("span",{className:"text-xs bg-emerald-500/20 text-emerald-300 px-1.5 py-0.5 rounded",children:["",v.count]})]}),n.jsx("span",{className:"text-xs text-zinc-500",children:v.description})]}),v.checked?n.jsx(as,{className:"w-5 h-5 text-emerald-400 flex-shrink-0"}):n.jsx(Fd,{className:"w-5 h-5 text-zinc-600 flex-shrink-0"})]},v.key))})})}async function Dc(c,d){if(!(!d.is_relevant||d.status!=="active"))try{const r=Le(te,"hotels",c,"calendar_events"),o=yt(r,Na("note_id","==",d.id)),u=await tl(o);let m=d.created_at instanceof Dt?d.created_at.toDate():d.created_at;if(d.time){const[g,v]=d.time.split(":").map(Number);m.setHours(g,v,0,0)}const h=d.assigned_staff_name?`  ${d.assigned_staff_name}`:"",b=d.guest_name?` [Guest: ${d.guest_name}]`:"",p={title:`[${d.category.toUpperCase()}] ${d.room_number?`#${d.room_number}: `:""}${d.content.substring(0,30)}...${h}${b}`,description:`Guest: ${d.guest_name||"N/A"}
Assigned: ${d.assigned_staff_name||"N/A"}

${d.content}`,start_date:m,end_date:m,all_day:!0,type:d.category==="damage"?"financial":"reminder",status:"confirmed",note_id:d.id,updated_at:Je()};if(u.empty)await Ft(r,{...p,created_at:Je()});else{const g=u.docs[0];await De(he(te,"hotels",c,"calendar_events",g.id),p)}}catch(r){console.error("Error syncing note to calendar:",r)}}async function Rc(c,d){try{const r=Le(te,"hotels",c,"calendar_events"),o=yt(r,Na("note_id","==",d)),u=await tl(o);if(!u.empty){const m=u.docs[0];await De(he(te,"hotels",c,"calendar_events",m.id),{status:"cancelled",updated_at:Je()})}}catch(r){console.error("Error removing note from calendar:",r)}}async function jN(c,d,r,o,u){try{const m=Le(te,"hotels",c,"calendar_events"),h=new Date(o);h.setHours(0,0,0,0);const b=yt(m,Na("type","==","off_day"),Na("date","==",h));let g=(await tl(b)).docs.find(v=>{var N;return(N=v.data().description)==null?void 0:N.includes(`User ID: ${d}`)});u==="OFF"?g?g.data().status!=="confirmed"&&await De(he(te,"hotels",c,"calendar_events",g.id),{status:"confirmed",updated_at:Je()}):await Ft(m,{title:`Off Day: ${r}`,description:`Scheduled Off Day for ${r}
User ID: ${d}`,date:h,type:"off_day",status:"confirmed",created_by:"system",created_by_name:"System",created_at:Je(),updated_at:Je()}):g&&await De(he(te,"hotels",c,"calendar_events",g.id),{status:"cancelled",updated_at:Je()})}catch(m){console.error("Error syncing roster to calendar:",m)}}const Ad=c=>c?c instanceof Dt?c.toDate():c:new Date,Wa=Ct(c=>({notes:[],loading:!0,error:null,subscribeToNotes:d=>{c({loading:!0,error:null});const r=Le(te,"hotels",d,"shift_notes"),o=yt(r,ka("created_at","desc"));return $t(o,m=>{const h=m.docs.map(b=>{const p=b.data();return{id:b.id,category:p.category,content:p.content,room_number:p.room_number||null,is_relevant:p.is_relevant??!0,status:p.status||(p.resolved_at?"resolved":"active"),amount_due:p.amount_due||null,is_paid:p.is_paid||!1,created_at:Ad(p.created_at),created_by:p.created_by,created_by_name:p.created_by_name||"Unknown",shift_id:p.shift_id||null,resolved_at:p.resolved_at?Ad(p.resolved_at):null,resolved_by:p.resolved_by||null,is_anonymous:p.is_anonymous||!1,updated_at:p.updated_at?Ad(p.updated_at):void 0}});c({notes:h,loading:!1,error:null})},m=>{console.error("Error subscribing to notes:",m),c({error:m.message,loading:!1})})},addNote:async(d,r)=>{try{const o=Le(te,"hotels",d,"shift_notes"),u=Object.entries(r).reduce((h,[b,p])=>(p!==void 0&&(h[b]=p),h),{}),m=await Ft(o,{...u,status:"active",created_at:Je(),resolved_at:null,resolved_by:null});if(r.is_relevant){const h={id:m.id,...r,status:"active",created_at:new Date,resolved_at:null,resolved_by:null};await Dc(d,h)}}catch(o){throw console.error("Error adding note:",o),o}},updateNote:async(d,r,o)=>{try{const u=he(te,"hotels",d,"shift_notes",r);(o.status==="resolved"||o.status==="archived")&&(o.resolved_at=o.resolved_at||new Date),o.updated_at=Je();const m=Object.entries(o).reduce((b,[p,g])=>(g!==void 0&&(b[p]=g),b),{});await De(u,m);const h=Wa.getState().notes.find(b=>b.id===r);h&&(h.is_relevant||o.is_relevant)&&await Dc(d,{...h,...o})}catch(u){throw console.error("Error updating note:",u),u}},updateNoteStatus:async(d,r,o,u)=>{try{const m=he(te,"hotels",d,"shift_notes",r),h={status:o};if(o==="resolved"||o==="archived")h.resolved_at=Je(),u&&(h.resolved_by=u),await Rc(d,r);else if(o==="active"){h.resolved_at=null,h.resolved_by=null;const b=Wa.getState().notes.find(p=>p.id===r);b&&b.is_relevant&&await Dc(d,{...b,status:"active"})}await De(m,h)}catch(m){throw console.error("Error updating note status:",m),m}},toggleRelevance:async(d,r,o)=>{try{const u=he(te,"hotels",d,"shift_notes",r);if(await De(u,{is_relevant:o,status:o?"active":"resolved",resolved_at:o?null:Je()}),o){const h=Wa.getState().notes.find(b=>b.id===r);h&&await Dc(d,{...h,is_relevant:!0,status:"active"})}else await Rc(d,r)}catch(u){throw console.error("Error toggling relevance:",u),u}},markPaid:async(d,r)=>{try{const o=he(te,"hotels",d,"shift_notes",r);await De(o,{is_paid:!0,status:"resolved",resolved_at:Je()}),await Rc(d,r)}catch(o){throw console.error("Error marking paid:",o),o}},deleteNote:async(d,r)=>{try{const o=he(te,"hotels",d,"shift_notes",r);await Ta(o),await Rc(d,r)}catch(o){throw console.error("Error deleting note:",o),o}},convertToLog:async(d,r)=>{try{const o=Wa.getState().notes.find(m=>m.id===r);if(!o)throw new Error("Note not found");const u=Le(te,"hotels",d,"logs");await Ft(u,{type:"system",content:`[Promoted from Note] ${o.content}`,room_number:o.room_number,urgency:"low",status:"open",created_at:Je(),created_by:o.created_by==="anonymous"?"system":o.created_by,created_by_name:o.created_by_name,is_pinned:!1,guest_name:o.guest_name||void 0}),await Wa.getState().updateNoteStatus(d,r,"resolved","system")}catch(o){throw console.error("Error converting note to log:",o),o}}})),pt={handover:{label:"Handover",color:"bg-indigo-500",icon:""},damage:{label:"Damage",color:"bg-rose-500",icon:""},upgrade:{label:"Upgrade",color:"bg-emerald-600",icon:""},upsell:{label:"Upsell",color:"bg-green-500",icon:""},restaurant:{label:"Restaurant",color:"bg-orange-500",icon:""},minibar:{label:"Minibar",color:"bg-zinc-700",icon:""},early_checkout:{label:"Early Checkout",color:"bg-amber-500",icon:""},guest_info:{label:"Guest Info",color:"bg-cyan-500",icon:""},feedback:{label:"Feedback",color:"bg-purple-500",icon:""},other:{label:"Other",color:"bg-zinc-500",icon:""}},Bc=["hand_towel","bath_towel","bed_sheet","pillow_case","duvet_cover","bathrobe","mattress_protector"],Gc=["cola","cola_zero","fanta","sprite","soda"];function zN({hotelId:c,showAddButton:d=!0}){var ha,Et,gi,pi;const{notes:r,addNote:o,updateNote:u,markPaid:m,deleteNote:h,convertToLog:b}=Wa(),{user:p}=Ge(),{t:g}=Xe(),{staff:v,subscribeToRoster:N}=rs(),{hotel:w}=ut();j.useEffect(()=>{if(c){const U=N(c);return()=>U()}},[c,N]);const[E,_]=j.useState(!1),[M,T]=j.useState("handover"),[R,L]=j.useState(""),[q,F]=j.useState(""),[le,Y]=j.useState(""),[I,D]=j.useState(""),[K,Q]=j.useState(""),[P,ie]=j.useState(""),[$,ae]=j.useState(null),[de,y]=j.useState(""),[H,ne]=j.useState("handover"),[se,pe]=j.useState(""),[qe,Ne]=j.useState(""),[X,ue]=j.useState(""),[we,W]=j.useState(""),[ye,$e]=j.useState("none"),[Rt,It]=j.useState(!1),[Aa,os]=j.useState(!1),[Mn,Da]=j.useState("active"),[an,nl]=j.useState("all"),mi=j.useMemo(()=>r.filter(U=>{const ce=an==="all"||U.category===an,Oe=Mn==="all"||U.status===Mn;return ce&&Oe}),[r,an,Mn]),Ra=U=>["damage","upgrade","upsell","restaurant","minibar"].includes(U),[On,Un]=j.useState({}),[nn,sl]=j.useState({}),[rr,ft]=j.useState({}),[or,sn]=j.useState({});j.useEffect(()=>{if(M!=="damage")return;const U=Object.entries(On).filter(([Ue,Re])=>Re>0);if(U.length===0){Y(""),L("");return}let ce=0;const Oe=[];U.forEach(([Ue,Re])=>{var Ce,Qe;const Fe=((Qe=(Ce=w==null?void 0:w.settings)==null?void 0:Ce.fixture_prices)==null?void 0:Qe[Ue])||0;ce+=Fe*Re,Oe.push(`${g(`fixture.${Ue}`)} (x${Re})`)}),Y(ce.toString()),L(Oe.join(", "))},[On,M,(ha=w==null?void 0:w.settings)==null?void 0:ha.fixture_prices,g]),j.useEffect(()=>{if(M!=="minibar")return;const U=Object.entries(nn).filter(([Ue,Re])=>Re>0);if(U.length===0){Y(""),L("");return}let ce=0;const Oe=[];U.forEach(([Ue,Re])=>{var Ce,Qe;const Fe=((Qe=(Ce=w==null?void 0:w.settings)==null?void 0:Ce.minibar_prices)==null?void 0:Qe[Ue])||0;ce+=Fe*Re,Oe.push(`${g(`minibar.${Ue}`)} (x${Re})`)}),Y(ce.toString()),L(Oe.join(", "))},[nn,M,(Et=w==null?void 0:w.settings)==null?void 0:Et.minibar_prices,g]);const hi=async()=>{var U;if(!(!R.trim()||!p)){It(!0);try{await o(c,{category:M,content:R.trim(),room_number:q.trim()||null,is_relevant:!0,amount_due:Ra(M)&&le?parseFloat(le):null,is_paid:!1,created_by:p.uid,created_by_name:p.name||"Unknown",shift_id:null,time:I||null,guest_name:K.trim()||null,assigned_staff_uid:P&&P!=="none"?P:null,assigned_staff_name:P&&P!=="none"&&((U=v.find(ce=>ce.uid===P))==null?void 0:U.name)||null}),L(""),F(""),Y(""),D(""),Q(""),ie(""),Un({}),sl({}),_(!1)}finally{It(!1)}}},ds=async(U,ce)=>{p&&await Wa.getState().updateNoteStatus(c,U,ce,p.uid)},dr=async U=>{await m(c,U)},xi=async U=>{confirm(g("common.deleteConfirm"))&&await h(c,U)},ur=async U=>{confirm("Convert this note to a system log?")&&await b(c,U)},fr=U=>{var ce;if(ae(U.id),y(U.content),ne(U.category),pe(((ce=U.amount_due)==null?void 0:ce.toString())||""),Ne(U.room_number||""),ue(U.time||""),W(U.guest_name||""),$e(U.assigned_staff_uid||"none"),U.category==="damage"){const Oe={};Bc.forEach(Ue=>{const Fe=g(`fixture.${Ue}`).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Ce=new RegExp(`${Fe}\\s*\\(x(\\d+)\\)`),Qe=U.content.match(Ce);Qe&&(Oe[Ue]=parseInt(Qe[1]))}),ft(Oe)}else ft({});if(U.category==="minibar"){const Oe={};Gc.forEach(Ue=>{const Fe=g(`minibar.${Ue}`).replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Ce=new RegExp(`${Fe}\\s*\\(x(\\d+)\\)`),Qe=U.content.match(Ce);Qe&&(Oe[Ue]=parseInt(Qe[1]))}),sn(Oe)}else sn({})},Hn=async()=>{var U;if(!(!$||!p))try{It(!0),await u(c,$,{content:de,category:H,room_number:qe.trim()||null,amount_due:Ra(H)&&se?parseFloat(se):null,time:X||null,guest_name:we.trim()||null,assigned_staff_uid:ye&&ye!=="none"?ye:null,assigned_staff_name:ye&&ye!=="none"&&((U=v.find(ce=>ce.uid===ye))==null?void 0:U.name)||null}),ae(null),ft({}),sn({})}finally{It(!1)}},ht=j.useMemo(()=>{const U={all:0};return r.forEach(ce=>{U[ce.category]=(U[ce.category]||0)+1,U[ce.status]=(U[ce.status]||0)+1,U.all++}),U},[r]);return n.jsxs(Rn,{id:"shift-notes",title:n.jsxs(_t,{className:"text-sm font-medium text-zinc-300 flex items-center gap-2",children:[" ",g("module.shiftNotes"),ht.active>0&&n.jsxs(lt,{variant:"secondary",className:"text-xs",children:[ht.active," ",g("status.active")]})]}),headerActions:d&&n.jsx(ee,{size:"sm",variant:"ghost",onClick:U=>{U.stopPropagation(),_(!E)},className:"hover:bg-indigo-500/10 hover:text-indigo-400 h-8 w-8 p-0",children:n.jsx(cs,{className:"w-4 h-4"})}),className:"glass border-zinc-800/50",children:[n.jsxs("div",{className:"pt-2",children:[n.jsx("div",{className:"flex gap-1 mb-4 p-1 bg-zinc-950/50 rounded-lg border border-zinc-800/50",children:[{key:"active",label:g("status.active"),color:"bg-emerald-500"},{key:"resolved",label:g("status.resolved"),color:"bg-indigo-500"},{key:"archived",label:g("status.archived"),color:"bg-zinc-600"},{key:"all",label:g("status.all"),color:"bg-zinc-400"}].map(U=>n.jsxs("button",{onClick:()=>Da(U.key),className:G("flex-1 text-[10px] font-bold uppercase tracking-wider py-1.5 rounded transition-all",Mn===U.key?"bg-zinc-800 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"),children:[U.label,ht[U.key]>0&&n.jsxs("span",{className:"ml-1 opacity-60",children:["(",ht[U.key],")"]})]},U.key))}),n.jsx("div",{className:"flex flex-wrap gap-1.5",children:[{key:"all",label:g("category.allIssues"),color:"bg-indigo-500",icon:""},{key:"handover",...pt.handover,label:g("category.handover")},{key:"feedback",...pt.feedback,label:g("category.feedback")},{key:"damage",...pt.damage,label:g("category.damage")},{key:"upgrade",...pt.upgrade,label:g("category.upgrade")},{key:"upsell",...pt.upsell,label:g("category.upsell")},{key:"restaurant",...pt.restaurant,label:g("category.restaurant")},{key:"guest_info",...pt.guest_info,label:g("category.guestInfo")},{key:"early_checkout",...pt.early_checkout,label:g("category.earlyCheckout")}].map(U=>n.jsxs("button",{onClick:()=>nl(U.key),className:G("text-[11px] px-2.5 py-1 rounded-full flex items-center gap-1.5 transition-all",an===U.key?`${U.color} text-white shadow-lg`:"bg-zinc-800/70 text-zinc-400 hover:bg-zinc-700/70 hover:text-zinc-200"),children:[n.jsx("span",{children:U.icon}),n.jsx("span",{children:U.label})]},U.key))})]}),n.jsxs("div",{className:"space-y-4 pt-4",children:[n.jsx(dt,{children:E&&n.jsxs(me.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"space-y-3 p-3 bg-zinc-900/50 rounded-lg border border-zinc-700",children:[n.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(pt).map(U=>n.jsxs("button",{onClick:()=>T(U),className:G("text-xs px-2 py-1 rounded-full flex items-center gap-1.5 transition-all",M===U?`${pt[U].color} text-white shadow-sm`:"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:[pt[U].icon,g(`category.${U==="guest_info"?"guestInfo":U==="early_checkout"?"earlyCheckout":U}`)]},U))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(re,{placeholder:g("common.room")+" #",value:q,onChange:U=>F(U.target.value),className:"w-20 text-sm bg-zinc-800/50"}),n.jsx(re,{type:"time",value:I,onChange:U=>D(U.target.value),className:"w-24 text-sm bg-zinc-800/50"}),Ra(M)&&n.jsx(re,{placeholder:g("common.amount")+" ",type:"number",value:le,onChange:U=>Y(U.target.value),className:"w-24 text-sm bg-zinc-800/50"})]}),M==="minibar"&&n.jsxs("div",{className:"p-3 bg-zinc-950/30 rounded-lg border border-zinc-800 mb-4",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-2 block tracking-wider",children:g("hotel.settings.minibarPrices")}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Gc.map(U=>{var Ue,Re;const ce=nn[U]||0,Oe=((Re=(Ue=w==null?void 0:w.settings)==null?void 0:Ue.minibar_prices)==null?void 0:Re[U])||0;return n.jsxs("div",{className:"flex flex-col gap-1 p-2 rounded bg-zinc-900/50 border border-zinc-800/50 hover:border-zinc-700/50 transition-colors",children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[10px] text-zinc-300 font-medium truncate",children:g(`minibar.${U}`)}),n.jsxs("span",{className:"text-[9px] text-zinc-500 italic",children:["",Oe]})]}),n.jsxs("div",{className:"flex items-center justify-between mt-1",children:[n.jsx("button",{onClick:Fe=>{Fe.stopPropagation();const Ce=nn[U]||0;Ce>0&&sl(Qe=>({...Qe,[U]:Ce-1}))},className:"w-5 h-5 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800 rounded text-xs transition-colors",type:"button",children:"-"}),n.jsx("span",{className:"text-xs font-mono w-4 text-center text-zinc-300",children:ce}),n.jsx("button",{onClick:Fe=>{Fe.stopPropagation(),sl(Ce=>({...Ce,[U]:(Ce[U]||0)+1}))},className:"w-5 h-5 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800 rounded text-xs transition-colors",type:"button",children:"+"})]})]},U)})}),(!((gi=w==null?void 0:w.settings)!=null&&gi.minibar_prices)||Object.keys(w.settings.minibar_prices).length===0)&&n.jsxs("p",{className:"text-[10px] text-amber-500/80 italic mt-2 flex items-center gap-1.5",children:[n.jsx(ar,{className:"w-3 h-3"}),g("notes.noFixturePrices")]})]}),M==="damage"&&n.jsxs("div",{className:"p-3 bg-zinc-800/30 rounded-lg border border-zinc-800 mb-2",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-2 block",children:g("hotel.settings.fixturePrices")}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Bc.map(U=>{var Ue,Re;const ce=(Re=(Ue=w==null?void 0:w.settings)==null?void 0:Ue.fixture_prices)==null?void 0:Re[U];if(!ce)return null;const Oe=On[U]||0;return n.jsxs("div",{className:G("flex items-center justify-between p-2 rounded-md border transition-all",Oe>0?"bg-indigo-500/10 border-indigo-500/30":"bg-zinc-800/50 border-zinc-700/50"),children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-xs text-zinc-300 font-medium",children:g(`fixture.${U}`)}),n.jsxs("span",{className:"text-[10px] text-zinc-500",children:["",ce]})]}),n.jsxs("div",{className:"flex items-center gap-1 bg-zinc-900 rounded p-0.5 border border-zinc-700",children:[n.jsx("button",{onClick:Fe=>{Fe.stopPropagation(),Un(Ce=>({...Ce,[U]:Math.max(0,(Ce[U]||0)-1)}))},className:"w-5 h-5 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800 rounded text-xs",type:"button",children:"-"}),n.jsx("span",{className:"text-xs font-mono w-4 text-center",children:Oe}),n.jsx("button",{onClick:Fe=>{Fe.stopPropagation(),Un(Ce=>({...Ce,[U]:(Ce[U]||0)+1}))},className:"w-5 h-5 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800 rounded text-xs",type:"button",children:"+"})]})]},U)})}),(!((pi=w==null?void 0:w.settings)!=null&&pi.fixture_prices)||Object.keys(w.settings.fixture_prices).length===0)&&n.jsx("p",{className:"text-xs text-zinc-500 italic mt-2",children:g("notes.noFixturePrices")})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:g("tours.book.guestName")}),n.jsx(re,{placeholder:"John Doe",value:K,onChange:U=>Q(U.target.value),className:"h-9 text-sm bg-zinc-800/50"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:g("common.staff")}),n.jsxs(ya,{value:P,onValueChange:ie,children:[n.jsx(da,{className:"w-full text-xs h-9 bg-zinc-800/50 border-zinc-700",children:n.jsx(va,{placeholder:"Assign To..."})}),n.jsxs(ua,{children:[n.jsx(Te,{value:"none",children:"Unassigned"}),v.map(U=>n.jsx(Te,{value:U.uid,children:U.name},U.uid))]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between px-1",children:[n.jsx("label",{className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500",children:g("module.shiftNotes")}),n.jsxs(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>os(!0),className:"h-6 text-[9px] text-indigo-400 hover:text-indigo-300 hover:bg-indigo-500/10 gap-1",children:[n.jsx(Od,{className:"w-3 h-3"}),g("notes.aiHelp")]})]}),n.jsx(re,{placeholder:g("module.shiftNotes")+"...",value:R,onChange:U=>L(U.target.value),className:"text-sm bg-zinc-800/50"})]}),n.jsx(qx,{isOpen:Aa,onClose:()=>os(!1),initialTask:"report",initialPrompt:R}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ee,{size:"sm",onClick:hi,disabled:!R.trim()||Rt,className:"flex-1 bg-white text-black hover:bg-zinc-200",children:[Rt?n.jsx(Jt,{className:"w-3 h-3 animate-spin mr-2"}):n.jsx(kt,{className:"w-3 h-3 mr-2"}),g("common.save")]}),n.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>_(!1),children:g("common.cancel")})]})]})}),mi.length===0?n.jsx("p",{className:"text-zinc-500 text-sm text-center py-8",children:g("notes.noNotes")}):n.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto custom-scrollbar",children:mi.map(U=>n.jsx(me.div,{layout:!0,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:G("p-3 rounded-lg border transition-all group",U.status==="active"?"border-zinc-800 bg-zinc-900/50":"border-zinc-800/30 bg-zinc-900/20 opacity-60"),children:n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[n.jsxs("span",{className:G("text-[10px] font-bold uppercase px-1.5 py-0.5 rounded",pt[U.category].color,"text-white"),children:[pt[U.category].icon," ",pt[U.category].label]}),U.room_number&&n.jsxs(lt,{variant:"outline",className:"text-[10px] h-4 bg-zinc-800 text-zinc-400 border-zinc-700",children:["#",U.room_number]}),U.guest_name&&n.jsxs(lt,{variant:"outline",className:"text-[10px] h-4 bg-zinc-800 text-zinc-400 border-zinc-700 flex items-center gap-1",children:[n.jsx(Ws,{className:"w-2.5 h-2.5"}),U.guest_name]}),Ra(U.category)&&U.amount_due&&n.jsxs("span",{className:G("text-[10px] font-bold",U.is_paid?"text-emerald-400":"text-rose-400"),children:["",U.amount_due.toLocaleString(),U.is_paid&&" "]}),n.jsx(lt,{variant:"outline",className:G("text-[9px] h-4 px-1 border-none",U.status==="active"?"text-emerald-500 bg-emerald-500/10":U.status==="resolved"?"text-indigo-500 bg-indigo-500/10":"text-zinc-500 bg-zinc-500/10"),children:g(`status.${U.status}`).toUpperCase()})]}),$===U.id?n.jsxs("div",{className:"space-y-2 mb-2",children:[n.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:Object.keys(pt).map(ce=>n.jsxs("button",{onClick:()=>ne(ce),className:G("text-[10px] px-2 py-0.5 rounded-full flex items-center gap-1 transition-all",H===ce?`${pt[ce].color} text-white`:"bg-zinc-800 text-zinc-500 hover:bg-zinc-700"),children:[pt[ce].icon," ",pt[ce].label]},ce))}),n.jsx("div",{className:"flex gap-2",children:n.jsx(re,{value:de,onChange:ce=>y(ce.target.value),className:"h-8 text-sm bg-zinc-950 border-zinc-700 flex-1",autoFocus:!0})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(re,{placeholder:"Room #",value:qe,onChange:ce=>Ne(ce.target.value),className:"h-8 w-20 text-sm bg-zinc-950 border-zinc-700"}),n.jsx(re,{type:"time",value:X,onChange:ce=>ue(ce.target.value),className:"h-8 w-24 text-sm bg-zinc-950 border-zinc-700"}),Ra(H)&&n.jsx(re,{type:"number",placeholder:"",value:se,onChange:ce=>pe(ce.target.value),className:"h-8 w-20 text-sm bg-zinc-950 border-zinc-700"})]}),H==="damage"&&n.jsxs("div",{className:"p-2 bg-zinc-950/30 rounded border border-zinc-800 mb-2",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 block",children:g("hotel.settings.fixturePrices")}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Bc.map(ce=>{var Re,Fe;const Oe=(Fe=(Re=w==null?void 0:w.settings)==null?void 0:Re.fixture_prices)==null?void 0:Fe[ce];if(!Oe)return null;const Ue=rr[ce]||0;return n.jsxs("div",{className:G("flex items-center justify-between p-1.5 rounded-md border transition-all",Ue>0?"bg-indigo-500/10 border-indigo-500/30":"bg-zinc-800/50 border-zinc-700/50"),children:[n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-[10px] text-zinc-300 font-medium truncate max-w-[80px]",title:g(`fixture.${ce}`),children:g(`fixture.${ce}`)}),n.jsxs("span",{className:"text-[9px] text-zinc-500",children:["",Oe]})]}),n.jsxs("div",{className:"flex items-center gap-0.5 bg-zinc-900 rounded border border-zinc-700",children:[n.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),ft(Qe=>({...Qe,[ce]:Math.max(0,(Qe[ce]||0)-1)}))},className:"w-4 h-4 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800 rounded text-[10px]",type:"button",children:"-"}),n.jsx("span",{className:"text-[10px] font-mono w-3 text-center",children:Ue}),n.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),ft(Qe=>({...Qe,[ce]:(Qe[ce]||0)+1}))},className:"w-4 h-4 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800 rounded text-[10px]",type:"button",children:"+"})]})]},ce)})})]}),H==="minibar"&&n.jsxs("div",{className:"p-2 bg-zinc-950/30 rounded border border-zinc-800 mb-2",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase mb-1 block tracking-wider",children:g("hotel.settings.minibarPrices")}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:Gc.map(ce=>{var Re,Fe;const Oe=or[ce]||0,Ue=((Fe=(Re=w==null?void 0:w.settings)==null?void 0:Re.minibar_prices)==null?void 0:Fe[ce])||0;return n.jsxs("div",{className:G("flex items-center justify-between p-1.5 rounded-md border transition-all",Oe>0?"bg-emerald-500/10 border-emerald-500/30":"bg-zinc-800/50 border-zinc-700/50"),children:[n.jsxs("div",{className:"flex flex-col min-w-0",children:[n.jsx("span",{className:"text-[10px] text-zinc-300 font-medium truncate",title:g(`minibar.${ce}`),children:g(`minibar.${ce}`)}),n.jsxs("span",{className:"text-[9px] text-zinc-500",children:["",Ue]})]}),n.jsxs("div",{className:"flex items-center gap-0.5 bg-zinc-900 rounded border border-zinc-700",children:[n.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),sn(Qe=>{const bi=Math.max(0,(Qe[ce]||0)-1);return{...Qe,[ce]:bi}})},className:"w-4 h-4 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800 rounded text-[10px]",type:"button",children:"-"}),n.jsx("span",{className:"text-[10px] font-mono w-3 text-center",children:Oe}),n.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),sn(Qe=>({...Qe,[ce]:(Qe[ce]||0)+1}))},className:"w-4 h-4 flex items-center justify-center text-zinc-400 hover:text-white hover:bg-zinc-800 rounded text-[10px]",type:"button",children:"+"})]})]},ce)})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:g("tours.book.guestName")}),n.jsx(re,{placeholder:"Guest Name",value:we,onChange:ce=>W(ce.target.value),className:"h-8 text-sm bg-zinc-950 border-zinc-700"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:g("common.staff")}),n.jsxs(ya,{value:ye,onValueChange:$e,children:[n.jsx(da,{className:"w-full h-8 text-xs bg-zinc-950 border-zinc-700",children:n.jsx(va,{placeholder:"Staff"})}),n.jsxs(ua,{children:[n.jsx(Te,{value:"none",children:"Unassigned"}),v.map(ce=>n.jsx(Te,{value:ce.uid,children:ce.name},ce.uid))]})]})]})]}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx(ee,{size:"sm",onClick:Hn,disabled:Rt,className:"h-7 text-xs bg-emerald-600 hover:bg-emerald-500 text-white px-3",children:g("common.save")}),n.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>ae(null),className:"h-7 text-xs px-3",children:g("common.cancel")})]})]}):n.jsx("p",{className:"text-sm text-zinc-300 mb-2 leading-relaxed",children:U.content}),n.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-zinc-500",children:[((p==null?void 0:p.role)==="gm"||U.category!=="feedback")&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Ws,{className:"w-2.5 h-2.5"}),U.is_anonymous?g("notes.anonymous"):U.created_by_name]}),((p==null?void 0:p.role)==="gm"||U.category!=="feedback")&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Jt,{className:"w-2.5 h-2.5"}),nr(U.created_at,{addSuffix:!0,locale:ii()}),n.jsxs("span",{className:"opacity-50 ml-1",children:["(",Xd(U.created_at),")"]}),U.updated_at&&U.updated_at.getTime()!==U.created_at.getTime()&&n.jsx("span",{className:"text-zinc-600 ml-1",title:Xd(U.updated_at),children:"(edited)"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[Ra(U.category)&&!U.is_paid&&U.amount_due&&n.jsx(ee,{size:"icon",variant:"ghost",onClick:()=>dr(U.id),className:"h-6 w-6 text-emerald-500 hover:bg-emerald-500/10",children:n.jsx(zx,{className:"w-3.5 h-3.5"})}),n.jsxs(ya,{value:U.status,onValueChange:ce=>ds(U.id,ce),children:[n.jsx(da,{className:"h-6 w-24 bg-zinc-950 border-zinc-800 text-[10px] px-2",children:n.jsx(va,{})}),n.jsxs(ua,{className:"bg-zinc-900 border-zinc-800",children:[n.jsx(Te,{value:"active",className:"text-xs",children:g("status.active")}),n.jsx(Te,{value:"resolved",className:"text-xs",children:g("status.resolved")}),n.jsx(Te,{value:"archived",className:"text-xs",children:g("status.archived")})]})]}),(p==null?void 0:p.role)==="gm"&&n.jsxs(n.Fragment,{children:[n.jsx(ee,{size:"icon",variant:"ghost",onClick:()=>ur(U.id),className:"h-6 w-6 text-indigo-400 hover:bg-indigo-500/10",title:"Convert to Log",children:n.jsx(Od,{className:"w-3.5 h-3.5"})}),n.jsx(ee,{size:"icon",variant:"ghost",onClick:()=>xi(U.id),className:"h-6 w-6 text-rose-500 hover:bg-rose-500/10",children:n.jsx(en,{className:"w-3.5 h-3.5"})})]}),n.jsx(ee,{size:"icon",variant:"ghost",onClick:()=>fr(U),className:"h-6 w-6 text-indigo-400 hover:bg-indigo-500/10",children:n.jsx(Lb,{className:"w-3.5 h-3.5"})})]})]})},U.id))})]})]})}const Dd={iban:"",bank_name:"",laundry_price:0,transfer_price:0,late_checkout_price:0,extra_bed_price:0,notes:""};function wN({hotelId:c,canEdit:d}){var ie,$,ae,de;const{t:r}=Xe(),[o,u]=j.useState(Dd),[m,h]=j.useState(!0),[b,p]=j.useState(!1),[g,v]=j.useState(!1),[N,w]=j.useState(Dd),[E,_]=j.useState(!1),[M,T]=j.useState(""),{user:R}=Ge(),{hotel:L,updateHotelSettings:q}=ut(),F=(R==null?void 0:R.role)==="gm";j.useEffect(()=>{if(!c)return;(async()=>{h(!0);try{const H=he(te,"hotels",c,"settings","info"),ne=await ns(H);ne.exists()&&u({...Dd,...ne.data()})}catch(H){console.error("Error fetching hotel info:",H)}finally{h(!1)}})()},[c]);const le=()=>{w(o),v(!0)},Y=()=>{v(!1)},I=async()=>{p(!0);try{const y=he(te,"hotels",c,"settings","info");await Pa(y,N),u(N),v(!1)}catch(y){console.error("Error saving hotel info:",y)}finally{p(!1)}},D=async y=>{if(L!=null&&L.id){p(!0);try{await q(L.id,{secret_info:{...L.settings.secret_info,...y}})}catch(H){console.error("Error saving secret info:",H)}finally{p(!1)}}},K=async()=>{if(!(!(L!=null&&L.id)||!M)){p(!0);try{await q(L.id,{safe_password:M}),T(""),_(!0)}catch(y){console.error("Error setting safe password:",y)}finally{p(!1)}}},Q=()=>{var y;M===((y=L==null?void 0:L.settings)==null?void 0:y.safe_password)?(_(!0),T("")):alert("Yanl ifre!")};if(m)return n.jsx(fa,{children:n.jsx(ma,{className:"flex items-center justify-center py-8",children:n.jsx(at,{className:"w-5 h-5 animate-spin text-zinc-500"})})});const P=[{key:"laundry_price",label:r("hotel.laundry"),icon:nh},{key:"transfer_price",label:r("hotel.transfer"),icon:qb},{key:"late_checkout_price",label:r("hotel.lateCheckout"),icon:Wd},{key:"extra_bed_price",label:r("hotel.extraBed"),icon:sh}];return n.jsx(Rn,{id:"hotel-info",title:n.jsxs(_t,{className:"text-sm font-medium text-zinc-300 flex items-center gap-2",children:[n.jsx(sh,{className:"w-4 h-4 text-indigo-400"}),r("module.hotelInfo")]}),headerActions:d&&!g&&n.jsx(ee,{size:"sm",variant:"ghost",onClick:y=>{y.stopPropagation(),le()},className:"h-8 w-8 p-0",children:n.jsx(wx,{className:"w-4 h-4"})}),children:n.jsx("div",{className:"pt-2",children:g?n.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs text-zinc-400",children:r("hotel.iban")}),n.jsx(re,{placeholder:"TR00 0000 0000 0000 0000 0000 00",value:N.iban,onChange:y=>w(H=>({...H,iban:y.target.value}))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-zinc-400",children:r("hotel.bankName")}),n.jsx(re,{placeholder:r("hotel.bankNamePlaceholder"),value:N.bank_name,onChange:y=>w(H=>({...H,bank_name:y.target.value}))})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:P.map(y=>n.jsxs("div",{children:[n.jsxs("label",{className:"text-xs text-zinc-400",children:[y.label," ()"]}),n.jsx(re,{type:"number",value:String(N[y.key]||0),onChange:H=>w(ne=>({...ne,[y.key]:parseFloat(H.target.value)||0}))})]},y.key))}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-zinc-400",children:r("hotel.additionalNotes")}),n.jsx("textarea",{placeholder:r("hotel.notesPlaceholder"),value:N.notes,onChange:y=>w(H=>({...H,notes:y.target.value})),rows:3,className:"w-full rounded-lg border border-zinc-700 bg-zinc-900 px-3 py-2 text-sm resize-none focus:outline-none focus:ring-1 focus:ring-indigo-500"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(ee,{onClick:I,disabled:b,size:"sm",children:[b?n.jsx(at,{className:"w-4 h-4 animate-spin"}):n.jsx(Pd,{className:"w-4 h-4"}),r("common.save")]}),n.jsxs(ee,{variant:"ghost",onClick:Y,size:"sm",children:[n.jsx(St,{className:"w-4 h-4"}),r("common.cancel")]})]})]}):n.jsxs("div",{className:"space-y-4",children:[F&&n.jsx("div",{className:"p-3 bg-zinc-800/50 rounded-lg flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Md,{className:"w-4 h-4 text-indigo-400"}),n.jsx("span",{className:"text-xs text-zinc-400",children:"Hotel Code:"}),n.jsx("div",{className:"flex items-center gap-2",children:L!=null&&L.code?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"bg-black/40 px-3 py-1.5 rounded border border-indigo-500/30 flex items-center gap-2",children:n.jsx("span",{className:"font-mono text-xl font-bold text-indigo-300 tracking-[0.2em]",children:L.code})}),n.jsx(ee,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-zinc-400 hover:text-white",onClick:()=>{navigator.clipboard.writeText(L.code||"");const y=document.activeElement;if(y){const H=y.innerHTML;y.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check w-4 h-4 text-emerald-400"><path d="M20 6 9 17l-5-5"/></svg>',setTimeout(()=>{y.innerHTML=H},2e3)}},title:"Copy Code",children:n.jsx("div",{className:"relative",children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-copy w-4 h-4",children:[n.jsx("rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2"}),n.jsx("path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"})]})})})]}):n.jsxs(ee,{size:"sm",variant:"outline",onClick:async y=>{if(y.preventDefault(),!(L!=null&&L.id))return;p(!0);const H="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let ne="";for(let se=0;se<6;se++)ne+=H.charAt(Math.floor(Math.random()*H.length));try{const{doc:se,updateDoc:pe}=await oa(async()=>{const{doc:Ne,updateDoc:X}=await import("./vendor-firebase-DntPIKkY.js").then(ue=>ue.y);return{doc:Ne,updateDoc:X}},[]),{db:qe}=await oa(async()=>{const{db:Ne}=await Promise.resolve().then(()=>Ox);return{db:Ne}},void 0);await pe(se(qe,"hotels",L.id),{code:ne})}catch(se){console.error("Code generation failed:",se),alert("Failed to generate code. Please try again.")}finally{p(!1)}},className:"h-7 text-xs bg-indigo-600/10 text-indigo-300 border-indigo-500/30 hover:bg-indigo-600/20",disabled:b,children:[b?n.jsx(at,{className:"w-3 h-3 animate-spin mr-1"}):n.jsx(Md,{className:"w-3 h-3 mr-1"}),"Generate Hotel Code"]})})]})}),o.iban&&n.jsxs("div",{className:"p-3 bg-zinc-800/50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(eu,{className:"w-4 h-4 text-indigo-400"}),n.jsx("span",{className:"text-xs text-zinc-400",children:r("hotel.bankAccount")})]}),n.jsx("p",{className:"font-mono text-sm text-zinc-200",children:o.iban}),o.bank_name&&n.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:o.bank_name})]}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:P.map(y=>{const H=o[y.key];if(!H||H===0)return null;const ne=y.icon;return n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-zinc-800/30 rounded",children:[n.jsx(ne,{className:"w-4 h-4 text-zinc-500"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-xs text-zinc-400 truncate",children:y.label}),n.jsxs("p",{className:"text-sm font-bold text-zinc-200",children:["",H.toLocaleString()]})]})]},y.key)})}),o.notes&&n.jsx("div",{className:"text-sm text-zinc-400 p-2 bg-zinc-800/30 rounded",children:o.notes}),!o.iban&&!o.notes&&P.every(y=>!o[y.key])&&n.jsxs("p",{className:"text-zinc-500 text-sm text-center py-4",children:[r("hotel.noInfo"),d&&` - ${r("hotel.clickEdit")}`]}),n.jsxs("div",{className:"mt-6 pt-4 border-t border-zinc-800",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ax,{className:"w-4 h-4 text-emerald-400"}),n.jsx("h3",{className:"text-sm font-semibold text-white",children:r("hotel.secure.title")})]}),E?n.jsxs(ee,{size:"sm",variant:"ghost",onClick:()=>_(!1),children:[n.jsx(Vc,{className:"w-3 h-3 mr-1"})," Kilitle"]}):n.jsx(lt,{variant:"outline",className:"bg-amber-500/10 text-amber-400 border-amber-500/20 text-[10px]",children:r("hotel.secure.encrypted")})]}),(ie=L==null?void 0:L.settings)!=null&&ie.safe_password?E?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:r("hotel.secure.agency")}),n.jsx("textarea",{className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg p-2 text-xs text-zinc-300 min-h-[60px]",defaultValue:($=L.settings.secret_info)==null?void 0:$.agency_logins,onBlur:y=>D({agency_logins:y.target.value}),placeholder:`Bcom: user/pass
Expedia: user/pass...`})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:r("hotel.secure.kbs")}),n.jsx("textarea",{className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg p-2 text-xs text-zinc-300 min-h-[60px]",defaultValue:(ae=L.settings.secret_info)==null?void 0:ae.kbs_logins,onBlur:y=>D({kbs_logins:y.target.value}),placeholder:`Tesis Kodu: XXXXX
ifre: XXXXX...`})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:r("hotel.secure.other")}),n.jsx("textarea",{className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg p-2 text-xs text-zinc-300 min-h-[60px]",defaultValue:(de=L.settings.secret_info)==null?void 0:de.safe_info,onBlur:y=>D({safe_info:y.target.value}),placeholder:"Kasa kodu, nemli anahtar yerleri vb..."})]})]}),F&&n.jsxs("div",{className:"pt-4 border-t border-zinc-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(nh,{className:"w-4 h-4 text-indigo-400"}),n.jsx("h4",{className:"text-xs font-bold text-zinc-300 uppercase tracking-wider",children:r("hotel.settings.fixturePrices")})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:Bc.map(y=>{var H;return n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:r(`fixture.${y}`)}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-2 top-1.5 text-zinc-500 text-xs",children:""}),n.jsx(re,{type:"number",className:"h-8 bg-zinc-950 border-zinc-800 pl-6 text-xs",placeholder:"0.00",defaultValue:((H=L.settings.fixture_prices)==null?void 0:H[y])||"",onBlur:ne=>{const se=parseFloat(ne.target.value);if(!isNaN(se)){const pe=L.settings.fixture_prices||{};q(L.id,{fixture_prices:{...pe,[y]:se}})}}})]})]},y)})})]}),F&&n.jsxs("div",{className:"pt-4 border-t border-zinc-800",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Vb,{className:"w-4 h-4 text-emerald-400"}),n.jsx("h4",{className:"text-xs font-bold text-zinc-300 uppercase tracking-wider",children:r("hotel.settings.minibarPrices")})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:Gc.map(y=>{var H;return n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:r(`minibar.${y}`)}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-2 top-1.5 text-zinc-500 text-xs",children:""}),n.jsx(re,{type:"number",className:"h-8 bg-zinc-950 border-zinc-800 pl-6 text-xs",placeholder:"0.00",defaultValue:((H=L.settings.minibar_prices)==null?void 0:H[y])||"",onBlur:ne=>{const se=parseFloat(ne.target.value);if(!isNaN(se)){const pe=L.settings.minibar_prices||{};q(L.id,{minibar_prices:{...pe,[y]:se}})}}})]})]},y)})})]}),F&&n.jsx("div",{className:"pt-2 flex justify-end",children:n.jsx(ee,{variant:"ghost",size:"sm",className:"h-6 text-[10px] text-zinc-600 hover:text-rose-400",onClick:()=>{confirm("ifreyi sfrlamak istiyor musunuz?")&&(q(L.id,{safe_password:""}),_(!1))},children:"ifreyi Sfrla"})})]}):n.jsxs("div",{className:"flex gap-2",children:[n.jsx(re,{type:"password",placeholder:r("hotel.secure.safeCode"),autoComplete:"new-password",value:M,onChange:y=>T(y.target.value),onKeyDown:y=>y.key==="Enter"&&Q(),className:"h-9 bg-zinc-950 border-zinc-800"}),n.jsx(ee,{onClick:Q,children:n.jsx(Yb,{className:"w-4 h-4"})})]}):F?n.jsxs("div",{className:"p-4 bg-indigo-500/5 rounded-xl border border-indigo-500/20 space-y-3",children:[n.jsx("p",{className:"text-xs text-zinc-400",children:"Henz kasa ifresi belirlenmemi. Gzetmen olarak ifre belirleyerek bu alan kullanmaya balayabilirsiniz."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(re,{type:"password",placeholder:"Gvenli Kasa ifresi",autoComplete:"new-password",value:M,onChange:y=>T(y.target.value),className:"h-8 bg-zinc-950 border-zinc-800 text-xs"}),n.jsx(ee,{size:"sm",onClick:K,disabled:b,children:"Belirle"})]})]}):n.jsx("p",{className:"text-xs text-zinc-500 italic",children:"Gzetmen henz kasa ifresi belirlememi."})]})]})})})}const Mc=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Lh={A:"bg-indigo-500/80 text-white",B:"bg-purple-500/80 text-white",C:"bg-rose-500/80 text-white",E:"bg-amber-500/80 text-white",OFF:"bg-zinc-700 text-zinc-400"},Oc=["A","B","C","E","OFF"];function SN({hotelId:c,canEdit:d}){var I;const{t:r}=Xe(),{hotel:o,updateHotelSettings:u}=ut(),{user:m}=Ge(),{toggleStaffVisibility:h}=rs(),[b,p]=j.useState([]),[g,v]=j.useState({}),[N,w]=j.useState(0),[E,_]=j.useState(!0),[M,T]=j.useState(!1),L=((D=0)=>{const K=new Date,Q=K.getDay(),P=K.getDate()-Q+(Q===0?-6:1)+D*7,ie=new Date(K.setDate(P)),$=ie.getFullYear(),ae=String(ie.getMonth()+1).padStart(2,"0"),de=String(ie.getDate()).padStart(2,"0");return`${$}-${ae}-${de}`})(N),q=j.useMemo(()=>{const D=new Date(L);return Array.from({length:7}).map((K,Q)=>{const P=new Date(D);return P.setDate(D.getDate()+Q),{day:Mc[Q],dateStr:ls(P)}})},[L]),F=j.useMemo(()=>{var P;let D=b;if(!((P=o==null?void 0:o.settings)!=null&&P.staff_order)||D.length===0)return D;const K=o.settings.staff_order;return D.sort((ie,$)=>{const ae=K.indexOf(ie.uid),de=K.indexOf($.uid);return ae===-1&&de===-1?0:ae===-1?1:de===-1?-1:ae-de})},[b,(I=o==null?void 0:o.settings)==null?void 0:I.staff_order,m==null?void 0:m.role]),le=async D=>{if(p(D),d&&c)try{await u(c,{staff_order:D.map(K=>K.uid)})}catch(K){console.error("Failed to save staff order:",K)}};j.useEffect(()=>{if(!c)return;(async()=>{_(!0);try{const K=await tl(yt(Le(te,"users"),Na("hotel_id","==",c))),Q=[];K.forEach($=>{const ae=$.data();ae.name&&ae.name!=="Unknown"&&Q.push({uid:$.id,name:ae.name,is_hidden_in_roster:ae.is_hidden_in_roster})}),p(Q);const P=he(te,"hotels",c,"roster",L),ie=await ns(P);if(ie.exists())v(ie.data().schedule||{});else{const $={};Q.forEach(ae=>{$[ae.uid]={},Mc.forEach(de=>{$[ae.uid][de]=null})}),v($)}}catch(K){console.error("Error fetching roster:",K)}finally{_(!1)}})()},[c,L]);const Y=async(D,K)=>{var $;if(!d)return;const Q=(($=g[D])==null?void 0:$[K])||null,P=Q?Oc.indexOf(Q):-1,ie=Oc[(P+1)%Oc.length];v(ae=>({...ae,[D]:{...ae[D],[K]:ie}})),T(!0);try{const ae=he(te,"hotels",c,"roster",L);await Pa(ae,{week_start:L,schedule:{...g,[D]:{...g[D],[K]:ie}},updated_at:new Date},{merge:!0});const de=Mc.indexOf(K);if(de!==-1){const y=new Date(L),H=new Date(y);H.setDate(y.getDate()+de);const ne=H.getFullYear(),se=String(H.getMonth()+1).padStart(2,"0"),pe=String(H.getDate()).padStart(2,"0"),qe=`${ne}-${se}-${pe}`,Ne=b.find(X=>X.uid===D);Ne&&await jN(c,D,Ne.name,qe,ie)}}catch(ae){console.error("Error saving roster:",ae)}finally{T(!1)}};return E?n.jsx(fa,{children:n.jsx(ma,{className:"flex items-center justify-center py-12",children:n.jsx(at,{className:"w-6 h-6 animate-spin text-zinc-500"})})}):n.jsx(Rn,{id:"roster-matrix",title:n.jsxs(_t,{className:"text-sm font-medium text-zinc-300 flex items-center gap-2",children:[n.jsx(Dn,{className:"w-4 h-4 text-indigo-400"}),r("roster.title"),M&&n.jsx(at,{className:"w-3 h-3 animate-spin text-zinc-500"})]}),headerActions:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ee,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:D=>{D.stopPropagation(),w(K=>K-1)},children:n.jsx(oi,{className:"w-4 h-4"})}),n.jsx("span",{className:"text-[10px] text-zinc-400 min-w-[70px] text-center font-mono",children:ls(L)}),n.jsx(ee,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:D=>{D.stopPropagation(),w(K=>K+1)},children:n.jsx(Ps,{className:"w-4 h-4"})})]}),children:n.jsxs("div",{className:"overflow-x-auto pt-2",children:[b.length===0?n.jsx("p",{className:"text-zinc-500 text-sm text-center py-8",children:r("roster.noStaff")}):n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-zinc-800",children:[d&&n.jsx("th",{className:"w-8"}),n.jsx("th",{className:"text-left py-2 px-1 text-zinc-400 font-medium text-[10px] uppercase tracking-wider",children:r("common.staff")}),q.map(({day:D,dateStr:K})=>{const Q=`day.${D.toLowerCase()}`;return n.jsxs("th",{className:"text-center py-2 px-0.5 text-zinc-400 font-medium w-10",children:[n.jsx("div",{className:"text-[9px] opacity-50 mb-0.5 font-mono",children:K}),n.jsx("div",{className:"text-[10px]",children:r(Q)})]},D)})]})}),n.jsx(Kb,{as:"tbody",axis:"y",values:F,onReorder:le,children:F.map(D=>n.jsxs(Xb,{value:D,as:"tr",className:"border-b border-zinc-800/50 bg-zinc-950/50",children:[d&&n.jsx("td",{className:"py-2 px-1 text-zinc-600 cursor-grab active:cursor-grabbing",children:n.jsx(Qb,{className:"w-4 h-4 opacity-50 hover:opacity-100 transition-opacity"})}),n.jsxs("td",{className:"py-2 px-1 text-zinc-300 whitespace-nowrap text-xs flex items-center gap-2",children:[n.jsx("span",{className:G(D.is_hidden_in_roster&&"opacity-50 line-through decoration-zinc-500"),children:D.name}),(m==null?void 0:m.role)==="gm"&&n.jsx("button",{onClick:K=>{K.stopPropagation(),c&&h(c,D.uid,!D.is_hidden_in_roster).then(()=>{p(Q=>Q.map(P=>P.uid===D.uid?{...P,is_hidden_in_roster:!D.is_hidden_in_roster}:P))})},className:"p-1 hover:bg-zinc-800 rounded text-zinc-500 hover:text-zinc-300 transition-colors",title:D.is_hidden_in_roster?r("roster.show"):r("roster.hide"),children:D.is_hidden_in_roster?n.jsx(er,{className:"w-3 h-3"}):n.jsx(Pc,{className:"w-3 h-3"})})]}),Mc.map(K=>{var P;const Q=(P=g[D.uid])==null?void 0:P[K];return n.jsx("td",{className:"py-2 px-0.5 text-center",children:n.jsx(me.button,{onClick:()=>Y(D.uid,K),disabled:!d,className:G("w-9 h-7 rounded text-[10px] font-bold transition-all",Q?Lh[Q]:"bg-zinc-800/50 text-zinc-600",d&&"hover:opacity-80 cursor-pointer",!d&&"cursor-default"),whileTap:d?{scale:.9}:void 0,children:Q||""})},K)})]},D.uid))})]}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t border-zinc-800",children:Oc.map(D=>n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:G("w-4 h-4 rounded text-[10px] flex items-center justify-center font-bold",Lh[D]),children:D}),n.jsxs("span",{className:"text-xs text-zinc-500",children:[D==="A"&&r("shift.morning"),D==="B"&&r("shift.afternoon"),D==="C"&&r("shift.night"),D==="E"&&r("shift.extra"),D==="OFF"&&r("shift.off")]})]},D))})]})})}const qh=c=>c?c instanceof Dt?c.toDate():c:new Date,Yh=Ct(c=>({events:[],loading:!0,error:null,subscribeToEvents:(d,r,o)=>{c({loading:!0,error:null});const u=Le(te,"hotels",d,"calendar_events"),m=yt(u,Na("date",">=",Dt.fromDate(r)),Na("date","<=",Dt.fromDate(o)),ka("date","asc"));return $t(m,b=>{const p=b.docs.map(g=>{const v=g.data();return{id:g.id,type:v.type,title:v.title,description:v.description||null,date:qh(v.date),time:v.time||null,room_number:v.room_number||null,total_price:v.total_price??v.price??null,collected_amount:v.collected_amount??0,currency:v.currency,created_by:v.created_by,created_by_name:v.created_by_name||"Unknown",created_at:qh(v.created_at),is_completed:v.is_completed||!1}});c({events:p,loading:!1,error:null})},b=>{console.error("Error subscribing to calendar:",b),c({error:b.message,loading:!1})})},addEvent:async(d,r)=>{try{const o=Le(te,"hotels",d,"calendar_events");await Ft(o,{...r,date:Dt.fromDate(r.date),created_at:Je(),is_completed:!1})}catch(o){throw console.error("Error adding event:",o),o}},updateEvent:async(d,r,o)=>{try{const u=he(te,"hotels",d,"calendar_events",r),m={...o};o.date&&(m.date=Dt.fromDate(o.date)),o.total_price!==void 0&&(m.total_price=o.total_price),o.collected_amount!==void 0&&(m.collected_amount=o.collected_amount),await De(u,m)}catch(u){throw console.error("Error updating event:",u),u}},deleteEvent:async(d,r)=>{try{const o=he(te,"hotels",d,"calendar_events",r);await Ta(o)}catch(o){throw console.error("Error deleting event:",o),o}},toggleComplete:async(d,r,o)=>{try{const u=he(te,"hotels",d,"calendar_events",r);await De(u,{is_completed:o})}catch(u){throw console.error("Error toggling complete:",u),u}}})),ts={checkout:{label:"Checkout",color:"bg-amber-500",icon:""},arrival:{label:"Arrival",color:"bg-emerald-500",icon:""},meeting:{label:"Meeting",color:"bg-indigo-500",icon:""},inspection:{label:"Inspection",color:"bg-rose-500",icon:""},delivery:{label:"Delivery",color:"bg-purple-500",icon:""},maintenance:{label:"Maintenance",color:"bg-orange-500",icon:""},reminder:{label:"Reminder",color:"bg-zinc-500",icon:""},tour:{label:"Tour",color:"bg-fuchsia-500",icon:""},transfer:{label:"Transfer",color:"bg-sky-500",icon:""},off_day:{label:"Off Day",color:"bg-indigo-500",icon:""}};function _N({hotelId:c}){const{events:d,subscribeToEvents:r,addEvent:o,toggleComplete:u,deleteEvent:m}=Yh(),{subscribeToRoster:h,getShiftsForDate:b}=rs(),{user:p}=Ge(),{t:g}=Xe(),[v,N]=j.useState(new Date),[w,E]=j.useState(null),[_,M]=j.useState(!1),[T,R]=j.useState("reminder"),[L,q]=j.useState(""),[F,le]=j.useState(""),[Y,I]=j.useState(""),[D,K]=j.useState(""),[Q,P]=j.useState("0"),[ie,$]=j.useState(null),[ae,de]=j.useState("");j.useEffect(()=>{if(!c)return;const X=Vd(ch(v),{weekStartsOn:1}),ue=rh(oh(v),{weekStartsOn:1}),we=r(c,X,ue),W=h(c);return()=>{we(),W()}},[c,v,r,h]);const y=X=>d.filter(ue=>Zc(ue.date,X)),H=j.useMemo(()=>{const X=ch(v),ue=oh(v),we=Vd(X,{weekStartsOn:1}),W=rh(ue,{weekStartsOn:1}),ye=[];let $e=we;for(;$e<=W;)ye.push($e),$e=li($e,1);return ye},[v]),ne=w?y(w):[],se=async()=>{!L.trim()||!w||!p||(await o(c,{type:T,title:L.trim(),description:null,date:w,time:F||null,room_number:Y||null,total_price:D?parseFloat(D):null,collected_amount:Q?parseFloat(Q):null,created_by:p.uid,created_by_name:p.name||"Unknown"}),q(""),le(""),I(""),K(""),P("0"),M(!1))},pe=async X=>{if(!ae||isNaN(parseFloat(ae)))return;const ue=parseFloat(ae);await Yh.getState().updateEvent(c,X,{collected_amount:ue}),$(null)},qe=async(X,ue)=>{await u(c,X,!ue)},Ne=async X=>{confirm(g("common.deleteConfirm"))&&await m(c,X)};return n.jsx(Rn,{id:"calendar-widget",title:n.jsx(_t,{className:"text-sm font-medium text-zinc-300 flex items-center gap-2",children:g("module.calendar")}),headerActions:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ee,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:X=>{X.stopPropagation(),N(_y(v))},children:n.jsx(oi,{className:"w-4 h-4"})}),n.jsx("span",{className:"text-[10px] text-zinc-400 min-w-[70px] text-center font-mono",children:bt(v,"MMM yyyy",{locale:ii()})}),n.jsx(ee,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:X=>{X.stopPropagation(),N(Cy(v,1))},children:n.jsx(Ps,{className:"w-4 h-4"})})]}),className:"glass border-zinc-800/50",children:n.jsxs("div",{className:"space-y-3 pt-2",children:[n.jsx("div",{className:"grid grid-cols-7 gap-1",children:[g("day.short.mon"),g("day.short.tue"),g("day.short.wed"),g("day.short.thu"),g("day.short.fri"),g("day.short.sat"),g("day.short.sun")].map((X,ue)=>n.jsx("div",{className:"text-center text-[10px] text-zinc-500 font-medium",children:X},ue))}),n.jsx("div",{className:"grid grid-cols-7 gap-1",children:H.map((X,ue)=>{const we=y(X),W=w&&Zc(X,w),ye=wy(X,v),$e=Sy(X);return n.jsxs("button",{onClick:()=>E(X),className:G("aspect-square rounded-md flex flex-col items-center justify-center text-xs transition-all relative",W?"bg-indigo-500 text-white":$e?"bg-indigo-500/20 text-indigo-300 border border-indigo-500/50":ye?"bg-zinc-800/50 text-zinc-300 hover:bg-zinc-700/50":"bg-transparent text-zinc-600 hover:bg-zinc-800/30"),children:[n.jsx("span",{children:bt(X,"d")}),we.length>0&&n.jsxs("div",{className:"flex gap-0.5 mt-0.5 absolute bottom-1",children:[we.slice(0,3).map((Rt,It)=>{var Aa;return n.jsx("span",{className:G("w-1 h-1 rounded-full",((Aa=ts[Rt.type])==null?void 0:Aa.color)||"bg-zinc-500")},It)}),we.length>3&&n.jsx("span",{className:"text-[8px] text-zinc-400",children:"+"})]})]},ue)})}),n.jsx(dt,{children:w&&n.jsx(me.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:n.jsxs("div",{className:"pt-3 border-t border-zinc-800 space-y-3",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("h4",{className:"text-[10px] uppercase font-bold text-zinc-500",children:g("module.roster")}),n.jsx("div",{className:"flex flex-wrap gap-2",children:b(w).length>0?b(w).map(X=>n.jsxs(lt,{variant:"outline",className:"text-[10px] px-1.5 py-0 bg-zinc-800/50 border-zinc-700 text-zinc-300",children:[X.name," ",n.jsx("span",{className:"text-indigo-400 ml-1 font-bold",children:X.shift})]},X.uid)):n.jsx("span",{className:"text-[10px] text-zinc-600 italic",children:g("calendar.noShifts")})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-xs text-zinc-400",children:[bt(w,"EEEE",{locale:ii()}),", ",ls(w)]}),n.jsxs(ee,{size:"sm",variant:"ghost",className:"h-6 text-xs hover:bg-indigo-500/10 hover:text-indigo-400",onClick:()=>M(!_),children:[n.jsx(cs,{className:"w-3 h-3 mr-1"}),g("calendar.addEvent")]})]}),n.jsx(dt,{children:_&&n.jsxs(me.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"space-y-2 p-2 bg-zinc-900/50 rounded-lg border border-zinc-700",children:[n.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(ts).map(X=>n.jsxs("button",{onClick:()=>R(X),className:G("text-[10px] px-2 py-0.5 rounded-full",T===X?`${ts[X].color} text-white`:"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:[ts[X].icon," ",ts[X].label]},X))}),n.jsx(re,{placeholder:g("calendar.eventTitle"),value:L,onChange:X=>q(X.target.value),className:"h-8 text-xs bg-zinc-950 border-zinc-700"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:g("calendar.time")}),n.jsx(re,{value:F,onChange:X=>le(X.target.value),className:"h-8 text-xs bg-zinc-950 border-zinc-700",type:"time"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:g("calendar.roomNumber")}),n.jsx(re,{placeholder:g("log.roomPlaceholder"),value:Y,onChange:X=>I(X.target.value),className:"h-8 text-xs bg-zinc-950 border-zinc-700"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:g("calendar.totalPrice")}),n.jsx(re,{type:"number",placeholder:"0",value:D,onChange:X=>K(X.target.value),className:"h-8 text-xs bg-zinc-950 border-zinc-700"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase ml-1",children:g("calendar.collectedAmount")}),n.jsx(re,{type:"number",placeholder:"0",value:Q,onChange:X=>P(X.target.value),className:"h-8 text-xs bg-zinc-950 border-zinc-700"})]})]}),n.jsxs("div",{className:"flex gap-2 pt-1",children:[n.jsxs(ee,{size:"sm",className:"flex-1 h-8 text-xs bg-indigo-600 hover:bg-indigo-500",onClick:se,disabled:!L.trim(),children:[n.jsx(kt,{className:"w-3 h-3 mr-1"}),g("log.save")]}),n.jsx(ee,{size:"sm",variant:"ghost",className:"h-7 text-xs",onClick:()=>M(!1),children:n.jsx(St,{className:"w-3 h-3"})})]})]})}),ne.length===0&&!_?n.jsx("p",{className:"text-xs text-zinc-500 text-center py-2",children:g("calendar.noEvents")}):n.jsx("div",{className:"space-y-1.5 max-h-32 overflow-y-auto scrollbar-thin",children:ne.map(X=>{var ue,we;return n.jsxs("div",{className:G("group relative flex items-start gap-3 p-3 rounded-xl border transition-all","glass hover:bg-white/5",X.is_completed?"opacity-60 grayscale-[0.5]":"border-zinc-700/50"),children:[n.jsx("button",{onClick:()=>qe(X.id,X.is_completed),className:G("mt-0.5 w-5 h-5 rounded-full border-2 flex items-center justify-center flex-shrink-0 transition-colors",X.is_completed?"bg-emerald-500 border-emerald-500":"border-zinc-600 group-hover:border-zinc-400"),children:X.is_completed&&n.jsx(kt,{className:"w-3 h-3 text-white"})}),n.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(lt,{variant:"secondary",className:G("text-[10px] px-1.5 py-0 h-5",(ue=ts[X.type])==null?void 0:ue.color),children:(we=ts[X.type])==null?void 0:we.icon}),n.jsx("span",{className:G("text-sm font-medium text-zinc-200 truncate",X.is_completed&&"line-through text-zinc-500"),children:X.title})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 text-[11px] text-zinc-400",children:[(X.time||X.room_number)&&n.jsxs("div",{className:"flex items-center gap-1.5",children:[X.time&&n.jsx("span",{className:"text-zinc-300 bg-zinc-800/50 px-1.5 rounded",children:X.time}),X.room_number&&n.jsxs("span",{className:"font-mono text-zinc-500",children:["#",X.room_number]})]}),X.created_by_name&&n.jsxs("span",{className:"text-indigo-400/80",children:["by ",X.created_by_name]})]}),X.total_price!==null&&n.jsxs("div",{className:"pt-2 flex items-center gap-2 border-t border-zinc-800/50 mt-2",children:[n.jsxs("div",{className:"text-[11px] font-medium text-zinc-400",children:[g("calendar.payment"),":",n.jsxs("span",{className:G("ml-1.5",(X.collected_amount||0)>=(X.total_price||0)?"text-emerald-400":"text-amber-400"),children:[X.collected_amount||0," / ",X.total_price," "]})]}),ie===X.id?n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(re,{className:"h-5 w-14 text-[9px] px-1 bg-zinc-950 border-zinc-700",value:ae,onChange:W=>de(W.target.value),autoFocus:!0}),n.jsx("button",{onClick:()=>pe(X.id),className:"text-emerald-500 hover:text-emerald-400",children:n.jsx(kt,{className:"w-3 h-3"})}),n.jsx("button",{onClick:()=>$(null),className:"text-zinc-500",children:n.jsx(St,{className:"w-3 h-3"})})]}):n.jsx("button",{onClick:()=>{$(X.id),de((X.collected_amount||0).toString())},className:"text-[9px] text-indigo-400 hover:text-indigo-300 underline underline-offset-2",children:g("common.update")}),X.total_price-(X.collected_amount||0)>0&&n.jsxs(lt,{variant:"outline",className:"text-[8px] h-3 px-1 border-rose-500/30 text-rose-400 lowercase leading-none",children:[g("calendar.remaining"),": ",X.total_price-(X.collected_amount||0)," "]})]})]}),n.jsx("button",{onClick:()=>Ne(X.id),className:"text-zinc-500 hover:text-rose-400 p-1",children:n.jsx(St,{className:"w-3 h-3"})})]},X.id)})})]})]})})})]})})}function CN({defaultValue:c,onSave:d,onCancel:r,loading:o}){const{t:u}=Xe(),[m,h]=j.useState(c);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] uppercase tracking-wider font-semibold text-zinc-500 flex items-center gap-1.5",children:u("menu.content")}),n.jsx("textarea",{value:m,onChange:b=>h(b.target.value),className:"w-full rounded-lg border border-zinc-700 bg-zinc-950 px-3 py-2 text-sm resize-none focus:outline-none focus:ring-1 focus:ring-indigo-500 min-h-[120px] transition-all",placeholder:"..."})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsxs(ee,{onClick:()=>d(m),disabled:o,size:"sm",className:"bg-indigo-600 hover:bg-indigo-500 text-white",children:[o?n.jsx(at,{className:"w-4 h-4 animate-spin"}):n.jsx(Pd,{className:"w-4 h-4 mr-2"}),u("common.save")]}),n.jsxs(ee,{variant:"ghost",onClick:r,disabled:o,size:"sm",className:"text-zinc-400 hover:text-white",children:[n.jsx(St,{className:"w-4 h-4 mr-2"}),u("common.cancel")]})]})]})}const Zx=Ct(c=>({todayMenu:null,loading:!0,error:null,subscribeToTodayMenu:d=>{c({loading:!0,error:null});const r=new Date().toLocaleDateString("sv-SE"),o=he(te,"hotels",d,"daily_menu",r);return $t(o,m=>{var h;if(m.exists()){const b=m.data();c({todayMenu:{id:m.id,hotel_id:d,date:r,menu:b.menu||"",updated_at:((h=b.updated_at)==null?void 0:h.toDate())||new Date,updated_by:b.updated_by||"",updated_by_name:b.updated_by_name||""},loading:!1,error:null})}else c({todayMenu:null,loading:!1})},m=>{console.error("Error subscribing to today menu:",m),c({error:m.message,loading:!1})})},updateMenu:async(d,r,o,u)=>{try{const m=new Date().toLocaleDateString("sv-SE"),h=he(te,"hotels",d,"daily_menu",m);await Pa(h,{menu:r,updated_at:Je(),updated_by:o,updated_by_name:u},{merge:!0})}catch(m){throw console.error("Error updating menu:",m),m}}}));function EN({hotelId:c,canEdit:d}){const{t:r,language:o}=Xe(),{user:u}=Ge(),{todayMenu:m,updateMenu:h,loading:b}=Zx(),[p,g]=j.useState(!1),[v,N]=j.useState(!1),w=()=>{g(!0)},E=async M=>{if(!(!c||!u)){N(!0);try{await h(c,M,u.uid,u.name),g(!1)}catch(T){console.error("Error saving menu:",T)}finally{N(!1)}}},_=()=>{g(!1)};return b&&!m?n.jsxs("div",{className:"glass glass-hover rounded-2xl border border-zinc-800/50 flex flex-col",children:[n.jsx("div",{className:"p-6 pb-3",children:n.jsxs(_t,{className:"text-sm font-medium text-zinc-300 flex items-center gap-2",children:[n.jsx(Ac,{className:"w-4 h-4 text-indigo-400"}),r("menu.title")]})}),n.jsx("div",{className:"p-6 pt-0 flex items-center justify-center py-12",children:n.jsx(at,{className:"w-6 h-6 animate-spin text-indigo-500/50"})})]}):n.jsx(Rn,{id:"staff-meal",title:n.jsxs(_t,{className:"text-sm font-medium text-zinc-300 flex items-center gap-2",children:[n.jsx(Ac,{className:"w-4 h-4 text-indigo-400"}),r("menu.title")]}),headerActions:d&&!p&&n.jsx(ee,{size:"sm",variant:"ghost",onClick:M=>{M.stopPropagation(),w()},className:"hover:bg-indigo-500/10 hover:text-indigo-400 h-8 w-8 p-0",children:n.jsx(wx,{className:"w-4 h-4"})}),className:"bg-zinc-900 border-zinc-800",children:n.jsxs("div",{className:"pt-2",children:[n.jsx(dt,{mode:"wait",children:p?n.jsx(me.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:n.jsx(CN,{defaultValue:(m==null?void 0:m.menu)||"",onSave:E,onCancel:_,loading:v})},"edit"):n.jsx(me.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"space-y-5",children:m&&m.menu.trim()!==""?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-3 bg-zinc-800/30 rounded-xl border border-zinc-800/50 group",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3 px-1",children:[n.jsx("span",{className:"text-[10px] uppercase tracking-widest font-bold text-zinc-500",children:r("menu.content")}),n.jsx("div",{className:"h-[1px] flex-1 bg-zinc-800/50"})]}),n.jsxs("ul",{className:"space-y-1.5 list-none",children:[m.menu.split(`
`).filter(M=>M.trim()!=="").map((M,T)=>n.jsxs("li",{className:"text-sm text-zinc-200 leading-relaxed flex items-start gap-2 group/item",children:[n.jsx("span",{className:"mt-1.5 w-1.5 h-1.5 rounded-full bg-indigo-500/40 group-hover/item:bg-indigo-400 transition-colors shrink-0"}),M.trim()]},T)),(!m.menu||m.menu.trim()==="")&&n.jsx("li",{className:"text-sm text-zinc-500 italic",children:r("common.none")})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-1 px-1",children:[n.jsx("span",{className:"text-[9px] text-zinc-600 uppercase tracking-tighter",children:o==="tr"?`${m.updated_by_name||r("common.staff")} ${r("common.by")}`:`${r("common.by")} ${m.updated_by_name||r("common.staff")}`}),n.jsx("span",{className:"text-[9px] text-zinc-600 uppercase tracking-tighter",children:Xd(m.updated_at)})]})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-6 px-4 text-center space-y-3 opacity-60",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-zinc-800 flex items-center justify-center",children:n.jsx(Ac,{className:"w-5 h-5 text-zinc-600"})}),n.jsx("p",{className:"text-xs text-zinc-500 font-medium max-w-[180px]",children:r("menu.noMenuToday")}),d&&n.jsx(ee,{variant:"outline",size:"sm",onClick:M=>{M.stopPropagation(),w()},className:"border-zinc-800 text-zinc-400 hover:text-white h-7",children:r("menu.edit")})]})},"view")}),n.jsxs("div",{className:"pt-2 border-t border-zinc-800/50",children:[n.jsx("div",{className:"flex items-center gap-2 mb-2 px-1",children:n.jsx("span",{className:"text-[10px] uppercase tracking-widest font-bold text-zinc-500",children:r("menu.hours")})}),n.jsxs("div",{className:"grid grid-cols-1 gap-1.5",children:[n.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-zinc-400 bg-zinc-800/20 py-1.5 px-2 rounded-lg border border-zinc-800/30",children:[n.jsx(Zb,{className:"w-3 h-3 text-amber-500/70"}),r("menu.breakfastTime")]}),n.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-zinc-400 bg-zinc-800/20 py-1.5 px-2 rounded-lg border border-zinc-800/30",children:[n.jsx(Ac,{className:"w-3 h-3 text-emerald-500/70"}),r("menu.lunchTime")]}),n.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-zinc-400 bg-zinc-800/20 py-1.5 px-2 rounded-lg border border-zinc-800/30",children:[n.jsx(Jb,{className:"w-3 h-3 text-indigo-500/70"}),r("menu.dinnerTime")]})]})]})]})})}const Vh={A:{start:"08:00",end:"16:00"},B:{start:"16:00",end:"00:00"},C:{start:"00:00",end:"08:00"},E:{start:"10:00",end:"18:00"}};function TN(c){const{getShiftsForDate:d,subscribeToRoster:r}=rs(),{currentShift:o,startShift:u,endShift:m,getLastClosedShift:h}=al(),b=j.useRef(null),p=j.useRef(0);j.useEffect(()=>{if(c){const g=r(c);return()=>g()}},[c,r]),j.useEffect(()=>{if(!c)return;const g=async()=>{const N=new Date,w=bt(N,"HH:mm"),E=bt(N,"yyyy-MM-dd");if(b.current!==w){if(b.current=w,o){const _=Vh[o.type];if(_){const[M,T]=_.end.split(":").map(Number),R=Cd(o.date,"yyyy-MM-dd",new Date),L=new Date(R);if(L.setHours(M,T,0,0),(_.end==="00:00"||_.end<_.start)&&L.setDate(L.getDate()+1),N>=L){console.log(`[Automator] Shift ${o.type} (${o.date}) ended at ${_.end}. Auto-closing...`),await m(c,o.cash_start,"Automatically closed by system roster.");return}}}if(!o){const _=d(N),T=[...d(li(N,-1)),..._];for(const R of T){const L=Vh[R.shift];if(!L)continue;const q=Cd(L.start,"HH:mm",N);let F=Cd(L.end,"HH:mm",N);if((L.end==="00:00"||L.end<L.start)&&(F=li(F,1)),Ey(N,{start:q,end:F})){console.log(`[Automator] Time for Shift ${R.shift} (${L.start}-${L.end}). Auto-starting...`);const le=_.filter(D=>D.shift===R.shift).map(D=>D.uid);if(le.length===0)continue;const Y=await h(c),I=(Y==null?void 0:Y.cash_end)||0;await u(c,le,R.shift,I,E);break}}}if(o&&(!o.compliance.kbs_checked||o.compliance.agency_msg_checked_count===0)){const M=N.getTime();if(M-p.current>72e5){const{addNotification:T}=di.getState();await T(c,{type:"compliance",title:"Compliance Checklist Pending",content:`Shift ${o.type} compliance tasks (KBS/Agency) are still pending. Please complete them.`,target_role:"receptionist",link:"/"}),p.current=M}}}},v=setInterval(g,3e4);return g(),()=>clearInterval(v)},[c,o,d,u,m,h,r])}const ba={tour:{label:"Tour",icon:"",color:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30"},transfer:{label:"Transfer",icon:"",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},laundry:{label:"Laundry",icon:"",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},other:{label:"Other",icon:"",color:"bg-zinc-500/20 text-zinc-400 border-zinc-500/30"}},Is={waiting:{label:"Waiting",color:"bg-zinc-500/20 text-zinc-400"},confirmed:{label:"Confirmed",color:"bg-blue-500/20 text-blue-400"},pickup_pending:{label:"Pickup Pending",color:"bg-amber-500/20 text-amber-400"},realized:{label:"Realized",color:"bg-emerald-500/20 text-emerald-400"},delivered:{label:"Delivered",color:"bg-purple-500/20 text-purple-400"},cancelled:{label:"Cancelled",color:"bg-rose-500/20 text-rose-400"}},Ic={pending:{label:"Pending",color:"bg-rose-500/20 text-rose-400 border-rose-500/30"},partial:{label:"Partial",color:"bg-amber-500/20 text-amber-400 border-amber-500/30"},paid:{label:"Paid",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"}},Rd=c=>c instanceof Dt?c.toDate():c instanceof Date?c:new Date,fi=Ct((c,d)=>({sales:[],loading:!1,error:null,subscribeToSales:r=>{c({loading:!0,error:null});const o=Le(te,"hotels",r,"sales"),u=yt(o,ka("date","desc"));return $t(u,h=>{const b=h.docs.map(p=>{var v;const g=p.data();return{id:p.id,hotel_id:r,type:g.type,name:g.name,customer_name:g.customer_name,room_number:g.room_number,pax:g.pax||1,date:Rd(g.date),pickup_time:g.pickup_time,ticket_number:g.ticket_number,total_price:g.total_price||0,collected_amount:g.collected_amount||0,currency:g.currency||"EUR",payment_status:g.payment_status,notes:g.notes,created_by:g.created_by,created_by_name:g.created_by_name||"Unknown",created_at:Rd(g.created_at),calendar_event_id:g.calendar_event_id,payments:((v=g.payments)==null?void 0:v.map(N=>({amount:N.amount,currency:N.currency,timestamp:Rd(N.timestamp),method:N.method})))||[]}});c({sales:b,loading:!1})},h=>{console.error("Sales subscription error:",h),c({error:h.message,loading:!1})})},addSale:async(r,o)=>{const u=Le(te,"hotels",r,"sales"),m={...o,collected_amount:0,payment_status:"pending",date:Dt.fromDate(o.date),created_at:Je()},h=await Ft(u,m),b=h.id;if(o.type==="tour"||o.type==="transfer")try{const p=Le(te,"hotels",r,"calendar_events"),g={type:o.type,title:`${ba[o.type].icon} ${o.name} - ${o.room_number}`,description:`Guest: ${o.customer_name}
Pax: ${o.pax}
Price: ${o.total_price} ${o.currency}`,date:Dt.fromDate(o.date),time:o.pickup_time||null,room_number:o.room_number,total_price:o.total_price,collected_amount:0,currency:o.currency,created_by:o.created_by,created_by_name:o.created_by_name,sale_id:b,created_at:Je()},v=await Ft(p,g);await De(h,{calendar_event_id:v.id})}catch(p){console.error("Failed to auto-create calendar event:",p)}return b},updateSale:async(r,o,u)=>{const m=he(te,"hotels",r,"sales",o),h={...u};if(u.date&&(h.date=Dt.fromDate(u.date)),u.total_price!==void 0){const p=d().sales.find(g=>g.id===o);if(p){const g=p.collected_amount,v=u.total_price;h.payment_status=g>=v?"paid":g>0?"partial":"pending"}}h.updated_at=Je(),await De(m,h);const b=d().sales.find(p=>p.id===o);if(b!=null&&b.calendar_event_id){const p={};if(u.date&&(p.date=Dt.fromDate(u.date)),u.pickup_time&&(p.time=u.pickup_time),u.total_price!==void 0&&(p.total_price=u.total_price),u.name&&(p.title=`${ba[b.type].icon} ${u.name} - Room ${b.room_number}`),u.room_number&&(p.room_number=u.room_number),u.notes&&(p.description=`Guest: ${b.customer_name}
Pax: ${b.pax}
Price: ${b.total_price} ${b.currency}
Notes: ${u.notes}`),Object.keys(p).length>0)try{const g=he(te,"hotels",r,"calendar_events",b.calendar_event_id);await De(g,p)}catch(g){console.error("Failed to sync calendar event:",g)}}},deleteSale:async(r,o)=>{const u=d().sales.find(h=>h.id===o),m=he(te,"hotels",r,"sales",o);if(await Ta(m),u!=null&&u.calendar_event_id)try{const h=he(te,"hotels",r,"calendar_events",u.calendar_event_id);await Ta(h)}catch(h){console.error("Failed to delete calendar event:",h)}},collectPayment:async(r,o,u,m,h)=>{const b=d().sales.find(T=>T.id===o);if(!b)return;const p=m||b.currency,g=h!==void 0?h:p===b.currency?u:0,v=b.collected_amount+g,N={amount:u,currency:p,timestamp:new Date},w=[...b.payments||[],N],E=v>=b.total_price?"paid":v>0?"partial":"pending",_=w.map(T=>{const R={amount:T.amount,currency:T.currency,timestamp:Dt.fromDate(T.timestamp)};return T.method&&(R.method=T.method),T.recorded_by&&(R.recorded_by=T.recorded_by),R}),M=he(te,"hotels",r,"sales",o);if(await De(M,{collected_amount:v,payment_status:E,payments:_}),b.calendar_event_id)try{const T=he(te,"hotels",r,"calendar_events",b.calendar_event_id);await De(T,{collected_amount:v,updated_at:Je()})}catch(T){console.error("Error updating calendar event for sale:",T)}},getDueSales:()=>d().sales.filter(r=>r.payment_status!=="paid"),getSalesByType:r=>d().sales.filter(o=>o.type===r)}));function kN(){const{sales:c,getDueSales:d}=fi(),{addNotification:r}=di(),{hotel:o}=ut(),{user:u}=Ge();j.useEffect(()=>{if(!(o!=null&&o.id)||!u||u.role!=="gm")return;const m=async()=>{const b=Date.now(),p=`last_payment_check_${o.id}`,g=parseInt(localStorage.getItem(p)||"0"),v=14400*1e3;if(b-g<v)return;const N=d();if(N.length===0)return;const w=N.reduce((E,_)=>E+(_.total_price-_.collected_amount),0);await r(o.id,{type:"compliance",title:"Bekleyen demeler",content:`${N.length} satta toplam ${w} tahsil edilmedi.`}),localStorage.setItem(p,b.toString())};m();const h=setInterval(m,3600*1e3);return()=>clearInterval(h)},[o==null?void 0:o.id,u,c,d,r])}const Jx=Ct(c=>({messages:[],loading:!0,error:null,subscribeToMessages:(d,r)=>{c({loading:!0,error:null});const o=Le(te,"hotels",d,"messages"),u=yt(o,ka("timestamp","desc"),ss(100));return $t(u,h=>{const p=h.docs.map(g=>{var N;const v=g.data();return{id:g.id,sender_id:v.sender_id,sender_name:v.sender_name,receiver_id:v.receiver_id,content:v.content,timestamp:((N=v.timestamp)==null?void 0:N.toDate())||new Date,is_read:v.is_read||!1}}).filter(g=>g.sender_id===r||g.receiver_id===r||g.receiver_id==="gm"||g.receiver_id==="all");c({messages:p.reverse(),loading:!1})},h=>{console.error("Message subscription error:",h),c({error:h.message,loading:!1})})},sendMessage:async(d,r)=>{try{const o=Le(te,"hotels",d,"messages");await Ft(o,{...r,timestamp:Je(),is_read:!1})}catch(o){throw console.error("Error sending message:",o),o}},markAsRead:async(d,r)=>{try{const o=he(te,"hotels",d,"messages",r);await De(o,{is_read:!0})}catch(o){console.error("Error marking message as read:",o)}},deleteMessage:async(d,r)=>{try{const o=he(te,"hotels",d,"messages",r);await Ta(o)}catch(o){console.error("Error deleting message:",o)}},clearChat:async(d,r,o)=>{try{const u=Le(te,"hotels",d,"messages"),m=yt(u,ka("timestamp","desc"),ss(500)),h=await oa(()=>import("./vendor-firebase-DntPIKkY.js").then(v=>v.y),[]).then(v=>v.getDocs(m)),p=await oa(()=>import("./vendor-firebase-DntPIKkY.js").then(v=>v.y),[]).then(v=>v.writeBatch(te));let g=0;h.docs.forEach(v=>{const N=v.data();(N.sender_id===r&&N.receiver_id===o||N.sender_id===o&&N.receiver_id===r)&&(p.delete(v.ref),g++)}),g>0&&await p.commit()}catch(u){throw console.error("Error clearing chat:",u),u}}}));function AN(){const{user:c,updateSettings:d}=Ge(),{hotel:r}=ut(),{messages:o,subscribeToMessages:u,deleteMessage:m}=Jx(),h=new Date,b=new Date(h.getTime()-1440*60*1e3),p=o.filter(N=>{var w;return N.receiver_id==="all"&&N.timestamp>b&&!(((w=c==null?void 0:c.settings)==null?void 0:w.dismissed_announcements)||[]).includes(N.id)}).slice(0,3),g=async N=>{var E;if(!c)return;const w=((E=c.settings)==null?void 0:E.dismissed_announcements)||[];await d({dismissed_announcements:[...w,N]})},v=async N=>{r!=null&&r.id&&window.confirm("Bu duyuruyu silmek istediinize emin misiniz?")&&await m(r.id,N)};return j.useEffect(()=>{if(r!=null&&r.id&&(c!=null&&c.uid)){const N=u(r.id,c.uid);return()=>N()}},[r==null?void 0:r.id,c==null?void 0:c.uid,u]),p.length===0?null:n.jsx("div",{className:"space-y-2 mb-4",children:n.jsx(dt,{children:p.map(N=>n.jsxs(me.div,{initial:{opacity:0,y:-20,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-20,height:0},className:"bg-gradient-to-r from-amber-600/20 via-amber-500/10 to-amber-600/20 border border-amber-500/30 rounded-xl p-4 flex items-start gap-3",children:[n.jsx(ar,{className:"w-5 h-5 text-amber-400 shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"text-xs font-bold text-amber-400 uppercase tracking-wider",children:"nemli Duyuru"}),n.jsx("span",{className:"text-[10px] text-amber-500/60",children:nr(N.timestamp,{addSuffix:!0})})]}),n.jsx("p",{className:"text-sm text-amber-100",children:N.content}),n.jsxs("p",{className:"text-[10px] text-amber-500/50 mt-1",children:[" ",N.sender_name]})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[(c==null?void 0:c.role)==="gm"&&n.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>v(N.id),className:"h-6 w-6 p-0 text-rose-500 hover:text-rose-300 hover:bg-rose-500/10",children:n.jsx(en,{className:"w-4 h-4"})}),n.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>g(N.id),className:"h-6 w-6 p-0 text-amber-500 hover:text-amber-300 hover:bg-amber-500/10",children:n.jsx(St,{className:"w-4 h-4"})})]})]},N.id))})})}function DN({isOpen:c,onClose:d}){const{t:r}=Xe(),[o,u]=j.useState(0),m=[{target:"tour-start",title:r("tour.intro.title"),content:r("tour.intro.desc"),position:"bottom"},{target:"tour-shift-start",title:r("tour.compliance.title"),content:r("tour.compliance.desc"),position:"right"},{target:"tour-logs",title:r("tour.feed.title"),content:r("tour.feed.desc"),position:"right"},{target:"tour-tours",title:r("tours.catalogue.title"),content:r("tours.catalogue.desc"),position:"bottom"},{target:"tour-sales",title:r("tour.sales.title"),content:r("tour.sales.desc"),position:"bottom"},{target:"tour-notifications",title:r("tour.notifications.title"),content:r("tour.notifications.desc"),position:"bottom"},{target:"tour-profile",title:r("tour.profile.title"),content:r("tour.profile.desc"),position:"left"}],[h,b]=j.useState(null);if(j.useEffect(()=>{if(!c)return;const N=()=>{const E=m[o];if(E.target==="tour-start"){b(null);return}const _=document.getElementById(E.target);_&&(b(_.getBoundingClientRect()),_.scrollIntoView({behavior:"smooth",block:"center"}))};N(),window.addEventListener("resize",N);const w=setInterval(N,500);return()=>{window.removeEventListener("resize",N),clearInterval(w)}},[c,o]),!c)return null;const p=m[o],g=()=>{o<m.length-1?u(N=>N+1):(d(),u(0))},v=()=>{o>0&&u(N=>N-1)};return n.jsxs("div",{className:"fixed inset-0 z-[100]",children:[n.jsx("div",{className:"absolute inset-0 bg-black/70 mix-blend-hard-light duration-300 transition-colors"}),h&&n.jsx(me.div,{layoutId:"spotlight",className:"absolute border-2 border-indigo-500 shadow-[0_0_30px_rgba(99,102,241,0.5)] rounded-lg pointer-events-none",initial:!1,animate:{top:h.top-4,left:h.left-4,width:h.width+8,height:h.height+8},transition:{type:"spring",damping:25,stiffness:200}}),n.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:n.jsx(dt,{mode:"wait",children:n.jsxs(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0,...h?{position:"absolute",top:p.position==="bottom"?h.bottom+20:void 0,left:p.position==="right"?h.right+20:p.position==="left"?h.left-320:void 0,right:(p.position==="left",void 0)}:{}},exit:{opacity:0,y:-10},className:RN("bg-zinc-900 border border-zinc-800 p-6 rounded-2xl shadow-2xl w-80 pointer-events-auto bg-opacity-95 backdrop-blur-xl",h?"":"relative"),style:h&&p.position!=="bottom"&&p.position!=="top"?{top:Math.max(20,h.top)}:{},children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("span",{className:"text-xs font-bold text-indigo-400 uppercase tracking-wider",children:["Step ",o+1,"/",m.length]}),n.jsx("button",{onClick:d,className:"text-zinc-500 hover:text-white",children:n.jsx(St,{className:"w-4 h-4"})})]}),n.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:p.title}),n.jsx("p",{className:"text-sm text-zinc-400 leading-relaxed mb-6",children:p.content}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(ee,{variant:"ghost",size:"sm",onClick:v,disabled:o===0,className:"text-zinc-500 hover:text-zinc-300",children:[n.jsx(oi,{className:"w-4 h-4 mr-1"}),"Prev"]}),n.jsxs(ee,{size:"sm",onClick:g,className:"bg-indigo-600 hover:bg-indigo-500 text-white",children:[o===m.length-1?"Finish":"Next",o!==m.length-1&&n.jsx(Ps,{className:"w-4 h-4 ml-1"})]})]})]},o)})})]})}function RN(...c){return c.filter(Boolean).join(" ")}const MN=Ct(c=>({rates:null,lastUpdated:null,loading:!1,error:null,fetchRates:async()=>{c({loading:!0,error:null});try{const d=await fetch("/api/currency"),r=d.headers.get("content-type");if(!d.ok||r&&r.includes("text/html")){console.warn("Currency API not available, using mock data"),c({rates:{USD:{buying:36.5,selling:36.6},EUR:{buying:39.2,selling:39.3},GBP:{buying:46.1,selling:46.2}},lastUpdated:new Date,loading:!1});return}const o=await d.json();c({rates:o,lastUpdated:new Date,loading:!1})}catch(d){console.error("Currency fetch error:",d),c({rates:{USD:{buying:36.5,selling:36.6},EUR:{buying:39.2,selling:39.3},GBP:{buying:46.1,selling:46.2}},lastUpdated:new Date,loading:!1})}}}));function ON(){const{rates:c,loading:d,error:r,fetchRates:o,lastUpdated:u}=MN();j.useEffect(()=>{(!c||u&&new Date().getTime()-u.getTime()>36e5)&&o()},[]);const m=[{code:"USD",icon:zx,color:"text-emerald-400",label:"USD"},{code:"EUR",icon:Sx,color:"text-blue-400",label:"EUR"},{code:"GBP",icon:Fb,color:"text-purple-400",label:"GBP"}],[h,b]=j.useState(""),[p,g]=j.useState("EUR"),[v,N]=j.useState("toTRY"),E=(()=>{if(!h||isNaN(parseFloat(h))||!c)return null;const _=c[p];if(!_)return null;const M=parseFloat(h);return v==="toTRY"?{buying:M*_.buying,selling:M*_.selling}:{buying:M/_.selling,selling:M/_.buying}})();return n.jsxs(Rn,{id:"currency-widget",title:n.jsxs(_t,{className:"text-sm font-medium text-zinc-300 flex items-center gap-2",children:[n.jsx(Ib,{className:"w-4 h-4 text-amber-400"}),"Exchange Rates (TCMB)"]}),headerActions:n.jsx(ee,{variant:"ghost",size:"icon",onClick:_=>{_.stopPropagation(),o()},disabled:d,className:"h-6 w-6 text-zinc-400 hover:text-white",children:n.jsx($b,{className:G("w-3.5 h-3.5",d&&"animate-spin")})}),className:"glass border-zinc-800/50",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"grid grid-cols-3 gap-2 py-1",children:m.map(_=>{const M=c==null?void 0:c[_.code],T=_.icon,R=p===_.code;return n.jsxs("div",{onClick:()=>g(_.code),className:G("rounded-lg p-2 border text-center relative overflow-hidden group cursor-pointer transition-all duration-200",R?"bg-zinc-800/80 border-indigo-500/50 shadow-[0_0_15px_-5px_rgba(99,102,241,0.3)]":"bg-zinc-900/40 border-zinc-800/50 hover:bg-zinc-800/60"),children:[n.jsx("div",{className:G("absolute inset-0 bg-gradient-to-br transition-opacity",R?"from-indigo-500/10 to-transparent opacity-100":"from-white/5 to-transparent opacity-0 group-hover:opacity-100")}),n.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[n.jsx(T,{className:G("w-3 h-3",_.color)}),n.jsx("span",{className:G("text-xs font-bold",_.color),children:_.label})]}),d&&!c?n.jsxs("div",{className:"space-y-1 animate-pulse",children:[n.jsx("div",{className:"h-3 w-12 bg-zinc-800 rounded mx-auto"}),n.jsx("div",{className:"h-2 w-8 bg-zinc-800 rounded mx-auto"})]}):M?n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-bold text-zinc-200 tracking-tight",children:M.selling.toFixed(4)}),n.jsxs("div",{className:"text-[10px] text-zinc-500",children:["Buy: ",M.buying.toFixed(4)]})]}):n.jsx("div",{className:"text-[10px] text-zinc-500 py-1",children:r?"Error":"No Data"})]},_.code)})}),c&&n.jsxs("div",{className:"bg-zinc-900/30 rounded-lg p-3 border border-zinc-800/50 space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex gap-1",children:m.map(_=>n.jsx("button",{onClick:()=>g(_.code),className:G("w-6 h-6 rounded flex items-center justify-center text-[10px] font-bold transition-colors border",p===_.code?"bg-indigo-600 text-white border-indigo-500":"bg-zinc-900 text-zinc-500 border-zinc-800 hover:text-zinc-300"),children:_.code.charAt(0)},_.code))}),n.jsxs("div",{className:"flex bg-zinc-900 rounded-md p-0.5 border border-zinc-800",children:[n.jsxs("button",{onClick:()=>N("toTRY"),className:G("px-2 py-0.5 text-[10px] rounded hover:bg-zinc-800 transition-colors",v==="toTRY"?"bg-zinc-800 text-white font-medium":"text-zinc-500"),children:[p,"  TRY"]}),n.jsxs("button",{onClick:()=>N("fromTRY"),className:G("px-2 py-0.5 text-[10px] rounded hover:bg-zinc-800 transition-colors",v==="fromTRY"?"bg-zinc-800 text-white font-medium":"text-zinc-500"),children:["TRY  ",p]})]})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs("div",{className:"relative flex-1",children:[n.jsx("input",{type:"number",value:h,onChange:_=>b(_.target.value),placeholder:"Amount",className:"w-full bg-black/40 border border-zinc-800 rounded-md py-1.5 pl-2 pr-12 text-sm text-white placeholder:text-zinc-600 focus:outline-none focus:ring-1 focus:ring-indigo-500/50"}),n.jsx("span",{className:"absolute right-2 top-1.5 text-xs font-medium text-zinc-500",children:v==="toTRY"?p:"TRY"})]})}),E&&n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[n.jsxs("div",{className:"bg-black/20 rounded p-1.5 border border-zinc-800/30",children:[n.jsx("div",{className:"text-[9px] text-zinc-500 mb-0.5",children:"Bank Buys (Bozma)"}),n.jsxs("div",{className:"text-xs font-mono font-medium text-emerald-400",children:[E.buying.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})," ",v==="toTRY"?"":p]})]}),n.jsxs("div",{className:"bg-black/20 rounded p-1.5 border border-zinc-800/30",children:[n.jsx("div",{className:"text-[9px] text-zinc-500 mb-0.5",children:"Bank Sells (Sat)"}),n.jsxs("div",{className:"text-xs font-mono font-medium text-rose-400",children:[E.selling.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2})," ",v==="toTRY"?"":p]})]})]})]})]}),u&&n.jsxs("div",{className:"text-[9px] text-zinc-600 text-right mt-1 px-1",children:["Updated: ",u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})}const Lc=j.forwardRef(({className:c,...d},r)=>n.jsx(_x,{ref:r,className:G("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",c),...d}));Lc.displayName=_x.displayName;const UN=j.forwardRef(({className:c,...d},r)=>n.jsx(Cx,{ref:r,className:G("aspect-square h-full w-full",c),...d}));UN.displayName=Cx.displayName;const qc=j.forwardRef(({className:c,...d},r)=>n.jsx(Ex,{ref:r,className:G("flex h-full w-full items-center justify-center rounded-full bg-muted",c),...d}));qc.displayName=Ex.displayName;function HN(){var Q,P,ie;const{user:c}=Ge(),{hotel:d}=ut(),{t:r}=Xe(),{messages:o,subscribeToMessages:u,sendMessage:m,markAsRead:h,clearChat:b,deleteMessage:p}=Jx(),{staff:g,subscribeToRoster:v}=rs(),{addNotification:N}=di(),[w]=uy(),[E,_]=j.useState("all"),[M,T]=j.useState(""),[R,L]=j.useState(""),q=j.useRef(null);j.useEffect(()=>{const $=w.get("chat");$&&_($)},[w]),j.useEffect(()=>{if(!(d!=null&&d.id)||!(c!=null&&c.uid))return;const $=v(d.id),ae=u(d.id,c.uid);return()=>{$(),ae()}},[d==null?void 0:d.id,c==null?void 0:c.uid,u,v]),j.useEffect(()=>{q.current&&(q.current.scrollTop=q.current.scrollHeight)},[o,E]),j.useEffect(()=>{if(!(d!=null&&d.id)||!(c!=null&&c.uid))return;o.filter(ae=>!ae.is_read&&ae.receiver_id===c.uid&&(E==="all"&&ae.receiver_id==="all"||ae.sender_id===E)).forEach(ae=>{h(d.id,ae.id)})},[E,o,d==null?void 0:d.id,c==null?void 0:c.uid,h]);const F=j.useMemo(()=>g.filter($=>{var ae;return $.uid!==(c==null?void 0:c.uid)&&($.name.toLowerCase().includes(R.toLowerCase())||((ae=$.role)==null?void 0:ae.toLowerCase().includes(R.toLowerCase())))}),[g,c==null?void 0:c.uid,R]),le=$=>o.filter(ae=>!ae.is_read&&ae.sender_id===$&&ae.receiver_id===(c==null?void 0:c.uid)).length,Y=j.useMemo(()=>[...F].sort(($,ae)=>{const de=le($.uid),y=le(ae.uid);return de!==y?y-de:$.name.localeCompare(ae.name)}),[F,o,c==null?void 0:c.uid]),I=j.useMemo(()=>E==="all"?o.filter($=>$.receiver_id==="all"):o.filter($=>$.sender_id===(c==null?void 0:c.uid)&&$.receiver_id===E||$.sender_id===E&&$.receiver_id===(c==null?void 0:c.uid)),[o,E,c==null?void 0:c.uid]),D=j.useMemo(()=>{const $=[];let ae=null;return I.forEach(de=>{(!ae||!Zc(ae,de.timestamp))&&(ae=de.timestamp,$.push({date:ae,msgs:[]})),$[$.length-1].msgs.push(de)}),$},[I]),K=async $=>{if($.preventDefault(),!M.trim()||!(d!=null&&d.id)||!c)return;const ae=M.trim();T("");try{await m(d.id,{sender_id:c.uid,sender_name:c.name,receiver_id:E,content:ae}),E==="all"?await N(d.id,{type:"announcement",title:` ${c.name}`,content:ae,target_role:"all",link:"/operations?chat=all"}):await N(d.id,{type:"message",title:`Message from ${c.name}`,content:ae,target_uid:E,link:`/operations?chat=${c.uid}`})}catch(de){console.error("Failed to send",de)}};return n.jsxs("div",{className:"h-[calc(100vh-14rem)] md:h-[650px] flex flex-col md:flex-row gap-4 bg-zinc-950 rounded-xl overflow-hidden border border-zinc-800",children:[n.jsxs("div",{className:G("w-full md:w-72 bg-zinc-900/50 flex flex-col border-r border-zinc-800",E!=="all"&&E!==""?"hidden md:flex":"flex"),children:[n.jsxs("div",{className:"p-4 border-b border-zinc-800",children:[n.jsx("h3",{className:"font-bold text-white mb-4",children:r("messages.title")}),n.jsxs("div",{className:"relative",children:[n.jsx(Hd,{className:"w-3.5 h-3.5 absolute left-2.5 top-2.5 text-zinc-500"}),n.jsx(re,{value:R,onChange:$=>L($.target.value),placeholder:r("messages.search"),className:"h-8 pl-8 bg-zinc-950 border-zinc-800 text-xs"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-2 space-y-1",children:[n.jsxs("button",{onClick:()=>_("all"),className:G("w-full flex items-center gap-3 p-2 rounded-lg transition-all",E==="all"?"bg-indigo-600/10 border border-indigo-600/20":"hover:bg-zinc-800/50 border border-transparent"),children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center",children:n.jsx(Kc,{className:"w-4 h-4 text-indigo-400"})}),n.jsxs("div",{className:"flex-1 text-left",children:[n.jsx("p",{className:G("text-sm font-medium",E==="all"?"text-indigo-400":"text-zinc-300"),children:r("messages.announcements")}),n.jsx("p",{className:"text-[10px] text-zinc-500",children:"General Hotel Chat"})]})]}),n.jsx("div",{className:"h-px bg-zinc-800 my-2 mx-2"}),Y.map($=>{const ae=le($.uid);return n.jsxs("button",{onClick:()=>_($.uid),className:G("w-full flex items-center gap-3 p-2 rounded-lg transition-all group",E===$.uid?"bg-zinc-800 border border-zinc-700":"hover:bg-zinc-800/50 border border-transparent"),children:[n.jsx(Lc,{className:"w-8 h-8 border border-zinc-700",children:n.jsx(qc,{className:"bg-zinc-900 text-xs text-zinc-400 font-bold",children:$.name.substring(0,2).toUpperCase()})}),n.jsxs("div",{className:"flex-1 text-left min-w-0",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("p",{className:G("text-sm font-medium truncate",E===$.uid?"text-white":"text-zinc-400 group-hover:text-zinc-300"),children:$.name}),ae>0&&n.jsx(lt,{className:"h-4 px-1.5 bg-indigo-500 hover:bg-indigo-500 text-[9px]",children:ae})]}),n.jsx("p",{className:"text-[10px] text-zinc-600 uppercase tracking-wider",children:$.role})]})]},$.uid)})]})]}),n.jsxs("div",{className:G("flex-1 flex flex-col bg-zinc-950/30",E==="all"||E===""?"hidden md:flex":"flex"),children:[n.jsxs("div",{className:"h-14 border-b border-zinc-800 flex items-center px-4 md:px-6 justify-between shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ee,{variant:"ghost",size:"icon",className:"md:hidden -ml-2 mr-1",onClick:()=>_("all"),children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-left w-5 h-5",children:n.jsx("path",{d:"m15 18-6-6 6-6"})})}),E==="all"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500/10 flex items-center justify-center",children:n.jsx(Kc,{className:"w-4 h-4 text-indigo-400"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-bold text-white",children:r("messages.announcements")}),n.jsx("p",{className:"text-xs text-zinc-500",children:r("messages.broadcast")})]})]}):n.jsxs(n.Fragment,{children:[n.jsx(Lc,{className:"w-8 h-8 border border-zinc-700",children:n.jsx(qc,{className:"bg-zinc-800 text-zinc-400 text-xs font-bold",children:(Q=g.find($=>$.uid===E))==null?void 0:Q.name.substring(0,2).toUpperCase()})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-bold text-white",children:((P=g.find($=>$.uid===E))==null?void 0:P.name)||"Unknown User"}),n.jsx("p",{className:"text-xs text-zinc-500",children:((ie=g.find($=>$.uid===E))==null?void 0:ie.role)||"Staff"})]})]})]}),E!=="all"&&n.jsx(ee,{variant:"ghost",size:"icon",className:"h-8 w-8 text-zinc-500 hover:text-rose-500 hover:bg-rose-500/10 ml-2",title:"Clear Chat History",onClick:async()=>{window.confirm("Are you sure you want to clear this conversation? This action cannot be undone.")&&d!=null&&d.id&&c!=null&&c.uid&&await b(d.id,c.uid,E)},children:n.jsx(en,{className:"w-4 h-4"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",ref:q,children:D.length===0?n.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-zinc-700",children:[n.jsx(Qc,{className:"w-12 h-12 mb-4 opacity-20"}),n.jsx("p",{className:"text-sm",children:"No messages yet. Start the conversation!"})]}):D.map(($,ae)=>n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"h-px bg-zinc-800 flex-1"}),n.jsx("span",{className:"text-[10px] uppercase font-bold text-zinc-600 bg-zinc-950 px-2 rounded-full border border-zinc-800",children:ls($.date)}),n.jsx("div",{className:"h-px bg-zinc-800 flex-1"})]}),$.msgs.map(de=>{const y=de.sender_id===(c==null?void 0:c.uid);return n.jsxs(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:G("flex gap-3 max-w-[75%]",y?"ml-auto flex-row-reverse":""),children:[!y&&n.jsx(Lc,{className:"w-8 h-8 border border-zinc-800 shrink-0",children:n.jsx(qc,{className:"bg-zinc-900 text-[9px] text-zinc-500",children:de.sender_name.substring(0,2).toUpperCase()})}),n.jsxs("div",{className:G("p-3 rounded-2xl text-sm leading-relaxed relative group/msg",y?"bg-indigo-600 text-white rounded-tr-sm":"bg-zinc-900 border border-zinc-800 text-zinc-300 rounded-tl-sm"),children:[E==="all"&&!y&&n.jsx("p",{className:"text-[10px] font-bold text-indigo-400 mb-1",children:de.sender_name}),de.content,n.jsxs("div",{className:G("text-[9px] mt-1 flex items-center justify-end gap-1 opacity-70",y?"text-indigo-200":"text-zinc-500"),children:[bt(de.timestamp,"HH:mm"),y&&(de.is_read?n.jsx(sx,{className:"w-3 h-3"}):n.jsx(kt,{className:"w-3 h-3"}))]}),(y||(c==null?void 0:c.role)==="gm")&&n.jsx("button",{onClick:H=>{H.stopPropagation(),confirm("Delete this message?")&&d!=null&&d.id&&p(d.id,de.id)},className:G("absolute -top-2 p-1 rounded-full bg-zinc-800 border border-zinc-700 text-zinc-400 opacity-0 group-hover/msg:opacity-100 transition-opacity hover:text-rose-500 hover:border-rose-500",y?"-left-2":"-right-2"),title:"Delete message",children:n.jsx(en,{className:"w-3 h-3"})})]})]},de.id)})]},ae))}),n.jsx("div",{className:"p-4 bg-zinc-900/30 border-t border-zinc-800",children:n.jsxs("form",{onSubmit:K,className:"flex gap-3",children:[n.jsx(re,{placeholder:`Message ${E==="all"?"everyone":"..."}`,value:M,onChange:$=>T($.target.value),className:"bg-zinc-950 border-zinc-800 focus-visible:ring-indigo-500/50"}),n.jsx(ee,{type:"submit",disabled:!M.trim(),className:"bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg shadow-indigo-500/20",children:n.jsx(si,{className:"w-4 h-4"})})]})})]})]})}function BN(){const{user:c}=Ge(),{hotel:d}=ut(),{t:r}=Xe(),{notes:o,subscribeToNotes:u,addNote:m,updateNoteStatus:h,loading:b}=Wa(),[p,g]=j.useState(""),[v,N]=j.useState(!1),[w,E]=j.useState(!1),_=(c==null?void 0:c.role)==="gm",M=o.filter(q=>q.category==="feedback"),T=q=>{switch(q){case"active":return{label:"Yeni",icon:Jt,color:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20"};case"resolved":return{label:"zld",icon:Wb,color:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20"};case"archived":return{label:"Arivlendi",icon:er,color:"bg-zinc-500/10 text-zinc-400 border-zinc-500/20"};default:return{label:q,icon:Jt,color:"bg-zinc-500/10 text-zinc-400 border-zinc-500/20"}}},R=async(q,F)=>{!(d!=null&&d.id)||!c||await h(d.id,q,F,c.uid)};j.useEffect(()=>{if(d!=null&&d.id){const q=u(d.id);return()=>q()}},[d==null?void 0:d.id,u]);const L=async q=>{if(q.preventDefault(),!(!p.trim()||!(d!=null&&d.id))){N(!0);try{await m(d.id,{category:"feedback",content:p.trim(),room_number:null,is_relevant:!0,amount_due:null,is_paid:!1,created_by:"anonymous",created_by_name:"Anonym",shift_id:null,is_anonymous:!0}),g(""),E(!0),setTimeout(()=>E(!1),3e3)}catch(F){console.error("Submission error:",F)}finally{N(!1)}}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:r("feedback.anonymous.title")}),n.jsxs("p",{className:"text-zinc-500 text-sm",children:[r("offday.petitions")," - ",r("feedback.anonymous.subtitle")]})]}),_&&n.jsx(lt,{variant:"outline",className:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20 px-3 py-1",children:r("feedback.management.view")})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(fa,{className:"md:col-span-2 bg-zinc-900/50 border-zinc-800 backdrop-blur-sm overflow-hidden relative",children:[n.jsxs(tn,{children:[n.jsxs(_t,{className:"flex items-center gap-2 text-zinc-200",children:[n.jsx(lh,{className:"w-5 h-5 text-emerald-400"}),r("feedback.submit.title")]}),n.jsx(sr,{children:r("feedback.submit.desc")})]}),n.jsx(ma,{children:n.jsxs("form",{onSubmit:L,className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{required:!0,value:p,onChange:q=>g(q.target.value),placeholder:"Describe your concern or feedback here...",className:"w-full h-40 bg-zinc-950/50 border border-zinc-800 rounded-xl p-4 text-sm text-zinc-300 placeholder:text-zinc-600 focus:outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all resize-none"}),n.jsx(dt,{children:w&&n.jsx(me.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0},className:"absolute inset-0 bg-emerald-500/10 backdrop-blur-sm flex items-center justify-center rounded-xl border border-emerald-500/20",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-2",children:n.jsx(si,{className:"w-6 h-6 text-white"})}),n.jsx("p",{className:"text-emerald-400 font-bold",children:"Submitted Successfully"}),n.jsx("p",{className:"text-emerald-500/60 text-xs",children:"Thank you for your feedback."})]})})})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs(ee,{disabled:v||!p.trim(),className:"bg-indigo-600 hover:bg-indigo-500 text-white gap-2 px-6 h-11",children:[v?n.jsx(at,{className:"w-4 h-4 animate-spin"}):n.jsx(si,{className:"w-4 h-4"}),"Submit Anonymously"]})})]})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(fa,{className:"bg-emerald-500/5 border-emerald-500/10",children:[n.jsx(tn,{className:"pb-2",children:n.jsxs(_t,{className:"text-emerald-400 text-sm flex items-center gap-2",children:[n.jsx(lh,{className:"w-4 h-4"}),r("feedback.privacy.title")]})}),n.jsx(ma,{className:"text-[11px] text-emerald-500/60 leading-relaxed",children:r("feedback.privacy.desc")})]}),_&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-sm font-bold text-zinc-400 uppercase tracking-wider px-2",children:"Recent Feedback"}),n.jsx("div",{className:"space-y-3",children:b?n.jsx("div",{className:"flex justify-center py-8",children:n.jsx(at,{className:"w-6 h-6 animate-spin text-zinc-600"})}):M.length===0?n.jsx("p",{className:"text-xs text-zinc-600 text-center py-4 bg-zinc-800/20 rounded-lg",children:"No complaints to show."}):M.map(q=>{const F=T(q.status),le=F.icon;return n.jsxs(me.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"p-4 bg-zinc-900 border border-zinc-800 rounded-xl space-y-2 hover:border-zinc-700 transition-colors",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[10px] font-bold text-indigo-400 uppercase",children:"Complaint"}),n.jsxs(lt,{className:G("text-[10px] px-1.5 h-4",F.color),children:[n.jsx(le,{className:"w-2.5 h-2.5 mr-1"}),F.label]})]}),n.jsx("span",{className:"text-[10px] text-zinc-500",children:nr(q.created_at,{addSuffix:!0})})]}),n.jsx("p",{className:"text-xs text-zinc-300 leading-normal",children:q.content}),n.jsxs(ya,{value:q.status,onValueChange:Y=>R(q.id,Y),children:[n.jsx(da,{className:"h-7 bg-zinc-950 border-zinc-700 text-xs w-32",children:n.jsx(va,{})}),n.jsxs(ua,{children:[n.jsx(Te,{value:"active",children:"Yeni"}),n.jsx(Te,{value:"resolved",children:"zld"}),n.jsx(Te,{value:"archived",children:"Arivlendi"})]})]})]},q.id)})})]})]})]})]})}const GN=Ct(c=>({requests:[],loading:!0,error:null,subscribeToRequests:(d,r)=>{c({loading:!0,error:null});const o=Le(te,"hotels",d,"off_day_requests");let u=yt(o,ka("created_at","desc"),ss(100));return r&&(u=yt(o,Na("staff_id","==",r))),$t(u,h=>{const b=h.docs.map(p=>{var v;const g=p.data();return{id:p.id,staff_id:g.staff_id,staff_name:g.staff_name,date:g.date,reason:g.reason,status:g.status,created_at:((v=g.created_at)==null?void 0:v.toDate())||new Date,processed_at:g.processed_at?g.processed_at.toDate():void 0,processed_by:g.processed_by,type:g.type||"off_day",shift_name:g.shift_name}});b.sort((p,g)=>g.created_at.getTime()-p.created_at.getTime()),c({requests:b,loading:!1}),c({requests:b,loading:!1})},h=>{console.error("Off-day subscription error:",h),c({error:h.message,loading:!1})})},submitRequest:async(d,r)=>{try{const o=Le(te,"hotels",d,"off_day_requests");await Ft(o,{...r,status:"pending",created_at:Je()})}catch(o){throw console.error("Error submitting off-day request:",o),o}},updateRequest:async(d,r,o)=>{try{const u=he(te,"hotels",d,"off_day_requests",r);await De(u,{...o,updated_at:Je()})}catch(u){throw console.error("Error updating off-day request:",u),u}},updateRequestStatus:async(d,r,o,u)=>{try{const m=he(te,"hotels",d,"off_day_requests",r);await De(m,{status:o,processed_at:Je(),processed_by:u})}catch(m){throw console.error("Error updating off-day status:",m),m}},deleteRequest:async(d,r)=>{try{const o=he(te,"hotels",d,"off_day_requests",r);await Ta(o)}catch(o){throw console.error("Error deleting off-day request:",o),o}},cancelRequest:async(d,r)=>{try{const o=he(te,"hotels",d,"off_day_requests",r);await Ta(o)}catch(o){throw console.error("Error cancelling off-day request:",o),o}}})),Fx=j.forwardRef(({className:c,...d},r)=>n.jsx(Tx,{className:G("grid gap-2",c),...d,ref:r}));Fx.displayName=Tx.displayName;const Jd=j.forwardRef(({className:c,...d},r)=>n.jsx(kx,{ref:r,className:G("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",c),...d,children:n.jsx(Pb,{className:"flex items-center justify-center",children:n.jsx(Fd,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Jd.displayName=kx.displayName;function LN(){const{user:c}=Ge(),{hotel:d}=ut(),{t:r}=Xe(),{requests:o,subscribeToRequests:u,submitRequest:m,updateRequest:h,updateRequestStatus:b,deleteRequest:p,cancelRequest:g,loading:v}=GN(),[N,w]=j.useState([""]),[E,_]=j.useState(""),[M,T]=j.useState("off_day"),[R,L]=j.useState("morning"),[q,F]=j.useState(null),[le,Y]=j.useState(!1),I=(c==null?void 0:c.role)==="gm";j.useEffect(()=>{if(d!=null&&d.id){const y=u(d.id,I||c==null?void 0:c.uid);return()=>y()}},[d==null?void 0:d.id,c==null?void 0:c.uid,I,u]);const D=async y=>{y.preventDefault();const H=N.filter(ne=>ne.trim());if(!(H.length===0||!E.trim()||!(d!=null&&d.id)||!c)){Y(!0);try{if(q)await h(d.id,q,{date:H[0],reason:E.trim(),type:M,shift_name:M==="shift"?R:void 0}),F(null);else for(const ne of H)await m(d.id,{staff_id:c.uid,staff_name:c.name,date:ne,reason:E.trim(),type:M,shift_name:M==="shift"?R:void 0});w([""]),_(""),T("off_day"),L("morning")}catch(ne){console.error("Submission error:",ne)}finally{Y(!1)}}},K=y=>{F(y.id),w([y.date]),_(y.reason),T(y.type||"off_day"),L(y.shift_name||"morning")},Q=()=>w([...N,""]),P=y=>{N.length>1&&w(N.filter((H,ne)=>ne!==y))},ie=(y,H)=>{const ne=[...N];ne[y]=H,w(ne)},$=async(y,H)=>{!(d!=null&&d.id)||!c||await b(d.id,y.id,H,c.uid)},ae=async y=>{!(d!=null&&d.id)||!confirm("Bu talebi kalc olarak silmek istediinizden emin misiniz?")||await p(d.id,y)},de=async y=>{!(d!=null&&d.id)||!confirm("Bu talebi iptal etmek istediinizden emin misiniz?")||await g(d.id,y)};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:r("offday.management.title")}),n.jsx("p",{className:"text-zinc-500 text-sm",children:r("offday.management.desc")})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[!I&&n.jsxs(fa,{className:"bg-zinc-900/50 border-zinc-800 backdrop-blur-sm",children:[n.jsxs(tn,{children:[n.jsxs(_t,{className:"text-zinc-200 flex items-center gap-2 text-base",children:[n.jsx(Dn,{className:"w-5 h-5 text-indigo-400"}),q?"Talebi Dzenle":"Yeni Talep"]}),n.jsx(sr,{className:"text-xs",children:q?"Mevcut talebinizi gncelleyin.":"zin veya vardiya deiiklii talep edin."})]}),n.jsx(ma,{children:n.jsxs("form",{onSubmit:D,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ea,{className:"text-xs font-bold text-zinc-500 uppercase",children:"Talep Tr"}),n.jsxs(Fx,{value:M,onValueChange:y=>T(y),className:"flex gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Jd,{value:"off_day",id:"type-off",className:"border-zinc-600 text-indigo-500"}),n.jsx(Ea,{htmlFor:"type-off",className:"text-sm text-zinc-300 cursor-pointer",children:"zin (Off Day)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Jd,{value:"shift",id:"type-shift",className:"border-zinc-600 text-indigo-500"}),n.jsx(Ea,{htmlFor:"type-shift",className:"text-sm text-zinc-300 cursor-pointer",children:"Vardiya stei"})]})]})]}),M==="shift"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ea,{className:"text-xs font-bold text-zinc-500 uppercase",children:"stenen Vardiya"}),n.jsxs(ya,{value:R,onValueChange:L,children:[n.jsx(da,{className:"bg-zinc-950 border-zinc-800",children:n.jsx(va,{})}),n.jsxs(ua,{children:[n.jsx(Te,{value:"morning",children:"Sabah (Morning)"}),n.jsx(Te,{value:"evening",children:"Akam (Evening)"}),n.jsx(Te,{value:"night",children:"Gece (Night)"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-xs font-bold text-zinc-500 uppercase flex items-center gap-2",children:["Seilen Tarih",N.length>1?"ler":"",!q&&n.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:Q,className:"h-5 px-1 text-indigo-400",children:n.jsx(cs,{className:"w-3 h-3"})})]}),n.jsx("div",{className:"space-y-2",children:N.map((y,H)=>n.jsxs("div",{className:"flex gap-2",children:[n.jsx(re,{type:"date",required:!0,value:y,onChange:ne=>ie(H,ne.target.value),className:"bg-zinc-950 border-zinc-800 focus:ring-indigo-500"}),N.length>1&&n.jsx(ee,{type:"button",variant:"ghost",size:"sm",onClick:()=>P(H),className:"h-9 px-2 text-rose-500",children:n.jsx(en,{className:"w-3 h-3"})})]},H))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-zinc-500 uppercase",children:"Sebep / Not"}),n.jsx("textarea",{required:!0,value:E,onChange:y=>_(y.target.value),placeholder:"Talep iin ksa aklama...",className:"w-full h-24 bg-zinc-950 border border-zinc-800 rounded-lg p-3 text-sm text-zinc-300 focus:outline-none focus:ring-1 focus:ring-indigo-500 resize-none"})]}),n.jsxs("div",{className:"flex gap-2",children:[q&&n.jsx(ee,{type:"button",variant:"ghost",onClick:()=>{F(null),w([""]),_(""),T("off_day")},className:"flex-1 text-zinc-400 hover:text-white",children:"ptal"}),n.jsxs(ee,{disabled:le||N.every(y=>!y.trim())||!E.trim(),className:"flex-[2] bg-indigo-600 hover:bg-indigo-500 text-white gap-2",children:[le?n.jsx(at,{className:"w-4 h-4 animate-spin"}):n.jsx(si,{className:"w-4 h-4"}),q?"Gncelle":"Talebi Gnder"]})]})]})})]}),n.jsxs(fa,{className:G("bg-zinc-900/50 border-zinc-800 flex flex-col min-h-[500px]",I?"lg:col-span-3":"lg:col-span-2"),children:[n.jsx(tn,{className:"border-b border-zinc-800",children:n.jsxs(_t,{className:"text-zinc-200 flex items-center gap-2 text-base",children:[n.jsx(Jt,{className:"w-5 h-5 text-amber-400"}),r(I?"offday.pending":"offday.history")]})}),n.jsx(ma,{className:"p-0 overflow-y-auto custom-scrollbar",children:v?n.jsx("div",{className:"flex justify-center py-20",children:n.jsx(at,{className:"w-8 h-8 animate-spin text-zinc-800"})}):o.length===0?n.jsxs("div",{className:"text-center py-20",children:[n.jsx(Dn,{className:"w-12 h-12 text-zinc-800 mx-auto mb-4 opacity-20"}),n.jsx("p",{className:"text-zinc-600",children:"Talep bulunamad."})]}):n.jsx("div",{className:"divide-y divide-zinc-800",children:o.map(y=>{var H;return n.jsxs(me.div,{initial:{opacity:0},animate:{opacity:1},className:"p-4 flex items-center justify-between group hover:bg-zinc-800/30 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"px-2 h-10 rounded-lg bg-zinc-800/50 flex flex-col items-center justify-center border border-zinc-700/50 min-w-[80px]",children:n.jsx("span",{className:"text-[10px] font-bold text-white font-mono",children:ls(Mx(y.date))})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-bold text-white",children:I?y.staff_name:y.type==="shift"?"Vardiya Deiiklii":"zin Talebi"}),n.jsx(lt,{className:G("text-[10px] uppercase px-1.5 h-4",y.status==="pending"&&"bg-amber-500/10 text-amber-400 border-amber-500/20",y.status==="approved"&&"bg-emerald-500/10 text-emerald-400 border-emerald-500/20",y.status==="rejected"&&"bg-rose-500/10 text-rose-400 border-rose-500/20"),children:y.status==="pending"?"bekliyor":y.status==="approved"?"onayland":"reddedildi"}),y.type==="shift"?n.jsxs(lt,{variant:"outline",className:"text-[10px] px-1.5 h-4 bg-indigo-500/10 text-indigo-300 border-indigo-500/20 flex items-center gap-1",children:[n.jsx(jx,{className:"w-2.5 h-2.5"}),(H=y.shift_name)==null?void 0:H.toUpperCase()]}):n.jsx(lt,{variant:"outline",className:"text-[10px] px-1.5 h-4 bg-zinc-700/30 text-zinc-400 border-zinc-700/50",children:"OFF DAY"})]}),n.jsx("p",{className:"text-xs text-zinc-500 line-clamp-1",children:y.reason})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!I&&y.status==="pending"&&n.jsx(ee,{variant:"secondary",size:"sm",onClick:()=>K(y),className:"bg-zinc-800 hover:bg-zinc-700 text-zinc-300 h-8 text-xs",children:"Dzenle"}),!I&&y.status==="pending"&&n.jsx(ee,{variant:"secondary",size:"sm",onClick:()=>de(y.id),className:"bg-zinc-800 hover:bg-zinc-700 text-rose-400 hover:text-rose-300 h-8 text-xs",children:"ptal"}),!I&&y.status==="rejected"&&n.jsxs(ee,{variant:"secondary",size:"sm",onClick:()=>$(y,"pending"),className:"bg-indigo-600 hover:bg-indigo-500 text-white h-8 text-xs",children:[n.jsx(Gd,{className:"w-3 h-3 mr-1"}),"Yeniden Talep Et"]}),I&&y.status==="pending"?n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ee,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-500 text-white h-9 px-3",onClick:()=>$(y,"approved"),children:n.jsx(kt,{className:"w-4 h-4"})}),n.jsx(ee,{size:"sm",variant:"destructive",className:"bg-rose-600 hover:bg-rose-500 text-white h-9 px-3",onClick:()=>$(y,"rejected"),children:n.jsx(St,{className:"w-4 h-4"})})]}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("p",{className:"text-[10px] text-zinc-600 italic",children:["ID: ",y.id.slice(0,8)]}),I&&y.status!=="pending"&&n.jsxs(n.Fragment,{children:[n.jsxs(ee,{size:"sm",variant:"ghost",className:"h-6 px-2 text-[10px] text-zinc-500 hover:text-zinc-300",onClick:()=>$(y,y.status==="approved"?"rejected":"approved"),title:y.status==="approved"?"Reddet":"Onayla",children:[y.status==="approved"?n.jsx(St,{className:"w-3 h-3 mr-1"}):n.jsx(kt,{className:"w-3 h-3 mr-1"}),y.status==="approved"?"Reddet":"Onayla"]}),n.jsx(ee,{size:"sm",variant:"ghost",className:"h-6 px-2 text-[10px] text-zinc-500 hover:text-amber-400",onClick:()=>$(y,"pending"),title:"Sfrla (Bekliyor)",children:n.jsx(Gd,{className:"w-3 h-3"})})]})]})]}),I&&n.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>ae(y.id),className:"h-8 w-8 p-0 text-zinc-600 hover:text-rose-500 hover:bg-rose-500/10 ml-2",title:"Kalc Olarak Sil",children:n.jsx(en,{className:"w-4 h-4"})})]},y.id)})})})]})]})]})}const $x=Ct(c=>({tours:[],loading:!0,error:null,subscribeToTours:d=>{c({loading:!0,error:null});const r=Le(te,"hotels",d,"tours"),o=yt(r,ss(50));return $t(o,m=>{const h=m.docs.map(b=>{const p=b.data();return{id:b.id,name:p.name,description:p.description,base_price_eur:p.base_price_eur||0,adult_price:p.adult_price||0,child_3_7_price:p.child_3_7_price||0,child_0_3_price:p.child_0_3_price||0,operating_days:p.operating_days||[],is_active:p.is_active??!0}});c({tours:h,loading:!1})},m=>{console.error("Tour subscription error:",m),c({error:m.message,loading:!1})})},addTour:async(d,r)=>{try{const o=Le(te,"hotels",d,"tours");await Ft(o,r)}catch(o){throw console.error("Error adding tour:",o),o}},updateTour:async(d,r,o)=>{try{const u=he(te,"hotels",d,"tours",r);await De(u,o)}catch(u){throw console.error("Error updating tour:",u),u}},deleteTour:async(d,r)=>{try{const o=he(te,"hotels",d,"tours",r);await Ta(o)}catch(o){throw console.error("Error deleting tour:",o),o}},toggleTourActive:async(d,r,o)=>{try{const u=he(te,"hotels",d,"tours",r);await De(u,{is_active:o})}catch(u){throw console.error("Error toggling tour status:",u),u}}})),qN=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function YN(){const{t:c}=Xe(),{user:d}=Ge(),{hotel:r}=ut(),{tours:o,subscribeToTours:u,addTour:m,updateTour:h,deleteTour:b,loading:p}=$x(),{addSale:g}=fi(),[v,N]=j.useState(!1),[w,E]=j.useState(null),[_,M]=j.useState({name:"",description:"",base_price_eur:0,adult_price:0,child_3_7_price:0,child_0_3_price:0,operating_days:[],is_active:!0}),[T,R]=j.useState(null),[L,q]=j.useState("adult"),[F,le]=j.useState({guest_name:"",room_number:"",pax:1,date:bt(new Date,"yyyy-MM-dd"),pickup_time:""}),Y=(d==null?void 0:d.role)==="gm";j.useEffect(()=>{if(r!=null&&r.id){const Q=u(r.id);return()=>Q()}},[r==null?void 0:r.id,u]);const I=async()=>{if(r!=null&&r.id)try{w?(await h(r.id,w,_),E(null)):(await m(r.id,_),N(!1)),M({name:"",description:"",base_price_eur:0,adult_price:0,child_3_7_price:0,child_0_3_price:0,operating_days:[],is_active:!0})}catch(Q){console.error("Save tour error:",Q)}},D=(Q,P)=>{R(Q),q(P),le({guest_name:"",room_number:"",pax:1,date:bt(new Date,"yyyy-MM-dd"),pickup_time:""})},K=async()=>{if(!(r!=null&&r.id)||!d||!T)return;let Q=T.adult_price;L==="child_3_7"&&(Q=T.child_3_7_price),L==="child_0_3"&&(Q=T.child_0_3_price);const P=Q*F.pax;try{await g(r.id,{type:"tour",name:`${T.name} (${L==="adult"?"Adult":L==="child_3_7"?"Child 3-7":"Child 0-3"})`,customer_name:F.guest_name,room_number:F.room_number,pax:F.pax,date:new Date(F.date),pickup_time:F.pickup_time||void 0,total_price:P,currency:"EUR",created_by:d.uid,created_by_name:d.name,notes:"Quick booking from Catalogue"}),R(null)}catch(ie){console.error("Booking error:",ie)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:c("tours.catalogue.title")}),n.jsx("p",{className:"text-zinc-500 text-sm",children:c("tours.catalogue.desc")})]}),Y&&!v&&n.jsxs(ee,{onClick:()=>N(!0),className:"bg-indigo-600 hover:bg-indigo-500 gap-2",children:[n.jsx(cs,{className:"w-4 h-4"}),c("tours.add")]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[n.jsx(dt,{children:(v||w)&&n.jsx(me.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"col-span-full",children:n.jsxs(fa,{className:"bg-zinc-900 border-indigo-500/30",children:[n.jsxs(tn,{className:"flex flex-row items-center justify-between",children:[n.jsx(_t,{className:"text-white",children:c(w?"tours.edit":"tours.create")}),n.jsx(ee,{variant:"ghost",size:"sm",onClick:()=>{N(!1),E(null)},children:n.jsx(St,{className:"w-4 h-4"})})]}),n.jsxs(ma,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs text-zinc-500 uppercase font-bold",children:c("tours.form.name")}),n.jsx(re,{value:_.name,onChange:Q=>M(P=>({...P,name:Q.target.value})),className:"bg-zinc-950 border-zinc-800"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs text-zinc-500 uppercase font-bold",children:c("tours.form.desc")}),n.jsx(re,{value:_.description,onChange:Q=>M(P=>({...P,description:Q.target.value})),className:"bg-zinc-950 border-zinc-800"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-xs text-zinc-500 uppercase font-bold flex items-center gap-1",children:[n.jsx(Sx,{className:"w-3 h-3 text-indigo-400"})," ",c("tours.form.basePrice")]}),n.jsx(re,{type:"number",value:_.base_price_eur,onChange:Q=>M(P=>({...P,base_price_eur:parseFloat(Q.target.value)||0})),className:"bg-zinc-950 border-zinc-800"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs text-zinc-500 uppercase font-bold",children:c("tours.form.adultPrice")}),n.jsx(re,{type:"number",value:_.adult_price,onChange:Q=>M(P=>({...P,adult_price:parseFloat(Q.target.value)||0})),className:"bg-zinc-950 border-zinc-800"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs text-zinc-500 uppercase font-bold text-amber-400",children:c("tours.form.child37Price")}),n.jsx(re,{type:"number",value:_.child_3_7_price,onChange:Q=>M(P=>({...P,child_3_7_price:parseFloat(Q.target.value)||0})),className:"bg-zinc-950 border-zinc-800"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs text-zinc-500 uppercase font-bold text-emerald-400",children:c("tours.form.child03Price")}),n.jsx(re,{type:"number",value:_.child_0_3_price,onChange:Q=>M(P=>({...P,child_0_3_price:parseFloat(Q.target.value)||0})),className:"bg-zinc-950 border-zinc-800"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs text-zinc-500 uppercase font-bold",children:c("tours.form.operatingDays")}),n.jsx("div",{className:"flex flex-wrap gap-2",children:qN.map(Q=>n.jsx("button",{type:"button",onClick:()=>{const P=_.operating_days.includes(Q)?_.operating_days.filter(ie=>ie!==Q):[..._.operating_days,Q];M(ie=>({...ie,operating_days:P}))},className:G("px-3 py-1.5 rounded-lg text-xs font-medium transition-all",_.operating_days.includes(Q)?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-500 hover:bg-zinc-700"),children:Q.slice(0,3)},Q))})]}),n.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[n.jsx(ee,{variant:"ghost",onClick:()=>{N(!1),E(null)},children:c("common.cancel")}),n.jsxs(ee,{className:"bg-indigo-600 hover:bg-indigo-500 px-8",onClick:I,children:[n.jsx(Pd,{className:"w-4 h-4 mr-2"}),c(w?"common.update":"common.save")]})]})]})]})})}),p?n.jsx("div",{className:"col-span-full py-20 flex justify-center",children:n.jsx(at,{className:"w-10 h-10 animate-spin text-zinc-800"})}):o.length===0?n.jsxs("div",{className:"col-span-full py-20 text-center bg-zinc-900/40 rounded-3xl border border-dashed border-zinc-800",children:[n.jsx(qd,{className:"w-16 h-16 text-zinc-800 mx-auto mb-4"}),n.jsx("p",{className:"text-zinc-500 font-medium",children:c("tours.noTours")}),Y&&n.jsx(ee,{variant:"link",className:"text-indigo-400 mt-2",onClick:()=>N(!0),children:c("tours.createFirst")})]}):[...o].sort((Q,P)=>Q.name.localeCompare(P.name)).map(Q=>n.jsx(me.div,{layout:!0,children:n.jsxs(fa,{className:"bg-zinc-900/50 border-zinc-800 hover:border-zinc-700 transition-all overflow-hidden flex flex-col h-full group",children:[n.jsxs(tn,{className:"pb-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx(lt,{variant:"outline",className:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20",children:c("tours.local")}),Y&&n.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[n.jsx(ee,{size:"icon",variant:"ghost",className:"h-7 w-7 text-zinc-500 hover:text-white",onClick:()=>{E(Q.id),M({...Q})},children:n.jsx(Ax,{className:"w-3.5 h-3.5"})}),n.jsx(ee,{size:"icon",variant:"ghost",className:"h-7 w-7 text-zinc-500 hover:text-rose-400",onClick:()=>(r==null?void 0:r.id)&&b(r.id,Q.id),children:n.jsx(en,{className:"w-3.5 h-3.5"})})]})]}),n.jsx(_t,{className:"text-zinc-200",children:Q.name}),n.jsx(sr,{className:"text-xs line-clamp-2",children:Q.description})]}),n.jsxs(ma,{className:"space-y-4 pt-2 flex-1 flex flex-col",children:[n.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:Q.operating_days.map(P=>n.jsx("span",{className:"text-[9px] px-1.5 py-0.5 bg-zinc-800 text-zinc-400 rounded-md font-bold uppercase",children:P.slice(0,3)},P))}),n.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[n.jsxs("div",{onClick:()=>D(Q,"adult"),className:"p-3 bg-zinc-950/50 rounded-xl border border-zinc-800 hover:border-indigo-500/50 hover:bg-zinc-900 cursor-pointer transition-all group/price",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-[10px] text-zinc-500 uppercase font-bold",children:c("tours.form.adultPrice")}),n.jsx(Dn,{className:"w-3 h-3 text-zinc-700 group-hover/price:text-indigo-400 opacity-0 group-hover/price:opacity-100 transition-all"})]}),n.jsxs("p",{className:"text-lg font-bold text-white",children:["",Q.adult_price.toLocaleString(),n.jsxs("span",{className:"text-xs text-zinc-500 ml-1 font-normal",children:["(Base: ",Q.base_price_eur,")"]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{onClick:()=>D(Q,"child_3_7"),className:"p-2.5 bg-zinc-950/50 rounded-xl border border-zinc-800 hover:border-amber-500/50 hover:bg-zinc-900 cursor-pointer transition-all group/price",children:[n.jsx("p",{className:"text-[9px] text-zinc-500 uppercase font-bold mb-1",children:c("tours.form.child37Price")}),n.jsxs("p",{className:"text-sm font-bold text-amber-400",children:["",Q.child_3_7_price]})]}),n.jsxs("div",{onClick:()=>D(Q,"child_0_3"),className:"p-2.5 bg-zinc-950/50 rounded-xl border border-zinc-800 hover:border-emerald-500/50 hover:bg-zinc-900 cursor-pointer transition-all group/price",children:[n.jsx("p",{className:"text-[9px] text-zinc-500 uppercase font-bold mb-1",children:c("tours.form.child03Price")}),n.jsxs("p",{className:"text-sm font-bold text-emerald-400",children:["",Q.child_0_3_price]})]})]})]}),n.jsx("div",{className:"mt-auto pt-4 border-t border-zinc-800/50",children:n.jsx("p",{className:"text-[10px] text-zinc-600 italic text-center",children:c("tours.clickToLog")})})]})]})},Q.id)),n.jsx(su,{open:!!T,onOpenChange:Q=>!Q&&R(null),children:n.jsxs(lr,{className:"bg-zinc-950 border-zinc-800",children:[n.jsxs(lu,{children:[n.jsx(ir,{className:"text-white",children:c("tours.book.title",{name:(T==null?void 0:T.name)||""})}),n.jsx(cr,{className:"text-zinc-500 text-sm",children:c("tours.book.desc")})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs text-zinc-500",children:c("tours.book.guestName")}),n.jsx(re,{value:F.guest_name,onChange:Q=>le(P=>({...P,guest_name:Q.target.value})),className:"bg-zinc-900 border-zinc-800",placeholder:"Full Name"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs text-zinc-500",children:c("tours.book.room")}),n.jsx(re,{value:F.room_number,onChange:Q=>le(P=>({...P,room_number:Q.target.value})),className:"bg-zinc-900 border-zinc-800",placeholder:"101"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs text-zinc-500",children:c("tours.book.pax")}),n.jsx(re,{type:"number",value:F.pax,onChange:Q=>le(P=>({...P,pax:parseInt(Q.target.value)||1})),className:"bg-zinc-900 border-zinc-800",min:1})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs text-zinc-500",children:c("tours.book.date")}),n.jsx(re,{type:"date",value:F.date,onChange:Q=>le(P=>({...P,date:Q.target.value})),className:"bg-zinc-900 border-zinc-800"})]})]}),n.jsx("div",{className:"p-3 bg-indigo-500/10 border border-indigo-500/20 rounded-lg",children:n.jsxs("p",{className:"text-xs text-indigo-300",children:[c("tours.book.totalPrice"),": ",n.jsxs("span",{className:"font-bold text-white",children:["",T?(L==="adult"?T.adult_price:L==="child_3_7"?T.child_3_7_price:T.child_0_3_price)*F.pax:0]})]})})]}),n.jsxs(Vx,{children:[n.jsx(ee,{variant:"ghost",onClick:()=>R(null),children:c("common.cancel")}),n.jsxs(ee,{className:"bg-indigo-600 hover:bg-indigo-500",onClick:K,disabled:!F.guest_name||!F.room_number,children:[n.jsx(kt,{className:"w-4 h-4 mr-1"})," ",c("tours.book.confirm")]})]})]})})]})]})}const VN=c=>n.jsx("textarea",{...c,className:G("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",c.className)});function KN({saleId:c,onClose:d}){var Y,I;const{hotel:r}=ut(),{sales:o,updateSale:u,deleteSale:m,collectPayment:h}=fi(),[b,p]=j.useState(!1),[g,v]=j.useState({}),[N,w]=j.useState(""),[E,_]=j.useState("EUR"),[M,T]=j.useState(""),R=o.find(D=>D.id===c);if(j.useEffect(()=>{R&&(v({total_price:R.total_price,pax:R.pax,notes:R.notes||"",pickup_time:R.pickup_time||"",ticket_number:R.ticket_number||"",date:R.date,name:R.name,room_number:R.room_number,status:R.status||"waiting"}),_(R.currency),w(""),T(""))},[R]),!R)return null;const L=async()=>{if(!(!(r!=null&&r.id)||!c))try{await u(r.id,c,g),p(!1)}catch(D){console.error("Failed to update sale:",D)}},q=async()=>{if(!(r!=null&&r.id)||!c||!N)return;const D=parseFloat(N);if(isNaN(D)||D<=0)return;let K;if(E!==R.currency){const Q=parseFloat(M);if(!isNaN(Q)&&Q>0)K=Q;else return}try{await h(r.id,c,D,E,K),w(""),T("")}catch(Q){console.error("Payment collection error:",Q)}},F=async()=>{!(r!=null&&r.id)||!c||confirm("Are you sure you want to completely delete this sale record?")&&(await m(r.id,c),d())},le=R.total_price-R.collected_amount;return n.jsx(su,{open:!!c,onOpenChange:D=>!D&&d(),children:n.jsxs(lr,{className:"bg-zinc-950 border-zinc-800 text-zinc-100 max-w-2xl p-0 overflow-hidden",children:[n.jsx(ir,{className:"sr-only",children:"Sale Details"}),n.jsx(cr,{className:"sr-only",children:"View and edit sale details"}),n.jsxs("div",{className:"flex flex-col h-[80vh] md:h-auto overflow-y-auto",children:[n.jsxs("div",{className:G("p-6 border-b border-zinc-800 relative overflow-hidden",ba[R.type].color.split(" ")[0].replace("/20","/10")),children:[n.jsx("div",{className:"absolute top-0 right-0 p-4 flex items-center gap-2",children:b?n.jsxs(n.Fragment,{children:[n.jsxs(ee,{size:"sm",className:"bg-emerald-600 hover:bg-emerald-500",onClick:L,children:[n.jsx(kt,{className:"w-4 h-4 mr-1"})," Save"]}),n.jsx(ee,{size:"sm",variant:"ghost",onClick:()=>p(!1),children:"Cancel"})]}):n.jsxs(n.Fragment,{children:[n.jsx(ee,{size:"icon",variant:"ghost",className:"hover:bg-white/10",onClick:()=>p(!0),children:n.jsx(Ax,{className:"w-4 h-4"})}),n.jsx(ee,{size:"icon",variant:"ghost",className:"text-rose-400 hover:bg-rose-500/10 hover:text-rose-300",onClick:F,children:n.jsx(en,{className:"w-4 h-4"})})]})}),n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("span",{className:"text-3xl",children:ba[R.type].icon}),n.jsx(lt,{variant:"outline",className:G(ba[R.type].color),children:ba[R.type].label}),n.jsx(lt,{variant:"outline",className:G(Ic[R.payment_status].color),children:Ic[R.payment_status].label}),b?n.jsxs(ya,{value:g.status||"waiting",onValueChange:D=>v(K=>({...K,status:D})),children:[n.jsx(da,{className:"h-6 w-[120px] text-xs bg-zinc-900 border-zinc-700",children:n.jsx(va,{})}),n.jsxs(ua,{children:[n.jsx(Te,{value:"waiting",children:"Waiting"}),n.jsx(Te,{value:"confirmed",children:"Confirmed"}),n.jsx(Te,{value:"pickup_pending",children:"Pickup Pending"}),n.jsx(Te,{value:"realized",children:"Realized"}),n.jsx(Te,{value:"delivered",children:"Delivered"}),n.jsx(Te,{value:"cancelled",children:"Cancelled"})]})]}):R.status&&n.jsx(lt,{variant:"outline",className:G(((Y=Is[R.status])==null?void 0:Y.color)||"bg-zinc-800 text-zinc-400 border-zinc-700"),children:((I=Is[R.status])==null?void 0:I.label)||R.status})]}),b?n.jsx(re,{value:g.name,onChange:D=>v(K=>({...K,name:D.target.value})),className:"text-2xl font-bold bg-black/20 border-white/10 text-white mb-2"}):n.jsx("h2",{className:"text-2xl font-bold text-white mb-1",children:R.name}),n.jsxs("div",{className:"flex items-center gap-4 text-zinc-400 text-sm",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(ey,{className:"w-4 h-4"})," ",R.customer_name]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Wd,{className:"w-4 h-4"})," Room ",R.room_number]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Dn,{className:"w-4 h-4"})," ",ls(R.date)]})]})]}),n.jsxs("div",{className:"p-6 space-y-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Service Details"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs text-zinc-500",children:"Pickup Time"}),b?n.jsx(re,{type:"time",value:g.pickup_time,onChange:D=>v(K=>({...K,pickup_time:D.target.value})),className:"h-8 bg-zinc-900 border-zinc-800"}):n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[n.jsx(Jt,{className:"w-4 h-4 text-zinc-600"}),R.pickup_time||"Not set"]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs text-zinc-500",children:"Ticket #"}),b?n.jsx(re,{value:g.ticket_number,onChange:D=>v(K=>({...K,ticket_number:D.target.value})),className:"h-8 bg-zinc-900 border-zinc-800",placeholder:"e.g. T-12345"}):n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[n.jsx(ty,{className:"w-4 h-4 text-zinc-600"}),R.ticket_number||"None"]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs text-zinc-500",children:"Pax"}),b?n.jsx(re,{type:"number",value:g.pax,onChange:D=>v(K=>({...K,pax:parseInt(D.target.value)||1})),className:"h-8 bg-zinc-900 border-zinc-800"}):n.jsxs("div",{className:"text-sm font-medium",children:[R.pax," Person(s)"]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Financials"}),n.jsxs("div",{className:"p-4 bg-zinc-900/50 rounded-xl border border-zinc-800",children:[n.jsxs("div",{className:"flex justify-between items-center mb-2",children:[n.jsx("span",{className:"text-sm text-zinc-400",children:"Total Price"}),b?n.jsxs("div",{className:"flex items-center gap-1 w-24",children:[n.jsx(re,{type:"number",value:g.total_price,onChange:D=>v(K=>({...K,total_price:parseFloat(D.target.value)||0})),className:"h-7 text-right bg-zinc-950 border-zinc-700"}),n.jsx("span",{className:"text-xs text-zinc-500",children:""})]}):n.jsxs("span",{className:"text-lg font-bold text-white",children:["",R.total_price]})]}),n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("span",{className:"text-sm text-zinc-400",children:"Paid So Far"}),n.jsxs("span",{className:G("text-sm font-medium",R.collected_amount>=R.total_price?"text-emerald-400":"text-amber-400"),children:["",R.collected_amount]})]}),le>0&&n.jsxs("div",{className:"pt-3 border-t border-zinc-800 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 relative",children:n.jsx(re,{value:N,onChange:D=>w(D.target.value),placeholder:"Amount...",type:"number",className:"h-8 bg-zinc-950 border-zinc-700 text-xs pl-2"})}),n.jsx("div",{className:"w-24",children:n.jsxs(ya,{value:E,onValueChange:D=>_(D),children:[n.jsx(da,{className:"h-8 text-xs bg-zinc-950 border-zinc-700",children:n.jsx(va,{})}),n.jsxs(ua,{children:[n.jsx(Te,{value:"EUR",children:"EUR ()"}),n.jsx(Te,{value:"TRY",children:"TRY ()"}),n.jsx(Te,{value:"USD",children:"USD ($)"}),n.jsx(Te,{value:"GBP",children:"GBP ()"})]})]})})]}),E!==R.currency&&n.jsxs("div",{className:"flex items-center gap-2 animate-in fade-in slide-in-from-top-1",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(re,{value:M,onChange:D=>T(D.target.value),placeholder:`Value in ${R.currency}...`,type:"number",className:"h-8 bg-zinc-950 border-amber-500/30 text-xs pl-2"}),n.jsx("span",{className:"absolute right-2 top-2 text-[10px] text-zinc-500 font-bold",children:R.currency})]}),n.jsx("div",{className:"w-24 flex items-center justify-center text-[10px] text-amber-500 font-medium",children:"Exchange Value"})]}),n.jsx(ee,{size:"sm",onClick:q,disabled:!N||E!==R.currency&&!M,className:"w-full h-8 bg-emerald-600 hover:bg-emerald-500 mt-2",children:"Collect Payment"}),n.jsxs("p",{className:"text-[10px] text-zinc-500 text-right",children:["Remaining: ",n.jsxs("span",{className:"text-rose-400 font-bold",children:["",le.toFixed(2)]})]})]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider flex items-center gap-2",children:[n.jsx(Qc,{className:"w-3 h-3"})," Notes"]}),b?n.jsx(VN,{value:g.notes,onChange:D=>v(K=>({...K,notes:D.target.value})),className:"bg-zinc-900 border-zinc-800 min-h-[100px]",placeholder:"Add notes about pickup location, preferences, etc."}):n.jsx("div",{className:"p-4 bg-zinc-900/30 rounded-xl border border-zinc-800/50 min-h-[80px]",children:R.notes?n.jsx("p",{className:"text-sm text-zinc-300 whitespace-pre-wrap",children:R.notes}):n.jsx("p",{className:"text-sm text-zinc-600 italic",children:"No notes added."})})]}),R.payments&&R.payments.length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider",children:"Payment History"}),n.jsx("div",{className:"space-y-2",children:R.payments.map((D,K)=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-900/50 rounded-lg border border-zinc-800/50 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-2 w-2 rounded-full bg-emerald-500"}),n.jsx("span",{className:"text-zinc-400",children:bt(new Date(D.timestamp),"dd MMM HH:mm")})]}),n.jsxs("span",{className:"font-medium text-emerald-400",children:["+",D.amount," ",D.currency]})]},K))})]}),n.jsxs("div",{className:"text-[10px] text-zinc-600 pt-4 border-t border-zinc-900 text-center",children:["Created by ",R.created_by_name," on ",bt(new Date(R.created_at),"PPP p")]})]})]})]})})}function XN(){const{t:c}=Xe(),{sales:d,loading:r,subscribeToSales:o,addSale:u,updateSale:m}=fi(),{tours:h,subscribeToTours:b}=$x(),{hotel:p}=ut(),{user:g}=Ge(),[v,N]=j.useState("tour"),[w,E]=j.useState(!1),[_,M]=j.useState(null),[T,R]=j.useState({name:"",customer_name:"",room_number:"",pax:1,date:bt(new Date,"yyyy-MM-dd"),pickup_time:"",total_price:"",currency:"EUR",notes:""});j.useEffect(()=>{if(!(p!=null&&p.id))return;const Y=o(p.id),I=b(p.id);return()=>{Y(),I()}},[p==null?void 0:p.id,o,b]);const L=d.filter(Y=>Y.type===v),q=()=>{R({name:"",customer_name:"",room_number:"",pax:1,date:bt(new Date,"yyyy-MM-dd"),pickup_time:"",total_price:"",currency:"EUR",notes:""}),E(!1)},F=async()=>{if(!(p!=null&&p.id)||!g||!T.name.trim()||!T.total_price)return;const Y=new Date(T.date),I=parseFloat(T.total_price);await u(p.id,{type:v,name:T.name.trim(),customer_name:T.customer_name.trim(),room_number:T.room_number.trim(),pax:T.pax,date:Y,pickup_time:T.pickup_time||void 0,total_price:I,currency:T.currency,notes:T.notes.trim()||"",created_by:g.uid,created_by_name:g.name||"Unknown"}),q()},le=[{type:"tour",icon:n.jsx(Wd,{className:"w-4 h-4"})},{type:"transfer",icon:n.jsx(ay,{className:"w-4 h-4"})},{type:"laundry",icon:n.jsx(ny,{className:"w-4 h-4"})}];return n.jsxs(fa,{className:"bg-zinc-900/50 border-zinc-800 h-full flex flex-col",children:[n.jsxs(tn,{className:"pb-3 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(_t,{className:"text-lg font-semibold text-white flex items-center gap-2",children:[n.jsx(eu,{className:"w-5 h-5 text-indigo-400"}),c("sales.tracker")]}),!w&&n.jsxs(ee,{size:"sm",onClick:()=>E(!0),className:"bg-indigo-600 hover:bg-indigo-500 gap-1 h-8 text-xs",children:[n.jsx(cs,{className:"w-3.5 h-3.5"}),c("sales.new")]})]}),n.jsx("div",{className:"flex gap-1 mt-3 p-1 bg-zinc-800/50 rounded-lg",children:le.map(({type:Y,icon:I})=>n.jsxs("button",{onClick:()=>N(Y),className:G("flex-1 flex items-center justify-center gap-2 py-1.5 px-3 rounded-md text-xs font-medium transition-all",v===Y?"bg-zinc-700 text-white shadow-sm":"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800/50"),children:[I,ba[Y].label]},Y))})]}),n.jsxs(ma,{className:"space-y-4 flex-1 overflow-y-auto custom-scrollbar p-3",children:[n.jsx(dt,{children:w&&n.jsx(me.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden mb-4",children:n.jsxs("div",{className:"p-3 bg-zinc-800/80 rounded-xl border border-indigo-500/30 space-y-3 shadow-lg",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"text-xs font-bold text-white uppercase tracking-wider",children:c("sales.newType",{label:ba[v].label})}),n.jsx("button",{onClick:q,className:"text-zinc-500 hover:text-zinc-300",children:n.jsx(St,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[n.jsxs("div",{className:"col-span-2 space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:c("sales.service")}),v==="tour"?n.jsxs(ya,{value:T.name,onValueChange:Y=>{const I=h.find(D=>D.name===Y);R(D=>({...D,name:Y,total_price:I?I.adult_price.toString():D.total_price}))},children:[n.jsx(da,{className:"h-8 text-xs bg-zinc-950 border-zinc-700",children:n.jsx(va,{placeholder:"Select Tour"})}),n.jsxs(ua,{children:[[...h].filter(Y=>Y.is_active).sort((Y,I)=>Y.name.localeCompare(I.name)).map(Y=>n.jsxs(Te,{value:Y.name,children:[Y.name," (",Y.adult_price,")"]},Y.id)),n.jsx(Te,{value:"other",children:c("sales.other")})]})]}):n.jsx(re,{value:T.name,onChange:Y=>R(I=>({...I,name:Y.target.value})),className:"h-8 text-xs bg-zinc-950 border-zinc-700",placeholder:v==="transfer"?"Destination (e.g. Airport)":"Description"}),T.name==="other"&&v==="tour"&&n.jsx(re,{placeholder:c("sales.customName"),onChange:Y=>R(I=>({...I,name:Y.target.value})),className:"h-8 text-xs mt-2 bg-zinc-950 border-zinc-700"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:c("tours.book.guestName")}),n.jsx(re,{value:T.customer_name,onChange:Y=>R(I=>({...I,customer_name:Y.target.value})),className:"h-8 text-xs bg-zinc-950 border-zinc-700",placeholder:"John Doe"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:c("tours.book.room")}),n.jsx(re,{value:T.room_number,onChange:Y=>R(I=>({...I,room_number:Y.target.value})),className:"h-8 text-xs bg-zinc-950 border-zinc-700",placeholder:"101"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:c("tours.book.pax")}),n.jsx(re,{type:"number",min:1,value:T.pax,onChange:Y=>R(I=>({...I,pax:parseInt(Y.target.value)||1})),className:"h-8 text-xs bg-zinc-950 border-zinc-700"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:c("tours.book.date")}),n.jsx(re,{type:"date",value:T.date,onChange:Y=>R(I=>({...I,date:Y.target.value})),className:"h-8 text-xs bg-zinc-950 border-zinc-700"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:c("sales.pickupTime")}),n.jsx(re,{type:"time",value:T.pickup_time,onChange:Y=>R(I=>({...I,pickup_time:Y.target.value})),className:"h-8 text-xs bg-zinc-950 border-zinc-700"})]}),n.jsxs("div",{className:"space-y-1 relative",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:c("sales.price")}),n.jsxs("div",{className:"relative",children:[n.jsx(re,{type:"number",value:T.total_price,onChange:Y=>R(I=>({...I,total_price:Y.target.value})),className:"h-8 text-xs bg-zinc-950 border-zinc-700 pl-6",placeholder:"0"}),n.jsx("span",{className:"absolute left-2 top-2 text-xs text-zinc-500",children:""})]})]}),n.jsxs("div",{className:"col-span-2 space-y-1",children:[n.jsx("label",{className:"text-[10px] text-zinc-500 font-bold uppercase",children:c("sales.notes")}),n.jsx(re,{value:T.notes,onChange:Y=>R(I=>({...I,notes:Y.target.value})),className:"h-8 text-xs bg-zinc-950 border-zinc-700",placeholder:c("sales.optionalNotes")})]})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsxs(ee,{onClick:F,disabled:!T.name.trim()||!T.total_price,className:"flex-1 bg-indigo-600 hover:bg-indigo-500 h-8 text-xs",children:[n.jsx(kt,{className:"w-3.5 h-3.5 mr-1"}),c("sales.create")]}),n.jsx(ee,{variant:"ghost",onClick:q,className:"h-8 text-xs",children:c("common.cancel")})]})]})})}),r?n.jsx("div",{className:"py-12 flex justify-center",children:n.jsx(at,{className:"w-8 h-8 animate-spin text-zinc-600"})}):L.length===0?n.jsxs("div",{className:"py-12 text-center",children:[n.jsx("div",{className:"text-4xl mb-2 opacity-20 text-zinc-600",children:ba[v].icon}),n.jsx("p",{className:"text-zinc-500 text-sm",children:c("sales.noSales",{label:ba[v].label.toLowerCase()})})]}):n.jsx("div",{className:"space-y-2",children:L.map(Y=>{var D;const I=Y.total_price-Y.collected_amount;return n.jsx(me.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},onClick:()=>M(Y.id),className:G("group p-3 rounded-xl border transition-all cursor-pointer hover:scale-[1.01] active:scale-[0.99]",Y.payment_status==="paid"?"bg-emerald-500/5 border-emerald-500/10 hover:border-emerald-500/30":Y.payment_status==="partial"?"bg-amber-500/5 border-amber-500/10 hover:border-amber-500/30":"bg-zinc-900 border-zinc-800 hover:border-zinc-700 hover:bg-zinc-800"),children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"text-lg group-hover:scale-110 transition-transform",children:ba[Y.type].icon}),n.jsx("span",{className:"font-semibold text-zinc-200 truncate",children:Y.name}),I>0&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500 animate-pulse"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 gap-y-1 text-[11px] text-zinc-400",children:[n.jsxs("span",{className:"bg-zinc-950/50 px-1.5 py-0.5 rounded border border-zinc-800",children:["Rm ",Y.room_number]}),n.jsx("span",{children:Y.customer_name}),n.jsx("span",{className:"text-zinc-600",children:""}),n.jsx("span",{children:ls(Y.date)}),n.jsx("span",{className:"text-zinc-600",children:""}),n.jsx("span",{className:"text-indigo-300",children:c("sales.soldBy",{name:Y.created_by_name})})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-sm font-bold text-white",children:["",Y.total_price]}),n.jsx("div",{className:G("text-[10px] font-medium",Ic[Y.payment_status].color.replace("bg-","text-").split(" ")[1]),children:Ic[Y.payment_status].label}),n.jsx("div",{onClick:K=>K.stopPropagation(),className:"mt-2",children:n.jsxs(ya,{value:Y.status||"waiting",onValueChange:K=>{p!=null&&p.id&&m(p.id,Y.id,{status:K})},children:[n.jsx(da,{className:G("h-6 text-[10px] uppercase font-bold tracking-wider px-2 py-0 border-0 min-w-[90px] justify-between gap-1 transition-colors rounded-md shadow-sm",((D=Is[Y.status])==null?void 0:D.color)||"bg-zinc-800 text-zinc-400"),children:n.jsx(va,{})}),n.jsx(ua,{align:"end",className:"bg-zinc-900 border-zinc-800",children:Object.keys(Is).map(K=>n.jsx(Te,{value:K,className:"text-xs focus:bg-zinc-800 focus:text-zinc-200",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:G("w-2 h-2 rounded-full",Is[K].color.split(" ")[0].replace("/20",""))}),Is[K].label]})},K))})]})})]})]})},Y.id)})})]}),n.jsx(KN,{saleId:_,onClose:()=>M(null)})]})}function QN(){const{currentShift:c,updateCompliance:d}=al(),{hotel:r}=ut(),{t:o}=Xe(),[u,m]=j.useState(!1);j.useEffect(()=>{const b=()=>{if(!c)return;const v=new Date().getHours();(v>=23||v>=0&&v<6)&&!c.compliance.kbs_checked?m(!0):m(!1)},p=setInterval(b,6e4);return b(),()=>clearInterval(p)},[c]);const h=async()=>{!(r!=null&&r.id)||!c||(await d(r.id,"kbs_checked",!0),m(!1))};return n.jsx(dt,{children:u&&n.jsx(me.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-6 right-6 z-50 max-w-sm w-full",children:n.jsxs("div",{className:"bg-rose-500/10 backdrop-blur-xl border border-rose-500/50 rounded-xl p-4 shadow-2xl shadow-rose-900/20",children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"p-3 bg-rose-500/20 rounded-full animate-pulse",children:n.jsx(ar,{className:"w-6 h-6 text-rose-500"})}),n.jsxs("div",{className:"flex-1 space-y-1",children:[n.jsxs("h4",{className:"font-bold text-white text-lg flex items-center gap-2",children:["CRITICAL ALERT",n.jsx("span",{className:"text-[10px] bg-rose-500 text-white px-1.5 py-0.5 rounded font-mono",children:"23:00"})]}),n.jsx("p",{className:"text-sm text-zinc-300",children:o("compliance.kbsLate")||"KBS System check is required immediately! Please verify guest identities."})]})]}),n.jsxs("div",{className:"flex gap-3 mt-4",children:[n.jsxs(ee,{onClick:h,className:"flex-1 bg-rose-600 hover:bg-rose-700 text-white border-none shadow-lg shadow-rose-900/50 animate-pulse",children:[n.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Mark Checked Now"]}),n.jsx(ee,{variant:"outline",onClick:()=>m(!1),className:"border-rose-500/30 text-rose-400 hover:bg-rose-500/10",children:"Dismiss"})]})]})})})}function ZN({className:c}){const{language:d}=Xe(),[r,o]=j.useState(new Date);j.useEffect(()=>{const h=setInterval(()=>o(new Date),1e3);return()=>clearInterval(h)},[]);const u=h=>h.toLocaleTimeString(d==="tr"?"tr-TR":"en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),m=h=>h.toLocaleDateString(d==="tr"?"tr-TR":"en-US",{day:"numeric",month:"short"});return n.jsxs(me.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:G("flex items-center gap-3 px-3 py-1.5 rounded-full bg-zinc-900/50 border border-zinc-800/50 backdrop-blur-md",c),children:[n.jsxs("div",{className:"flex items-center gap-1.5 text-zinc-400",children:[n.jsx(Dn,{className:"w-3 h-3 text-indigo-400/70"}),n.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider",children:m(r)})]}),n.jsx("div",{className:"w-[1px] h-3 bg-zinc-800"}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Jt,{className:"w-3 h-3 text-purple-400/70"}),n.jsx("span",{className:"text-xs font-mono font-medium text-zinc-300 tabular-nums",children:u(r)})]})]})}function Kh(){var X;const c=el(),d=Rx(),{user:r,initialize:o,signOut:u}=Ge(),{hotel:m,subscribeToHotel:h}=ut(),{currentShift:b,subscribeToCurrentShift:p,endShift:g,updateCompliance:v}=al(),{subscribeToNotes:N}=Wa(),w=rs(ue=>ue.subscribeToRoster),E=Zx(ue=>ue.subscribeToTodayMenu),{t:_,language:M,setLanguage:T}=Xe(),[R,L]=j.useState(!1),[q,F]=j.useState(!1),[le,Y]=j.useState(!1),[I,D]=j.useState(d.pathname==="/operations"?"operations":"overview"),[K,Q]=j.useState(()=>{const ue=localStorage.getItem("relay_show_datetime");return ue!==null?JSON.parse(ue):!0});j.useEffect(()=>{localStorage.setItem("relay_show_datetime",JSON.stringify(K))},[K]),j.useEffect(()=>{d.pathname==="/operations"?D("operations"):d.pathname==="/"&&D("overview")},[d.pathname]),TN((m==null?void 0:m.id)||null),kN();const{subscribeToSales:P}=fi();j.useEffect(()=>{if(!(m!=null&&m.id))return;const ue=P(m.id);return()=>{ue()}},[m==null?void 0:m.id,P]);const ie=j.useMemo(()=>{if(!b)return 0;let ue=0;return b.compliance.kbs_checked&&(ue+=50),b.compliance.agency_msg_checked_count>0&&(ue+=50),ue},[b]);j.useEffect(()=>{const ue=o();return()=>ue()},[o]),j.useEffect(()=>{(async()=>{if(!r)return;const we=r.hotel_id;if(!we){c("/setup-hotel");return}const W=h(we),ye=p(we),$e=N(we),Rt=w(we),It=E(we);return()=>{W(),ye(),$e(),Rt(),It()}})()},[r,c,h,p,N]);const $=async()=>{!(m!=null&&m.id)||!b||await v(m.id,"kbs_checked",!0)},ae=async()=>{!(m!=null&&m.id)||!b||await v(m.id,"agency_msg_checked_count",1)},de=async(ue,we)=>{m!=null&&m.id&&(await g(m.id,ue,we),L(!1),c("/shift-start"))},[y,H]=j.useState(!1),[ne,se]=j.useState("general"),pe=(ue="general")=>{se(ue),H(!0)},[qe,Ne]=j.useState(!1);return n.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white flex flex-col font-sans selection:bg-indigo-500/30",children:[n.jsx(Sv,{forceOpen:qe,onClose:()=>Ne(!1)}),n.jsx(DN,{isOpen:le,onClose:()=>Y(!1)}),n.jsx(qx,{isOpen:y,onClose:()=>H(!1),initialTask:ne}),n.jsx(QN,{}),n.jsxs("header",{className:"h-16 border-b border-zinc-800 bg-black/50 backdrop-blur-xl flex items-center justify-between px-6 shrink-0 z-50",children:[n.jsxs("div",{className:"flex items-center gap-8",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/20",children:n.jsx("span",{className:"font-bold text-white",children:"R"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"font-semibold text-lg tracking-tight",children:"Relay"}),n.jsx("p",{className:"text-[10px] text-zinc-500 uppercase tracking-wider font-medium",children:m==null?void 0:m.info.name})]})]}),n.jsx(ni,{value:I,onValueChange:D,className:"hidden md:block",children:n.jsxs($c,{className:"bg-zinc-900/50 border border-zinc-800 h-9",children:[n.jsx(_a,{value:"overview",className:"text-xs data-[state=active]:bg-zinc-800 data-[state=active]:text-white",children:_("module.overview")||"Genel Bak"}),n.jsx(_a,{value:"operations",className:"text-xs data-[state=active]:bg-zinc-800 data-[state=active]:text-white",children:_("module.operations")||"Operasyon Merkezi"})]})}),n.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[n.jsx(dt,{children:K&&n.jsx(ZN,{})}),n.jsx(ee,{variant:"ghost",size:"icon",className:"h-8 w-8 text-zinc-500 hover:text-zinc-300",onClick:()=>Q(!K),title:K?"Hide Time":"Show Time",children:K?n.jsx(Pc,{className:"w-3.5 h-3.5"}):n.jsx(Jt,{className:"w-3.5 h-3.5"})})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[b&&n.jsxs("div",{className:"hidden lg:flex items-center gap-2 px-3 py-1.5 rounded-full bg-zinc-900 border border-zinc-800",children:[n.jsx("div",{className:G("w-2 h-2 rounded-full animate-pulse",ie===100?"bg-emerald-500":"bg-amber-500")}),n.jsxs("span",{className:"text-xs text-zinc-400 font-medium",children:[ie,"% ",_("module.compliance")]})]}),n.jsx("div",{id:"tour-notifications",children:n.jsx(rN,{})}),n.jsxs(Qd,{children:[n.jsx(Zd,{asChild:!0,children:n.jsx(ee,{variant:"ghost",size:"icon",className:"h-9 w-9 text-zinc-400 hover:text-white",children:n.jsx(nx,{className:"w-4 h-4"})})}),n.jsxs(Jc,{align:"end",className:"w-32 bg-zinc-900 border-zinc-800",children:[n.jsxs(ra,{onClick:()=>T("en"),className:"text-xs",children:[" English ",M==="en"&&n.jsx(kt,{className:"ml-auto w-3 h-3"})]}),n.jsxs(ra,{onClick:()=>T("tr"),className:"text-xs",children:[" Trke ",M==="tr"&&n.jsx(kt,{className:"ml-auto w-3 h-3"})]})]})]}),n.jsx("div",{id:"tour-profile",children:n.jsxs(Qd,{children:[n.jsx(Zd,{asChild:!0,children:n.jsx("button",{className:"h-9 w-9 rounded-full bg-indigo-600 flex items-center justify-center border border-indigo-500/50 shadow-lg shadow-indigo-500/20 ml-2 hover:bg-indigo-500 transition-colors overflow-hidden",children:n.jsx("span",{className:"text-xs font-bold text-white",children:((X=r==null?void 0:r.name)==null?void 0:X.charAt(0).toUpperCase())||n.jsx(Ws,{className:"w-4 h-4 text-white"})})})}),n.jsxs(Jc,{align:"end",className:"w-56 bg-zinc-900 border-zinc-800 p-2",children:[n.jsx(Fc,{className:"px-2 py-1.5",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"text-sm font-semibold text-white",children:(r==null?void 0:r.name)||_("common.unknown")}),n.jsx("span",{className:"text-[10px] text-zinc-500 uppercase",children:r==null?void 0:r.role})]})}),n.jsx(ti,{className:"bg-zinc-800 my-2"}),n.jsxs(ra,{onClick:()=>Y(!0),className:"gap-2 cursor-pointer",children:[n.jsx(qd,{className:"w-4 h-4 text-amber-400"}),n.jsx("span",{className:"text-zinc-300",children:"Guided Tour"})]}),n.jsxs(ra,{onClick:()=>Ne(!0),className:"gap-2 cursor-pointer",children:[n.jsx(Yd,{className:"w-4 h-4 text-indigo-400"}),n.jsx("span",{className:"text-zinc-300",children:"Replay Intro"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(Fc,{className:"text-[10px] text-zinc-500 font-normal uppercase px-2",children:_("dashboard.actions")}),n.jsxs(ra,{onClick:()=>pe("general"),className:"flex items-center gap-2 text-zinc-300 hover:text-white cursor-pointer px-3 py-2 rounded-lg focus:bg-indigo-500/10 transition-colors",children:[n.jsx($d,{className:"w-4 h-4 text-indigo-400"}),n.jsx("span",{className:"text-xs font-medium",children:"Assistant AI"})]}),n.jsxs(ra,{onClick:()=>F(!0),className:"flex items-center gap-2 text-zinc-300 hover:text-white cursor-pointer px-3 py-2 rounded-lg focus:bg-amber-500/10 transition-colors",children:[n.jsx(Ud,{className:"w-4 h-4 text-amber-400"}),n.jsx("span",{className:"text-xs font-medium",children:_("dashboard.rooms")})]}),n.jsx(ti,{className:"bg-zinc-800"}),b?n.jsxs(ra,{onClick:()=>L(!0),className:"flex items-center gap-2 text-rose-400 hover:text-rose-300 cursor-pointer px-3 py-2 rounded-lg focus:bg-rose-500/10 transition-colors",children:[n.jsx(sy,{className:"w-4 h-4"}),n.jsx("span",{className:"text-xs font-medium",children:_("dashboard.endShift")})]}):n.jsxs(ra,{onClick:()=>c("/shift-start"),className:"flex items-center gap-2 text-emerald-400 hover:text-emerald-300 cursor-pointer px-3 py-2 rounded-lg focus:bg-emerald-500/10 transition-colors",children:[n.jsx(Yd,{className:"w-4 h-4"}),n.jsx("span",{className:"text-xs font-medium",children:_("dashboard.startShift")})]})]}),n.jsx(ti,{className:"bg-zinc-800 my-2"}),n.jsxs(ra,{onClick:()=>u(),className:"flex items-center gap-2 text-zinc-400 hover:text-white cursor-pointer px-3 py-2 rounded-lg focus:bg-zinc-800 transition-colors",children:[n.jsx(ly,{className:"w-4 h-4"}),n.jsx("span",{className:"text-xs font-medium",children:_("auth.logout")})]})]})]})})]})]}),n.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 border-t border-zinc-800 bg-zinc-950/90 backdrop-blur-xl pb-safe",children:n.jsxs("div",{className:"flex items-center justify-around h-16 px-2",children:[n.jsxs("button",{onClick:()=>D("overview"),className:G("flex flex-col items-center justify-center gap-1 w-full h-full active:scale-95 transition-transform",I==="overview"?"text-indigo-400":"text-zinc-500"),children:[n.jsx(iy,{className:"w-6 h-6"}),n.jsx("span",{className:"text-[10px] font-medium",children:_("module.overview")||"Overview"})]}),n.jsx("div",{className:"w-px h-8 bg-zinc-800"}),n.jsxs("button",{onClick:()=>D("operations"),className:G("flex flex-col items-center justify-center gap-1 w-full h-full active:scale-95 transition-transform",I==="operations"?"text-indigo-400":"text-zinc-500"),children:[n.jsx(tx,{className:"w-6 h-6"}),n.jsx("span",{className:"text-[10px] font-medium",children:_("module.operations")||"Operations"})]})]})}),n.jsxs("main",{className:"flex-1 overflow-hidden p-4 lg:p-6 pb-24 md:pb-6",children:[n.jsx(AN,{}),n.jsxs(ni,{value:I,className:"h-full border-none p-0 bg-transparent shadow-none",children:[n.jsx(Ca,{value:"overview",className:"h-full m-0 border-none p-0 outline-none",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-full",children:[n.jsxs("div",{className:"lg:col-span-1 h-full flex flex-col min-h-0 gap-6 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-zinc-800",children:[n.jsx("div",{id:"tour-logs",children:n.jsx(zN,{hotelId:(m==null?void 0:m.id)||""})}),b&&n.jsx("div",{id:"tour-shift-start",children:n.jsx(NN,{compliance:b.compliance,onKBSCheck:$,onAgencyCheck:ae,disabled:!1})})]}),n.jsxs("div",{className:"lg:col-span-1 h-full flex flex-col min-h-0 gap-6 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-zinc-800",children:[n.jsx("div",{className:"space-y-4",children:n.jsx(bN,{hotelId:(m==null?void 0:m.id)||"",userId:(r==null?void 0:r.uid)||""})}),((r==null?void 0:r.role)==="gm"||(r==null?void 0:r.role)==="receptionist")&&n.jsx(me.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:n.jsx(SN,{hotelId:(m==null?void 0:m.id)||"",canEdit:(r==null?void 0:r.role)==="gm"})})]}),n.jsxs("div",{className:"lg:col-span-1 h-full flex flex-col min-h-0 gap-6 overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-zinc-800",children:[n.jsx(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:n.jsx(wN,{hotelId:(m==null?void 0:m.id)||"",canEdit:(r==null?void 0:r.role)==="gm"})}),n.jsx(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:n.jsx(EN,{hotelId:(m==null?void 0:m.id)||"",canEdit:(r==null?void 0:r.role)==="gm"})}),n.jsx(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:n.jsx(ON,{})}),n.jsx(me.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:n.jsx(_N,{hotelId:(m==null?void 0:m.id)||""})})]})]})}),n.jsx(Ca,{value:"operations",className:"h-full m-0 border-none p-0 outline-none overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-800",children:n.jsxs("div",{className:"space-y-8 pb-12",children:[n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx("h2",{className:"text-3xl font-bold text-white tracking-tight",children:_("dashboard.operationsHub")}),n.jsx("p",{className:"text-zinc-500 text-lg font-sans",children:_("dashboard.operationsDesc")})]}),n.jsxs(ni,{defaultValue:"messaging",className:"space-y-8",children:[n.jsxs($c,{className:"bg-zinc-900/50 p-1 rounded-xl border border-zinc-800 h-12 w-full justify-start overflow-x-auto whitespace-nowrap no-scrollbar",children:[n.jsxs(_a,{value:"messaging",className:"rounded-lg gap-2 data-[state=active]:bg-indigo-600 data-[state=active]:text-white px-4 shrink-0",children:[n.jsx(Id,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:_("module.messaging")})]}),n.jsxs(_a,{value:"feedback",className:"rounded-lg gap-2 data-[state=active]:bg-indigo-600 data-[state=active]:text-white px-4 shrink-0",children:[n.jsx(Bd,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:_("module.complaints")})]}),n.jsxs(_a,{value:"off-days",id:"tour-offdays",className:"rounded-lg gap-2 data-[state=active]:bg-indigo-600 data-[state=active]:text-white px-4 shrink-0",children:[n.jsx(cy,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:_("module.offDays")})]}),n.jsxs(_a,{value:"tours",id:"tour-tours",className:"rounded-lg gap-2 data-[state=active]:bg-indigo-600 data-[state=active]:text-white px-4 shrink-0",children:[n.jsx(qd,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:_("module.tours")})]}),n.jsxs(_a,{value:"sales",id:"tour-sales",className:"rounded-lg gap-2 data-[state=active]:bg-indigo-600 data-[state=active]:text-white px-4 shrink-0",children:[n.jsx(eu,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:_("module.sales")})]})]}),n.jsxs("div",{className:"mt-8",children:[n.jsx(Ca,{value:"messaging",className:"mt-0 ring-0 focus-visible:ring-0 outline-none",children:n.jsx(HN,{})}),n.jsx(Ca,{value:"feedback",className:"mt-0 ring-0 focus-visible:ring-0 outline-none",children:n.jsx(BN,{})}),n.jsx(Ca,{value:"off-days",className:"mt-0 ring-0 focus-visible:ring-0 outline-none",children:n.jsx(LN,{})}),n.jsx(Ca,{value:"tours",className:"mt-0 ring-0 focus-visible:ring-0 outline-none",children:n.jsx(YN,{})}),n.jsx(Ca,{value:"sales",className:"mt-0 ring-0 focus-visible:ring-0 outline-none",children:n.jsx(XN,{})})]})]})]})})]})]}),n.jsx(gN,{isOpen:q,onClose:()=>F(!1)}),n.jsx(vN,{isOpen:R,onClose:()=>L(!1),hotelId:(m==null?void 0:m.id)||"",onComplete:de}),n.jsx(Cv,{})]})}function JN(){const c=el(),{user:d}=Ge(),{hotel:r}=ut(),{t:o}=Xe(),[u,m]=j.useState("0"),[h,b]=j.useState("A"),[p,g]=j.useState(!1),[v,N]=j.useState(null),w=async _=>{if(_.preventDefault(),!(!d||!(r!=null&&r.id))){g(!0),N(null);try{const M=r.id,{startShift:T}=al.getState();await T(M,[d.uid],h,parseFloat(u)||0);const{setDoc:R}=await oa(async()=>{const{setDoc:L}=await import("./vendor-firebase-DntPIKkY.js").then(q=>q.y);return{setDoc:L}},[]);await R(he(te,"users",d.uid),{current_shift_type:h},{merge:!0}),c("/")}catch(M){console.error("Error starting shift:",M),N(M instanceof Error?M.message:"Failed to start shift")}finally{g(!1)}}},E=[{id:"A",label:o("shift.morning"),time:"08:00 - 16:00",icon:Jt},{id:"B",label:o("shift.afternoon"),time:"16:00 - 00:00",icon:Jt},{id:"C",label:o("shift.night"),time:"00:00 - 08:00",icon:Jt}];return n.jsxs("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center relative overflow-hidden p-4 font-sans",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[n.jsx(me.div,{className:"absolute w-96 h-96 rounded-full bg-indigo-500/10 blur-3xl",animate:{x:[0,50,0],y:[0,30,0]},transition:{duration:15,repeat:1/0,ease:"easeInOut"},style:{top:"20%",left:"10%"}}),n.jsx(me.div,{className:"absolute w-80 h-80 rounded-full bg-purple-500/10 blur-3xl",animate:{x:[0,-40,0],y:[0,60,0]},transition:{duration:20,repeat:1/0,ease:"easeInOut"},style:{bottom:"20%",right:"10%"}})]}),n.jsxs(me.div,{className:"relative z-10 w-full max-w-md",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[n.jsxs("div",{className:"glass rounded-3xl p-8 shadow-2xl space-y-8",children:[n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-500/20 flex items-center justify-center mx-auto mb-4 border border-indigo-500/30",children:n.jsx(Yd,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:o("dashboard.startShift")}),n.jsx("p",{className:"text-zinc-500 text-sm",children:o("shift.welcome")})]}),n.jsxs("form",{onSubmit:w,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500 ml-1",children:o("shift.selectType")}),n.jsx("div",{className:"grid grid-cols-1 gap-2",children:E.map(_=>n.jsxs("button",{type:"button",onClick:()=>b(_.id),className:G("flex items-center justify-between p-4 rounded-2xl border transition-all duration-300",h===_.id?"bg-indigo-500/10 border-indigo-500/50 shadow-lg shadow-indigo-500/5":"bg-zinc-900/40 border-zinc-800 hover:border-zinc-700"),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:G("p-2 rounded-xl border transition-colors",h===_.id?"bg-indigo-500 border-indigo-400":"bg-zinc-800 border-zinc-700"),children:n.jsx(_.icon,{className:G("w-4 h-4",h===_.id?"text-white":"text-zinc-500")})}),n.jsxs("div",{className:"text-left",children:[n.jsx("div",{className:G("text-sm font-semibold",h===_.id?"text-white":"text-zinc-300"),children:_.label}),n.jsx("div",{className:"text-[10px] text-zinc-500",children:_.time})]})]}),h===_.id&&n.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center shadow-lg shadow-indigo-500/50",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]},_.id))})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500 ml-1",children:o("shift.startingCash")}),n.jsxs("div",{className:"relative group",children:[n.jsx(Ld,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-500 group-focus-within:text-indigo-400 transition-colors"}),n.jsx(re,{type:"number",step:"0.01",placeholder:"0.00",value:u,onChange:_=>m(_.target.value),className:"h-14 pl-12 bg-zinc-900/50 border-zinc-800 text-lg font-medium tracking-tight rounded-2xl focus:border-indigo-500/50 transition-all",required:!0}),n.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-zinc-600 font-medium tracking-tight",children:"TRY"})]})]}),v&&n.jsx("div",{className:"p-4 rounded-2xl bg-rose-500/10 border border-rose-500/20 text-rose-400 text-xs font-medium",children:v}),n.jsx(ee,{type:"submit",disabled:p,className:"w-full h-14 rounded-2xl bg-indigo-600 hover:bg-indigo-500 text-white font-bold text-base shadow-xl shadow-indigo-900/20 border border-indigo-500/30 transition-all hover:scale-[1.02] active:scale-[0.98]",children:p?n.jsx(at,{className:"w-5 h-5 animate-spin mx-auto"}):n.jsxs("div",{className:"flex items-center justify-center gap-2",children:[n.jsx(ry,{className:"w-5 h-5"}),n.jsx("span",{children:o("shift.proceed")})]})})]})]}),n.jsxs("div",{className:"mt-8 text-center space-y-4",children:[n.jsxs("p",{className:"text-zinc-600 text-xs",children:[o("shift.loggedAs")," ",n.jsx("span",{className:"text-zinc-400 font-medium",children:d==null?void 0:d.name})]}),n.jsx("button",{onClick:()=>c("/login"),className:"text-zinc-500 hover:text-zinc-300 text-xs font-medium transition-colors underline underline-offset-4",children:o("auth.switchAccount")})]})]})]})}function Uc({children:c,requiredRole:d}){const{user:r,initialized:o,loading:u,initialize:m}=Ge(),h=Rx();return j.useEffect(()=>{const b=m();return()=>b()},[m]),!o||u?n.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:n.jsxs(me.div,{className:"flex flex-col items-center gap-4",initial:{opacity:0},animate:{opacity:1},children:[n.jsx(at,{className:"w-8 h-8 text-indigo-500 animate-spin"}),n.jsx("p",{className:"text-zinc-400",children:"Loading..."})]})}):r?d&&r.role!==d&&r.role!=="gm"?n.jsx("div",{className:"min-h-screen bg-zinc-950 flex items-center justify-center",children:n.jsxs(me.div,{className:"text-center p-8 glass rounded-2xl max-w-md mx-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[n.jsx("h2",{className:"text-xl font-bold text-rose-400 mb-2",children:"Access Denied"}),n.jsx("p",{className:"text-zinc-400",children:"You don't have permission to access this page."})]})}):!r.hotel_id&&h.pathname!=="/setup-hotel"?n.jsx(ih,{to:"/setup-hotel",replace:!0}):n.jsx(n.Fragment,{children:c}):n.jsx(ih,{to:"/login",state:{from:h},replace:!0})}function FN(){const{logs:c}=Qx();return j.useEffect(()=>{const d=c?c.filter(r=>r.status==="open").length:0;d>0?document.title=`(${d}) Relay Operations`:document.title="Relay Operations"},[c]),null}function $N(){return n.jsxs(fy,{children:[n.jsx(FN,{}),n.jsxs(my,{children:[n.jsx(Fs,{path:"/login",element:n.jsx(pv,{})}),n.jsx(Fs,{path:"/register",element:n.jsx(bv,{})}),n.jsx(Fs,{path:"/setup-hotel",element:n.jsx(Uc,{children:n.jsx(vv,{})})}),n.jsx(Fs,{path:"/shift-start",element:n.jsx(Uc,{children:n.jsx(JN,{})})}),n.jsx(Fs,{path:"/operations",element:n.jsx(Uc,{children:n.jsx(Kh,{})})}),n.jsx(Fs,{path:"/",element:n.jsx(Uc,{children:n.jsx(Kh,{})})})]})]})}Ry.createRoot(document.getElementById("root")).render(n.jsx(j.StrictMode,{children:n.jsx($N,{})}));
